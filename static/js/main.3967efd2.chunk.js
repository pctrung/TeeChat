(this["webpackJsonptee-chat"]=this["webpackJsonptee-chat"]||[]).push([[0],{114:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(48),c=a.n(s),i=a(7),o=a(21),l=a(22),d=Object(o.b)({name:"chats",initialState:[],reducers:{addChat:function(e,t){e.push(t.payload)},editChat:function(e,t){var a=t.payload,r=e.findIndex((function(e){return e.id===a.id}));r>=0&&(e[r].name=a.name,e[r].participants=a.participants)},editGroupAvatar:function(e,t){var a,r=t.payload.chatId,n=e.findIndex((function(e){return e.id===r}));n>=0&&(e[n].groupAvatarUrl=null===(a=t.payload)||void 0===a?void 0:a.groupAvatarUrl)},appendMessageToChat:function(e,t){var a=t.payload,r=null===a||void 0===a?void 0:a.messages,n=e.findIndex((function(e){return e.id===a.id}));n>=0&&(e[n].totalRecords=a.totalRecords,e[n].limit=a.limit,e[n].page=a.page,e[n].pageCount=a.pageCount,a.keyword?e[n].messages=r:e[n].messages=e[n].messages.concat(r))},refreshChats:function(e,t){return t.payload},addMessage:function(e,t){var a=t.payload,r=e.findIndex((function(e){return e.id===a.chatId}));r>=0&&(e[r].messages.push(null===a||void 0===a?void 0:a.message),e[r].numOfUnreadMessages+=1)},readMessage:function(e,t){var a=t.payload,r=e.findIndex((function(e){return e.id===a}));r>=0&&(e[r].numOfUnreadMessages=0)}}}),u=Object(o.b)({name:"selectedId",initialState:0,reducers:{setSelectedId:function(e,t){return t.payload}}}),m=Object(l.b)({chats:d.reducer,selectedId:u.reducer}),b=d.actions,f=b.addChat,j=b.editChat,p=b.refreshChats,x=b.addMessage,g=b.appendMessageToChat,h=b.editGroupAvatar,v=b.readMessage,O=u.actions.setSelectedId,N=m,y=Object(o.b)({name:"isLoading",initialState:!1,reducers:{setIsLoading:function(e,t){return t.payload}}}),w=Object(o.b)({name:"popup",initialState:{isOpen:!1,content:"",title:"Notification"},reducers:{setPopup:function(e,t){return t.payload}}}),k=Object(l.b)({isLoading:y.reducer,popup:w.reducer}),C=y.actions.setIsLoading,U=w.actions.setPopup,S=k,E=a(50),F=Object(o.b)({name:"currentUser",initialState:{},reducers:{getCurrentUser:function(e,t){var a=function(){var e=window.localStorage.getItem("token");if(e){return Object(E.a)(e)}return!1}();if(a)return a},updateUser:function(e,t){if(t.payload.userName)return t.payload}}}),M=Object(l.b)({currentUser:F.reducer}),I=F.actions,A=I.getCurrentUser,L=I.updateUser;var P={chats:N,app:S,users:M},T=Object(o.a)({reducer:P}),R=(a(114),a(12)),z=a(105),Y=a(15),D=a(13),G=a(3),B=a(0),q=function(e){var t,a=e.className,n=e.isOpen,s=void 0===n||n,c="h-3 w-3 bg-gradient-to-br from-green-300 to-green-600 shadow-md rounded-full",i=Object(r.useState)(!1),o=Object(G.a)(i,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){return function(){d(!0)}}),[]),s&&Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("div",{className:"z-50  animate-fade flex flex-col h-screen w-screen justify-center items-center fixed transition-all duration-200 bg-white dark:bg-dark-secondary dark:bg-opacity-50 bg-opacity-50"+(l?" hidden":"")+(null!==(t=" "+a)&&void 0!==t?t:""),children:Object(B.jsxs)("div",{className:"flex justify-center items-center transition-all duration-200",children:[Object(B.jsx)("div",{className:"".concat(c," mr-3 animate-bounce")}),Object(B.jsx)("div",{className:"".concat(c," mr-3 animate-bounce200")}),Object(B.jsx)("div",{className:"".concat(c," animate-bounce400")})]})})})};var V=function(e){var t=e.outline,a=void 0!==t&&t,r=e.content,n=e.className,s=e.onClick,c=e.onBlur,i=e.disabled;return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("button",{disabled:i,onClick:s,onBlur:c,className:"px-4 py-2 rounded-lg transition-all text-sm md:text-base duration-200 disabled:opacity-50 outline-none z-0 select-none  "+(a?"ring-inset ring-1 ring-green-500 bg-white dark:bg-transparent dark:hover:bg-green-500 text-green-500 hover:text-white hover:bg-green-400 active:bg-green-500":"bg-gradient-to-br from-green-400 to-green-600 text-white active:from-green-500 active:to-green-600  ")+" "+(null!==n&&void 0!==n?n:"")+" "+(i?"cursor-default":"active:scale-95 active:transform"),children:r})})};var _=function(e){var t=e.title,a=void 0===t?"Notification":t,r=e.isOpen,n=e.content,s=void 0===n?"Oops! Something went wrong!":n,c=e.onClick;return r&&Object(B.jsx)("div",{className:"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 bg-opacity-30 dark:bg-dark-primary dark:bg-opacity-50 z-50",children:Object(B.jsxs)("div",{className:"bg-white dark:bg-dark-secondary py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6",children:[Object(B.jsx)("h3",{className:"font-semibold text-2xl break-words dark:text-dark-txt",children:a}),Object(B.jsx)("span",{className:"break-words dark:text-dark-txt",children:s}),Object(B.jsx)("div",{className:"w-full flex justify-end",children:Object(B.jsx)(V,{content:"Close",onClick:c})})]})})},Z=a(5),$=a.n(Z),J=a(8),W=a(104),H=a(6),K=a.p+"static/media/default-avatar.ae67bd1e.jpg";var Q=function(e){var t,a,r=e.src,n=void 0===r?K:r,s=e.className,c=void 0===s?"":s,i=e.alt,o=void 0===i?"Avatar":i,l=e.size;switch(void 0===l?"md":l){case"xs":a="md:h-6 md:w-6 h-5 w-5";break;case"sm":a="h-8 w-8";break;case"lg":a="h-16 w-16";break;case"xl":a="h-24 w-24";break;case"full":a="h-full w-full";break;default:a="h-12 w-12"}return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("img",{className:null!==(t=a+" select-none bg-white rounded-full object-cover  "+c)&&void 0!==t?t:"",src:n&&""!==n?n:K,alt:o})})},X=a(29),ee=a.n(X),te={chatType:{PRIVATE:1,GROUP:2},NO_NAME_GROUP:"No name"};var ae=function(){var e=Object(i.c)((function(e){return e.chats.chats})),t=Object(i.c)((function(e){return e.chats.selectedId})),a=Object(i.c)((function(e){return e.users.currentUser})),n=Object(i.b)(),s=Object(r.useState)(""),c=Object(G.a)(s,2),o=c[0],l=c[1];return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("input",{type:"search",className:"my-3 rounded-3xl bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 outline-none transition-all duration-200 w-full dark:bg-dark-secondary dark:text-white",placeholder:"Search chat",onChange:function(e){return l(e.target.value)}}),Object(B.jsx)("div",{className:"h-full overflow-x-hidden space-y-2 overflow-y-auto pr-2 pb-48 md:pb-0",children:e&&re(e,o).map((function(e,r){var s,c,i,o,l,d=a.userName;if(null===e||void 0===e?void 0:e.participants.some((function(e){return e.userName===d}))){var u,m=(null===e||void 0===e?void 0:e.participants.length)>1?null===e||void 0===e||null===(s=e.participants)||void 0===s?void 0:s.filter((function(e){return e.userName!==d})).shift():a,b={};if(0!==(null===(c=e.messages)||void 0===c?void 0:c.length))b=null===(u=e.messages)||void 0===u?void 0:u.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t}));return Object(B.jsxs)("div",{className:"relative select-none w-full h-20 flex flex-start cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-all duration-150 ease-in dark:hover:bg-dark-secondary dark:text-dark-txt "+(t===e.id?"bg-gray-100 dark:bg-dark-secondary":""),onClick:function(){return function(e){if(e!==t){var a=O(e);n(a)}}(e.id)},children:[e.numOfUnreadMessages>0&&Object(B.jsx)("span",{className:"w-6 h-6 absolute right-2 top-1/2 transform -translate-y-1/2 text-xs font-bold p-1 bg-green-500 dark:bg-green-600 text-white rounded-full  text-center align-middle",children:e.numOfUnreadMessages>9?"9+":e.numOfUnreadMessages}),Object(B.jsx)(Q,{src:(null===e||void 0===e?void 0:e.type)===te.chatType.PRIVATE?null===m||void 0===m?void 0:m.avatarUrl:null===e||void 0===e?void 0:e.groupAvatarUrl,size:"lg"}),Object(B.jsxs)("div",{className:"font-primary flex flex-col px-3 py-2 justify-between truncate",children:[Object(B.jsx)("span",{className:"text-gray-800 truncate dark:text-dark-txt  "+(e.numOfUnreadMessages>0?"font-bold":""),children:(null===e||void 0===e?void 0:e.type)===te.chatType.PRIVATE?null===m||void 0===m?void 0:m.fullName:null!==(i=e.name)&&void 0!==i?i:te.NO_NAME_GROUP}),Object(B.jsxs)("div",{className:"flex",children:[Object(B.jsx)("span",{className:"mr-2 text-sm max-w-200 md:max-w-100 text-gray-500 truncate "+(e.numOfUnreadMessages>0?"font-bold":""),children:null!==(o=b.content)&&void 0!==o?o:""}),Object(B.jsx)("span",{className:"text-sm flex-grow text-gray-500 truncate",children:ee()(new Date(null!==(l=b.dateCreated)&&void 0!==l?l:e.dateCreated),"YYYYMMDD").fromNow()})]})]})]},Date.now()+r)}}))})]})};function re(e,t){var a=function(e){if(e)return Object(H.a)(e).sort((function(e,t){var a,r,n,s,c,i,o={},l={};0!==(null===(a=e.messages)||void 0===a?void 0:a.length)?o=null===(c=e.messages)||void 0===c?void 0:c.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t})):o.dateCreated=e.dateCreated;0!==(null===(r=t.messages)||void 0===r?void 0:r.length)?l=null===(i=t.messages)||void 0===i?void 0:i.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t})):l.dateCreated=t.dateCreated;return(null===(n=o)||void 0===n?void 0:n.dateCreated)<(null===(s=l)||void 0===s?void 0:s.dateCreated)?1:-1}))}(e);return a=function(e,t){if(e)return e.filter((function(e){var a;return(null===e||void 0===e?void 0:e.participants.some((function(e){return!(!e.fullName.toLowerCase().includes(t.toLowerCase())&&!(null===e||void 0===e?void 0:e.userName.toLowerCase().includes(t.toLowerCase())))})))||(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))}))}(a,t)}var ne=a.p+"static/media/info-icon.b4879a5e.svg",se=a.p+"static/media/left-arrow-icon.07714e5b.svg",ce=a.p+"static/media/emoji.21d0cbf4.svg",ie=a.p+"static/media/image-icon.c8ad9f46.svg",oe=a.p+"static/media/send-icon.666dadc9.svg";var le=function(e){var t=e.className,a=e.icon,r=e.iconClass,n=e.alt,s=e.onClick,c=e.onBlur;return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("div",{onBlur:c,onClick:s,className:"p-1 rounded-full hover:bg-gray-200 active:bg-gray-300 dark:hover:bg-dark-hover dark:border-dark-third transition-all duration-200 cursor-pointer ease-in dark:active:bg-dark-third active:scale-90 active:transform select-none "+(null!==t&&void 0!==t?t:""),children:a?Object(B.jsx)("img",{alt:null!==n&&void 0!==n?n:"Clickable Icon",src:a,onClick:s,className:"w-full"}):Object(B.jsx)("i",{className:"text-center align-middle text-xl text-black dark:text-dark-txt w-7 h-7  "+r})})})},de=a(97),ue=a.n(de),me=a(98),be=a.n(me),fe=a(99),je=a.n(fe);function pe(){var e=Object(i.b)(),t=Object(D.g)(),a=be.a.create({baseURL:"https://teechatapi.azurewebsites.net/api",timeout:3e5,headers:{"Content-Type":"application/json"},paramsSerializer:function(e){return je.a.stringify(e)}});return a.interceptors.request.use(function(){var e=Object(J.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),r=t,a&&(r=Object(R.a)(Object(R.a)({},t),{},{headers:{Authorization:"Bearer ".concat(a)}})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.interceptors.response.use((function(t){return e(C(!1)),t&&t.data?t.data:t}),(function(a){var r,n,s,c,i,o,l,d;if(a.response)switch(e(C(!1)),a.response.status){case 401:window.localStorage.removeItem("token"),t.push("/login");break;case 403:t.push("/ForBid");break;case 500:t.push("/ServerError");break;default:var u="string"===typeof(null===(r=a.response)||void 0===r?void 0:r.data)?null===(n=a.response)||void 0===n?void 0:n.data:"Oops, something went wrong! Please contact administrator.";return u=(null===(s=a.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.errors)?function(e){for(var t="",a=0,r=Object.values(e);a<r.length;a++){var n=r[a];t+="".concat(n.toString(),", ")}return t.substring(t.length-3,t.length),t}(null===(i=a.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.errors):u,e(U({isOpen:!0,title:"Notification",content:u})),Promise.reject(null===(l=a.response)||void 0===l?void 0:l.data)}return Promise.reject(null===a||void 0===a||null===(d=a.response)||void 0===d?void 0:d.data)})),a}var xe="/chats";function ge(){var e=pe(),t=Object(i.b)();return{getAll:function(){t(C(!0));var a="".concat(xe);return e.get(a)},getById:function(a,r){t(C(!0));var n="".concat(xe,"/").concat(a);return e.get(n,{params:r})},sendMessage:function(t,a){var r="".concat(xe,"/").concat(t,"/send");return e.post(r,a)},readMessage:function(t){var a="".concat(xe,"/").concat(t,"/read");return e.patch(a)},sendImage:function(a,r){t(C(!0));var n="".concat(xe,"/").concat(a,"/sendImage");return e.interceptors.request.use(function(){var e=Object(J.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),r={},a&&(r=Object(R.a)(Object(R.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.post(n,r)},updateGroupAvatar:function(a,r){t(C(!0));var n="".concat(xe,"/").concat(a,"/avatar");return e.interceptors.request.use(function(){var e=Object(J.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),r={},a&&(r=Object(R.a)(Object(R.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.patch(n,r)},createGroupChat:function(a){t(C(!0));var r="".concat(xe,"/group");return e.post(r,a)},updateGroupChat:function(a,r){t(C(!0));var n="".concat(xe,"/").concat(a);return e.patch(n,r)},createPrivateChat:function(a){t(C(!0));var r="".concat(xe,"/private");return e.post(r,a)}}}var he=function(e){var t=e.chatId,a=Object(r.useState)(""),n=Object(G.a)(a,2),s=n[0],c=n[1],i=Object(r.useState)(null),o=Object(G.a)(i,2),l=(o[0],o[1]),d=Object(r.useState)(!1),u=Object(G.a)(d,2),m=u[0],b=u[1],f=Object(r.useRef)(),j=ge();function p(){return(p=Object(J.a)($.a.mark((function e(a){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s){e.next=3;break}return e.abrupt("return");case 3:return c(""),r={content:s},e.next=7,j.sendMessage(t,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(J.a)($.a.mark((function e(a){var r,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target.files[0],(n=new FormData).append("Image",r),e.next=5,j.sendImage(t,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=function(e){m&&f.current&&!f.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[m]),Object(B.jsx)("div",{children:Object(B.jsxs)("form",{onSubmit:function(e){return function(e){return p.apply(this,arguments)}(e)},className:"flex justify-between items-center space-x-1 pl-4 pr-2 md:pr-6 z-0",children:[Object(B.jsxs)("div",{className:"relative w-full flex",children:[Object(B.jsx)("input",{id:"imageFile",type:"file",hidden:!0,accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg",onChange:function(e){return x.apply(this,arguments)}}),Object(B.jsx)("label",{htmlFor:"imageFile",children:Object(B.jsx)(le,{className:"h-10 w-10 p-2 mr-2",icon:ie})}),Object(B.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Aa",className:"bg-gray-200 dark:bg-dark-secondary rounded-3xl w-full py-2 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative"}),Object(B.jsxs)("div",{ref:f,position:"relative",children:[Object(B.jsx)(le,{className:"absolute h-10 w-10 p-2 right-1 top-0",icon:ce,onClick:function(){return b(!m)}}),Object(B.jsx)("div",{className:"animate-fade absolute right-0 bottom-full  "+(m?"visible":"invisible"),children:Object(B.jsx)(ue.a,{onEmojiClick:function(e,t){l(t),(null===t||void 0===t?void 0:t.emoji)&&c(s+(null===t||void 0===t?void 0:t.emoji))}})})]})]}),Object(B.jsx)("button",{children:Object(B.jsx)(le,{disableAutoFocus:!0,icon:oe,className:"w-12 h-12 p-3"})})]})})};var ve=function(e){var t=e.title,a=e.isOpen,r=e.content,n=void 0===r?"Are you sure?":r,s=e.closeAction,c=e.confirmButtonTitle,i=e.confirmButtonAction;return a&&Object(B.jsx)("div",{className:"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 dark:bg-dark-primary dark:bg-opacity-50 bg-opacity-30 z-50",children:Object(B.jsxs)("div",{className:"bg-white dark:bg-dark-secondary dark:border-dark-third py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6",children:[Object(B.jsx)("h3",{className:"font-semibold text-2xl break-words dark:text-dark-txt",children:""!==t?t:"Notification"}),Object(B.jsx)("span",{className:"break-words dark:text-dark-txt",children:n}),Object(B.jsxs)("div",{className:"w-full flex justify-end space-x-2",children:[Object(B.jsx)(V,{outline:!0,content:"No",onClick:s}),Object(B.jsx)(V,{content:null!==c&&void 0!==c?c:"Ok",onClick:i})]})]})})},Oe="/users";function Ne(){var e=pe(),t=Object(i.b)();return{login:function(a){t(C(!0));var r="".concat(Oe,"/login");return e.post(r,a)},register:function(a){t(C(!0));var r="".concat(Oe,"/register");return e.post(r,a)},checkUserNameExists:function(t){if(t){var a="".concat(Oe,"/").concat(t,"/isExists");return e.get(a)}return Promise.reject()},getFriendList:function(){var t="".concat(Oe);return e.get(t)},getCurrentUser:function(){var t="".concat(Oe,"/current");return e.get(t)},updateUser:function(a){t(C(!0));var r="".concat(Oe);return e.interceptors.request.use(function(){var e=Object(J.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.getItem("token"),r={},a&&(r=Object(R.a)(Object(R.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.put(r,a)}}}var ye=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.chat,s=Object(r.useState)(!1),c=Object(G.a)(s,2),o=c[0],l=c[1],d=Object(r.useState)(""),u=Object(G.a)(d,2),m=u[0],b=u[1],f=Object(r.useState)(n.name),j=Object(G.a)(f,2),p=j[0],x=j[1],g=Object(r.useState)(""),h=Object(G.a)(g,2),v=h[0],O=h[1],N=Object(r.useState)(!1),y=Object(G.a)(N,2),w=y[0],k=y[1],C=Object(r.useState)([]),U=Object(G.a)(C,2),S=U[0],E=U[1],F=Object(r.useState)(!1),M=Object(G.a)(F,2),I=M[0],A=M[1],L=Object(r.useState)(n.participants),P=Object(G.a)(L,2),T=P[0],R=P[1],z=ge(),Y=Ne(),D=Object(r.useState)({isOpen:!1,content:"",title:"Notification"}),q=Object(G.a)(D,2),Z=q[0],W=q[1],K=Object(i.c)((function(e){return e.users.currentUser})),X=Object(r.useRef)(),ae=Object(r.useRef)();function re(){return(re=Object(J.a)($.a.mark((function e(){var t,a,r,s,c,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===n||void 0===n?void 0:n.participants.map((function(e){return e.userName})),a=T.map((function(e){return e.userName})),r=[],s=[],c=[],T.forEach((function(e){t.some((function(t){return t===e.userName}))||r.push(e.fullName)})),null===n||void 0===n||n.participants.forEach((function(e){a.some((function(t){return t===e.userName}))||(s.push(e.fullName),c.push(e.userName))})),!(s.length>0)){e.next=25;break}if(i="",!c.some((function(e){return e===K.userName}))){e.next=19;break}if(1!==s.length){e.next=16;break}return oe(i="Do you want to leave this group?"),e.abrupt("return",Object(B.jsx)(B.Fragment,{}));case 16:i="Do you want to leave this group and remove ";case 17:e.next=20;break;case 19:i="Do you want to remove ";case 20:s.forEach((function(e,t){c[t]!==K.userName&&(i+="'".concat(e,"'"),t!==s.length-1&&(i+=", "))})),oe(i+=" from this chat?"),e.next=27;break;case 25:return e.next=27,ne();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return se.apply(this,arguments)}function se(){return(se=Object(J.a)($.a.mark((function e(){var t,r,s,c,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null===n||void 0===n?void 0:n.participants.map((function(e){return e.userName})),r=T.map((function(e){return e.userName})),s=[],c=[],r.forEach((function(e){t.includes(e)||s.push(e)})),t.forEach((function(e){r.includes(e)||c.push(e)})),i={newGroupName:p,participantUserNamesToAdd:s,participantUserNamesToRemove:c},z.updateGroupChat(n.id,i),le(),a(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(J.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("Avatar",a),e.next=5,z.updateGroupAvatar(n.id,r).then((function(e){ie("Success","Update group avatar successfully!")}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){W({isOpen:!0,title:e,content:t})}function oe(e){l(!0),b(e)}function le(){l(!1),b("")}return Object(r.useEffect)((function(){k(!!(null===p||void 0===p?void 0:p.trim()))}),[p]),Object(r.useEffect)((function(){var e=function(e){t&&X.current&&!X.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(r.useEffect)((function(){var e=function(e){I&&ae.current&&!ae.current.contains(e.target)&&A(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[I]),Object(r.useEffect)((function(){Y.getFriendList().then((function(e){e&&E(e)}))}),[]),Object(r.useEffect)((function(){R(n.participants),x(n.name)}),[n]),t?Object(B.jsx)("div",{className:"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 py-10 z-30 bg-gray-500 bg-opacity-30 dark:bg-dark-primary dark:bg-opacity-50",children:Object(B.jsxs)("div",{ref:X,className:"px-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 max-h-full overflow-y-auto "+(I?"mb-16":""),children:[Object(B.jsx)(_,{title:Z.title,isOpen:Z.isOpen,content:Z.content,onClick:function(){return W({isOpen:!1})}}),Object(B.jsx)(ve,{isOpen:o,closeAction:function(){return l(!1)},title:"Are you sure?",content:m,confirmButtonTitle:"Yes",confirmButtonAction:ne}),Object(B.jsx)("div",{className:"flex pt-6 pb-5 h-full",children:Object(B.jsx)("h3",{className:"font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400",children:"Chat info!"})}),Object(B.jsx)("div",{className:"space-y-2 md:space-y-4",children:(null===n||void 0===n?void 0:n.type)===te.chatType.GROUP?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{className:"space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"groupName",className:"font-semibold dark:text-dark-txt text-base md:text-lg",children:["Group name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",{id:"groupName",value:p,onChange:function(e){return x(e.target.value)},type:"text",className:"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "})]}),Object(B.jsxs)("div",{ref:ae,className:"space-y-2",children:[Object(B.jsx)("label",{htmlFor:"search",className:"font-semibold dark:text-dark-txt text-base md:text-lg",children:"Add Members"}),Object(B.jsxs)("div",{className:"relative",children:[Object(B.jsx)("input",{id:"search",type:"search",onFocus:function(){return A(!0)},value:v,autoComplete:"off",onChange:function(e){return O(e.target.value)},className:"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),I&&Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-dark-third border border-gray-400 border-opacity-50 rounded-lg w-full md:py-4 py-2 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl ",children:[Object(B.jsx)("h4",{className:"font-semibold dark:text-gray-200 mb-2",children:"Friend list"}),S.filter((function(e){var t,a;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===v||void 0===v?void 0:v.toLowerCase()))||(null===(a=e.userName)||void 0===a?void 0:a.toLowerCase().includes(null===v||void 0===v?void 0:v.toLowerCase())))&&!T.some((function(t){return t.userName===e.userName}))})).sort((function(e,t){return e.fullName.localeCompare(t.fullName)})).map((function(e,t){var a;return Object(B.jsxs)("div",{onClick:function(){var t=Object(H.a)(T);t.some((function(t){return t.userName===e.userName}))||(t.push(e),R(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-hover bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate md:text-base text-sm",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t)}))]})})]})]}),Object(B.jsxs)("div",{className:"space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"search",className:"font-semibold text-base md:text-lg dark:text-dark-txt",children:["Members ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(B.jsx)("span",{className:"text-sm text-gray-400",children:"(Click to remove)"})]}),Object(B.jsx)("div",{className:"bg-white border dark:bg-dark-third dark:border-dark-third border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none",children:Object(H.a)(T).sort((function(e,t){return e.fullName.localeCompare(t.fullName)})).map((function(e,t){var a;return Object(B.jsxs)("div",{onClick:function(){var t=Object(H.a)(T),a=t.findIndex((function(t){return t.userName===e.userName}));a>=0&&(t.splice(a,1),R(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2 dark:hover:bg-red-500 dark:bg-dark-hover bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate md:text-base text-sm",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t)}))})]}),Object(B.jsxs)("div",{className:"space-y-2 mr-2 flex flex-col",children:[Object(B.jsx)("label",{htmlFor:"avatar",className:"dark:text-dark-txt text-base md:text-lg font-semibold ",children:"Group Avatar"}),Object(B.jsx)("input",{id:"avatar",onChange:function(e){return ce.apply(this,arguments)},type:"file",className:"w-full",accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg"})]})]}):Object(B.jsxs)("div",{ref:ae,className:"space-y-2",children:[Object(B.jsxs)("div",{className:"font-bold dark:text-dark-txt",children:["Created user:"," ",Object(B.jsx)("span",{className:"font-normal",children:n.creatorUserName})]}),Object(B.jsxs)("div",{className:"font-bold dark:text-dark-txt",children:["Created date:"," ",Object(B.jsx)("span",{className:"font-normal",children:ee()(new Date(n.dateCreated),"YYYYMMDD").format("MMMM Do YYYY, h:mm:ss a")})]})]})}),Object(B.jsx)("div",{className:"flex justify-end py-6 space-x-4",children:Object(B.jsxs)("div",{className:"space-x-2 flex items-center",children:[Object(B.jsx)(V,{outline:!0,content:"Close",onClick:function(){return a(!1)}}),(null===n||void 0===n?void 0:n.type)===te.chatType.GROUP?Object(B.jsx)(V,{disabled:!w,content:"Save",onClick:function(){return function(){return re.apply(this,arguments)}()}}):""]})})]})}):""};var we=function(e){var t,a,n,s=e.chat,c=Object(i.b)(),o=Object(i.c)((function(e){return e.users.currentUser})),l=ge(),d=Object(r.useState)([]),u=Object(G.a)(d,2),m=u[0],b=u[1],f=Object(r.useState)(!1),j=Object(G.a)(f,2),p=j[0],x=j[1],h=o.userName,N=(null===s||void 0===s?void 0:s.participants.length)>1?null===s||void 0===s||null===(t=s.participants)||void 0===t?void 0:t.filter((function(e){return e.userName!==h})).shift():o;function y(e){var t=Object(H.a)(m);t.findIndex((function(t){return t===e}))>=0?t=t.filter((function(t){return t!==e})):t.push(e),b(t)}var w=Object(r.useState)(1),k=Object(G.a)(w,2),C=k[0],U=k[1],S=function(e,t){var a=Object(r.useState)(!1),n=Object(G.a)(a,2),s=n[0],c=n[1],i=Object(r.useState)(""),o=Object(G.a)(i,2),l=o[0],d=o[1],u=Object(r.useState)({}),m=Object(G.a)(u,2),b=m[0],f=m[1],j=Object(r.useState)(!1),p=Object(G.a)(j,2),x=p[0],g=p[1],h=ge();return Object(r.useEffect)((function(){if(t>1&&x){c(!0),d(!1);var a={page:t};h.getById(e.id,a).then((function(e){f(e),g(t<e.pageCount),c(!1)})).catch((function(e){d(e)}))}}),[t]),Object(r.useEffect)((function(){g(t<e.pageCount)}),[e]),{loading:s,error:l,appendChat:b,hasMore:x}}(s,C),E=S.appendChat,F=S.hasMore,M=S.loading,I=S.error,A=Object(r.useRef)();return Object(r.useEffect)((function(){(null===s||void 0===s?void 0:s.numOfUnreadMessages)>0&&l.readMessage(s.id).then((function(e){c(v(s.id))}))}),[s]),Object(r.useEffect)((function(){c(g(E))}),[E]),Object(r.useEffect)((function(){s.page<2&&A&&A.current.scrollIntoView()}),[s]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ye,{isOpen:p,setIsOpen:x,chat:s}),Object(B.jsxs)("div",{className:"flex flex-col w-full h-full pb-4",children:[Object(B.jsxs)("div",{className:"w-full border-b border-gray-300 dark:border-dark-third flex justify-between items-center md:p-4 p-3",children:[Object(B.jsxs)("div",{className:"flex justify-between items-center space-x-3",children:[Object(B.jsx)("img",{src:se,alt:"Arrow icon",className:"h-5 w-5 md:hidden cursor-pointer",onClick:function(){var e=O(0);c(e)}}),Object(B.jsx)(Q,{src:""!==(null===s||void 0===s?void 0:s.groupAvatarUrl)?null===s||void 0===s?void 0:s.groupAvatarUrl:null===N||void 0===N?void 0:N.avatarUrl}),Object(B.jsx)("span",{className:"text-lg font-semibold dark:text-dark-txt truncate w-60 md:w-96",children:(null===s||void 0===s?void 0:s.type)===te.chatType.PRIVATE?null===N||void 0===N?void 0:N.fullName:null!==(a=s.name)&&void 0!==a?a:te.NO_NAME_GROUP})]}),Object(B.jsx)(le,{className:"h-10 w-10 p-2 mr-2",icon:ne,onClick:function(){return x(!p)}})]}),Object(B.jsxs)("div",{className:"flex-grow overflow-y-auto overflow-x-hidden px-4 pb-4 pt-2 space-y-1 flex flex-col",children:[M&&Object(B.jsx)("div",{className:"text-gray-500 text-center my-2",children:"Loading..."}),F&&!M&&Object(B.jsx)("div",{className:"flex",children:Object(B.jsx)("button",{className:"mx-auto px-4 bg-gray-200 py-2 rounded-lg transform active:scale-95 hover:bg-gray-300 dark:hover:bg-dark-hover dark:bg-dark-third dark:text-gray-300 text-xs md:text-sm transition-all duration-200",onClick:function(){C<s.pageCount&&U((function(e){return e+1}))},children:"Load more messages..."})}),!F&&Object(B.jsxs)("div",{className:"text-gray-500 text-xs md:text-sm text-center mb-2",children:["Date created:"," ",ee()(new Date(s.dateCreated),"YYYYMMDD").format("MMMM Do YYYY, h:mm:ss a")]}),Object(B.jsx)("div",{children:I&&"Error"}),null===(n=Object(H.a)(s.messages))||void 0===n?void 0:n.sort((function(e,t){return e.dateCreated>t.dateCreated?1:-1})).map((function(e,t){var a,r,n;return e.senderUserName===o.userName?Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"flex flex-col items-end w-full",children:[m.includes(t)&&Object(B.jsx)("span",{className:"transition-all animate-fade text-xs md:text-sm text-gray-400 left-0 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-right",children:null!==(a=ee()(new Date(e.dateCreated),"YYYYMMDD").calendar())&&void 0!==a?a:""}),e.imageUrl?Object(B.jsx)("img",{onClick:function(){return y(t)},className:"md:max-w-300 max-w-200 rounded-lg shadow transition-all duration-200 cursor-pointer",src:e.imageUrl,alt:"Message"}):Object(B.jsx)("span",{onClick:function(){return y(t)},className:"text-white rounded-3xl md:px-5 md:py-3 px-3 py-2 break-word rounded-br-none cursor-pointer overflow-x-auto max-w-3/4 text-sm md:text-base "+(m.includes(t)?"bg-green-600 dark:bg-green-800":"bg-gradient-to-br from-green-400 to-green-600 dark:from-green-500 dark:to-green-800 shadow-md"),children:e.content})]},t+Math.random())}):Object(B.jsxs)("div",{className:"flex items-end space-x-2",children:[Object(B.jsx)(Q,{src:null===s||void 0===s||null===(r=s.participants.filter((function(t){return t.userName===e.senderUserName})).shift())||void 0===r?void 0:r.avatarUrl,size:"sm"}),Object(B.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(m.includes(t)||(null===s||void 0===s?void 0:s.type)===te.chatType.GROUP)&&Object(B.jsx)("span",{className:"transition-all animate-fade text-xs md:text-sm text-gray-400 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-left",children:null!==(n=e.senderFullName+" - "+ee()(new Date(e.dateCreated),"YYYYMMDD").calendar())&&void 0!==n?n:""}),e.imageUrl?Object(B.jsx)("img",{onClick:function(){return y(t)},className:"md:max-w-300 max-w-200 rounded-lg shadow cursor-pointer",src:e.imageUrl,alt:"Message"}):Object(B.jsx)("span",{className:" rounded-3xl md:px-5 md:py-3 px-3 py-2 break-word rounded-bl-none shadow-sm cursor-pointer overflow-x-auto max-w-3/4 text-sm md:text-base "+(m.includes(t)?"bg-gray-300 dark:bg-dark-third":"bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-500 dark:to-gray-600 "),onClick:function(){return y(t)},children:e.content})]})]},t+Math.random())})),Object(B.jsx)("div",{ref:A})]}),Object(B.jsx)(he,{chatId:s.id})]})]})};var ke=function(e){var t=e.isOpen,a=e.setIsOpen,n=Object(r.useState)(te.chatType.PRIVATE),s=Object(G.a)(n,2),c=s[0],o=s[1],l=Object(r.useState)(!1),d=Object(G.a)(l,2),u=d[0],m=d[1],b=Object(r.useState)(!1),f=Object(G.a)(b,2),j=f[0],p=f[1],x=Object(r.useState)(""),g=Object(G.a)(x,2),h=g[0],v=g[1],N=Object(r.useState)(""),y=Object(G.a)(N,2),w=y[0],k=y[1],C=Object(r.useState)([]),U=Object(G.a)(C,2),S=U[0],E=U[1],F=Object(r.useState)([]),M=Object(G.a)(F,2),I=M[0],A=M[1],L=Object(r.useRef)(),P=Object(r.useRef)(),T=Object(i.b)(),R=ge(),z=Ne();function Y(){return(Y=Object(J.a)($.a.mark((function e(){var t,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j&&(c===te.chatType.GROUP?(t={participantUserNames:I.map((function(e){return e.userName})),name:h},R.createGroupChat(t).then((function(e){e.id&&T(O(e.id)),A([]),v("")}))):c===te.chatType.PRIVATE&&(r={participantUserName:I.map((function(e){return e.userName})).shift()},R.createPrivateChat(r).then((function(e){e.id&&T(O(e.id)),A([]),v(""),a(!1)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=function(e){t&&L.current&&!L.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(r.useEffect)((function(){var e=function(e){u&&P.current&&!P.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[u]),Object(r.useEffect)((function(){return z.getFriendList().then((function(e){e&&E(e)})),function(){A([]),v("")}}),[]),Object(r.useEffect)((function(){if(c===te.chatType.GROUP){var e=(null===I||void 0===I?void 0:I.length)>=2&&(null===h||void 0===h?void 0:h.trim());p(e)}else c===te.chatType.PRIVATE&&p(0!==(null===I||void 0===I?void 0:I.length))}),[I,h,c]),t?Object(B.jsx)("div",{className:"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 py-10  z-30 bg-gray-500 bg-opacity-30 dark:bg-dark-primary dark:bg-opacity-50",children:Object(B.jsxs)("div",{ref:L,className:"px-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 max-h-full overflow-y-auto md:overflow-visible "+(u?"mb-16":""),children:[Object(B.jsxs)("div",{className:"flex pt-6 pb-5 justify-between h-full items-center",children:[Object(B.jsx)("h3",{className:"font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400",children:"New chat!"}),Object(B.jsxs)("div",{className:"relative flex rounded-lg items-center border border-green-500 cursor-pointer overflow-hidden",children:[Object(B.jsx)("div",{className:"absolute bg-gradient-to-br from-green-400 to-green-600 w-1/2 h-full rounded transition-all duration-200 z-0 "+(c===te.chatType.GROUP?"transform translate-x-full left-0":"left-0 ")}),Object(B.jsx)("span",{className:" px-3 py-2 z-10 text-xs md:text-sm select-none  "+(c===te.chatType.PRIVATE?"text-white":" text-green-600 dark:text-green-400"),onClick:function(){return o(te.chatType.PRIVATE)},children:"Private"}),Object(B.jsx)("span",{className:" px-3 py-2 z-10 text-xs md:text-sm select-none  "+(c===te.chatType.GROUP?"text-white":" text-green-600 dark:text-green-400"),onClick:function(){return o(te.chatType.GROUP)},children:"Group"})]})]}),Object(B.jsx)("div",{className:"space-y-2 md:space-y-4",children:c===te.chatType.GROUP?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{className:"space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"groupName",className:"font-semibold text-base md:text-lg dark:text-gray-200",children:["Group name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",{id:"groupName",value:h,onChange:function(e){return v(e.target.value)},type:"text",className:"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "})]}),Object(B.jsxs)("div",{ref:P,className:"space-y-2",children:[Object(B.jsx)("label",{htmlFor:"search",className:"font-semibold text-base md:text-lg dark:text-gray-200",children:"Find Friends"}),Object(B.jsxs)("div",{className:"relative",children:[Object(B.jsx)("input",{id:"search",type:"search",onFocus:function(){return m(!0)},value:w,autoComplete:"off",onChange:function(e){return k(e.target.value)},className:"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),u&&Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-dark-secondary dark:border-dark-hover border border-gray-300 border-opacity-50 rounded-lg w-full py-2 md:py-4 md:px-8 px-6 space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl",children:[Object(B.jsx)("h4",{className:"font-semibold mb-2 dark:text-gray-200",children:"Friend list"}),S.filter((function(e){var t,a;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase()))||(null===(a=e.userName)||void 0===a?void 0:a.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase())))&&!I.some((function(t){return t.userName===e.userName}))})).sort((function(e,t){return e.fullName.localeCompare(t.fullName)})).map((function(e,t){var a;return Object(B.jsxs)("div",{onClick:function(){var t=Object(H.a)(I);t.some((function(t){return t.userName===e.userName}))||(t.push(e),A(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate md:text-base text-sm",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t)}))]})})]})]}),Object(B.jsxs)("div",{className:"space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"search",className:"font-semibold text-base md:text-lg dark:text-gray-200",children:["Selected ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(B.jsx)("span",{className:"text-sm text-gray-400",children:"(At least 2 people. Click to remove)"})]}),Object(B.jsx)("div",{className:"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none",children:I.sort((function(e,t){return e.fullName.localeCompare(t.fullName)})).map((function(e,t){var a;return Object(B.jsxs)("div",{onClick:function(){var t=Object(H.a)(I),a=t.findIndex((function(t){return t.userName===e.userName}));a>=0&&(t.splice(a,1),A(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 dark:hover:bg-red-500 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate md:text-base text-sm",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t)}))})]})]}):Object(B.jsxs)("div",{ref:P,className:"space-y-2",children:[Object(B.jsx)("label",{htmlFor:"selectFriend",className:"font-semibold md:text-lg dark:text-gray-200",children:"Select Friends"}),Object(B.jsxs)("div",{className:"relative",children:[Object(B.jsx)("input",{id:"selectFriend",type:"search",onFocus:function(){return m(!0)},value:w,autoComplete:"off",onChange:function(e){return k(e.target.value)},className:"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),u&&Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-dark-secondary border border-gray-400 border-opacity-50 rounded-lg w-full space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl py-2 md:py-4 md:px-8 px-6",children:[Object(B.jsx)("h4",{className:"font-semibold mb-2 text-start dark:text-gray-200",children:"Friend list"}),S.sort((function(e,t){return e.fullName.localeCompare(t.fullName)})).filter((function(e){var t,a;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase()))||(null===(a=e.userName)||void 0===a?void 0:a.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase())))&&!I.some((function(t){return t.userName===e.userName}))})).map((function(e,t){var a;return Object(B.jsxs)("div",{onClick:function(){var t=[];t.push(e),m(!1),A(t)},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate text-sm md:text-base",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t)}))]})})]}),Object(B.jsxs)("div",{className:"space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"search",className:"font-semibold md:text-lg dark:text-gray-200",children:["Selected ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(B.jsx)("span",{className:"text-sm text-gray-400",children:"(Click to remove)"})]}),Object(B.jsx)("div",{className:"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none ",children:Object(H.a)(I).map((function(e,t){var a;return 0===t?Object(B.jsxs)("div",{onClick:function(){var t=Object(H.a)(I),a=t.findIndex((function(t){return t.userName===e.userName}));a>=0&&(t.splice(a,1),A(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 dark:hover:bg-red-500",children:[Object(B.jsx)(Q,{size:"xs",src:e.avatarUrl}),Object(B.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate md:text-base text-sm",children:null!==(a=e.fullName)&&void 0!==a?a:"Unknown"})]},Math.random()+t):Object(B.jsx)(B.Fragment,{})}))})]})]})}),Object(B.jsx)("div",{className:"flex justify-end py-6 space-x-4",children:Object(B.jsxs)("div",{className:"space-x-2 flex items-center",children:[Object(B.jsx)(V,{outline:!0,content:"Close",onClick:function(){return a(!1)}}),Object(B.jsx)(V,{disabled:!j,content:"Create",onClick:function(){return function(){return Y.apply(this,arguments)}()}})]})})]})}):""};var Ce=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.currentUser,s=Object(r.useState)(""),c=Object(G.a)(s,2),o=c[0],l=c[1],d=Object(r.useState)(""),u=Object(G.a)(d,2),m=u[0],b=u[1],f=Object(r.useState)({}),j=Object(G.a)(f,2),p=j[0],x=j[1],g=Ne(),h=Object(r.useRef)(),v=Object(i.b)();function O(){return(O=Object(J.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FormData).append("Avatar",p),t.append("FirstName",o),t.append("LastName",m),g.updateUser(t).then((function(e){v(L(e)),N("Success","Update info successfully!")})),a(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){v(U({isOpen:!0,title:e,content:t}))}return Object(r.useEffect)((function(){var e=function(e){t&&h.current&&!h.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(r.useEffect)((function(){n.firstName&&n.lastName&&(l(n.firstName),b(n.lastName))}),[n]),t?Object(B.jsx)("div",{className:"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 py-10  z-30 bg-gray-500 bg-opacity-30 dark:bg-dark-primary dark:bg-opacity-50",children:Object(B.jsxs)("div",{ref:h,className:"w-full md:w-5/6 lg:w-2/5 md:px-14 px-6 md:py-6 flex flex-col dark:bg-dark-secondary dark:border-dark-third bg-white rounded-xl shadow-xl border border-gray-300 transition-all duration-300",children:[Object(B.jsx)("h3",{className:"pt-6 pb-5 font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400",children:"User info!"}),Object(B.jsxs)("div",{className:"space-y-4",children:[Object(B.jsxs)("div",{className:"mb-3 flex flex-col md:grid md:grid-cols-2 md:place-items-start space-y-4 md:space-y-0",children:[Object(B.jsxs)("div",{className:"md:col-span-1 md:mr-2 space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"fistName",className:"md:text-lg font-semibold dark:text-dark-txt",children:["First Name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",{id:"firstName",value:o,onChange:function(e){return l(e.target.value)},type:"text",className:"bg-gray-100 dark:bg-dark-third rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})]}),Object(B.jsxs)("div",{className:"md:col-span-1 md:ml-2 space-y-2",children:[Object(B.jsxs)("label",{htmlFor:"lastName",className:"md:text-lg font-semibold dark:text-dark-txt",children:["Last Name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",{id:"lastName",value:m,onChange:function(e){return b(e.target.value)},type:"text",className:"bg-gray-100 dark:bg-dark-third rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})]}),Object(B.jsxs)("div",{className:"space-y-2 flex flex-col",children:[Object(B.jsx)("label",{htmlFor:"avatar",className:"md:text-lg font-semibold md:mt-4 dark:text-dark-txt",children:"Avatar"}),Object(B.jsx)("input",{id:"avatar",onChange:function(e){return x(e.target.files[0])},type:"file",className:"w-full",accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg"})]})]}),Object(B.jsxs)("div",{className:"flex justify-end space-x-2 items-center py-6",children:[Object(B.jsx)(V,{outline:!0,content:"Close",onClick:function(){return a(!1)}}),Object(B.jsx)(V,{content:"Save",onClick:function(){return function(){return O.apply(this,arguments)}()}})]})]})]})}):""};var Ue=function(){var e=Object(r.useState)(!1),t=Object(G.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){"dark"===window.localStorage.getItem("theme")&&(window.document.documentElement.classList.add("dark"),n(!0))}),[]),Object(r.useEffect)((function(){a?(window.document.documentElement.classList.add("dark"),window.localStorage.setItem("theme","dark")):(window.document.documentElement.classList.remove("dark"),window.localStorage.setItem("theme","light"))}),[a]),{darkMode:a,setDarkMode:n}};var Se=function(e){var t=e.logout,a=Object(i.c)((function(e){return e.users.currentUser})),n=Object(r.useState)(!1),s=Object(G.a)(n,2),c=s[0],o=s[1],l=Object(r.useState)(!1),d=Object(G.a)(l,2),u=d[0],m=d[1],b=Object(r.useState)({isOpen:!1,title:"",content:"",confirmButtonTitle:""}),f=Object(G.a)(b,2),j=f[0],p=f[1],x=Ue(),g=x.darkMode,h=x.setDarkMode,v=a.avatarUrl,O=Object(r.useState)(!1),N=Object(G.a)(O,2),y=N[0],w=N[1],k=Object(r.useRef)();return Object(r.useEffect)((function(){var e=function(e){y&&k.current&&!k.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[y]),Object(B.jsxs)(B.Fragment,{children:[j.isOpen&&Object(B.jsx)(ve,{isOpen:j.isOpen,closeAction:function(){return p({isOpen:!1})},title:"Are you sure?",content:j.content,confirmButtonTitle:j.confirmButtonTitle,confirmButtonAction:j.confirmButtonAction}),Object(B.jsx)(Ce,{currentUser:a,isOpen:u,setIsOpen:m}),Object(B.jsx)(ke,{isOpen:c,setIsOpen:o}),Object(B.jsxs)("div",{className:"pb-1 pt-4 flex justify-between items-center",children:[Object(B.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(B.jsx)("div",{className:"transition-all duration-200 ring ring-green-500 p-1 transform active:scale-95 rounded-full cursor-pointer",onClick:function(){return m((function(e){return!e}))},children:Object(B.jsx)(Q,{src:v,size:"md"})}),Object(B.jsx)("h1",{className:"font-bold text-3xl",children:"Chats"})]}),Object(B.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(B.jsx)(le,{iconClass:"bx bxs-edit",onClick:function(){return o(!0)},className:"dark:bg-dark-third bg-gray-100"}),Object(B.jsxs)("div",{className:"relative",ref:k,children:[Object(B.jsx)(le,{iconClass:"bx bx-dots-horizontal-rounded",onClick:function(){return w(!y)},className:"dark:bg-dark-third bg-gray-100"}),y&&Object(B.jsxs)("div",{className:"animate-fade transition-all duration-200 absolute right-0 md:left-0 border border-gray-200 bg-white w-52 rounded-lg shadow-md overflow-hidden p-2 dark:bg-dark-secondary dark:border-dark-third mt-2 select-none z-30",children:[Object(B.jsxs)("button",{className:"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-dark-third",onClick:function(){return h(!g)},children:[Object(B.jsx)("span",{className:"p-1 bg-gray-100 dark:bg-dark-hover rounded-full select-none",children:Object(B.jsx)("i",{className:"bx bx-moon text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7"})}),Object(B.jsx)("span",{children:"Dark Mode"})]}),Object(B.jsxs)("button",{className:"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-dark-third",onClick:function(){!function(e,t){p({isOpen:!0,title:arguments.length>3?arguments[3]:void 0,content:e,confirmButtonTitle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Yes",confirmButtonAction:t})}("Do you want to log out?",t)},children:[Object(B.jsx)("span",{className:"p-1 bg-gray-100 dark:bg-dark-hover rounded-full select-none",children:Object(B.jsx)("i",{className:"bx bx-log-in-circle text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7"})}),Object(B.jsx)("span",{children:"Log Out"})]})]})]})]})]})]})},Ee=a.p+"static/media/logo.2a8dee36.png";var Fe=function(){var e=Object(r.useState)(null),t=Object(G.a)(e,2),a=t[0],n=t[1],s=Object(D.g)(),c=Object(i.b)(),o=Object(i.c)((function(e){return e.chats.chats})),l=Object(i.c)((function(e){return e.users.currentUser})),d=Object(i.c)((function(e){return e.chats.selectedId})),u=ge(),m=Ne();return Object(r.useEffect)((function(){function e(){return(e=Object(J.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.getAll().then((function(e){c(p(e.data))})).catch((function(e){console.error("Connection failed: ",e)})),m.getCurrentUser().then((function(e){c(L(e))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){var e=(new W.a).withUrl("https://teechatapi.azurewebsites.net/hubs/chats",{accessTokenFactory:function(){return localStorage.getItem("token")}}).withAutomaticReconnect().build();n(e)}),[]),Object(r.useEffect)((function(){return a&&!a.connectionStarted&&a.start().then((function(e){a.on("ReceiveMessage",(function(e){var t=x(e);c(t)})),a.on("ReceiveChat",(function(e){var t=f(e);c(t),e.creatorUserName===l.userName&&c(O(e.id))})),a.on("ReceiveUpdatedChat",(function(e){var t=j(e);c(t)})),a.on("ReceiveUpdatedGroupAvatar",(function(e){var t=h(e);c(t)}))})),function(){a&&a.connectionStarted&&a.stop()}}),[a]),Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"dark:bg-dark-primary dark:text-white  animate-fade grid grid-cols-12 h-screen w-screen overflow-hidden",children:[Object(B.jsxs)("div",{className:"animate-fade lg:col-span-3 md:col-span-4 col-span-12 md:flex flex-col h-screen border-r px-4 dark:border-dark-third border-gray-300 pt-1"+(0!==d?" hidden":"flex"),children:[Object(B.jsx)(Se,{logout:function(){window.localStorage.removeItem("token"),a.stop(),s.push("/login")}}),Object(B.jsx)(ae,{})]}),d?Object(B.jsx)("div",{className:"dark:bg-dark-primary md:dark:bg-black animate-fade lg:col-span-9 md:col-span-8 col-span-12 flex h-screen w-full overflow-y-auto",children:Object(B.jsx)(we,{chat:o.find((function(e){return e.id===d}))})}):0===(null===o||void 0===o?void 0:o.length)?Object(B.jsxs)("div",{className:"dark:bg-black animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex flex-col h-full w-full ",children:[Object(B.jsx)("img",{src:Ee,className:"w-32 h-32 mb-3",alt:"logo"}),Object(B.jsxs)("span",{className:"text-center",children:[" ","Welcome to"," ",Object(B.jsx)("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"TeeChat!"})," ",Object(B.jsx)("br",{}),"You do not have any chats, please start a chat!"," "]}),Object(B.jsx)("span",{})]}):Object(B.jsxs)("div",{className:"dark:bg-black animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex flex-col h-full w-full ",children:[Object(B.jsx)("img",{src:Ee,className:"w-32 h-32 mb-3",alt:"logo"}),Object(B.jsxs)("span",{className:"text-center",children:[" ","Welcome to"," ",Object(B.jsx)("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"TeeChat!"})," ",Object(B.jsx)("br",{}),"Select a chat to start."," "]})]})]})})},Me=a.p+"static/media/forbid.7d678d5c.jpg";var Ie=function(e){var t=e.message;return Object(B.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(B.jsx)("img",{className:"md:w-1/3 object-cover",src:Me,alt:"Error"}),Object(B.jsx)("span",{className:"font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"You don't have permission to access this resources"}),Object(B.jsx)(Y.b,{to:"/chats",children:Object(B.jsx)(V,{content:"Return home page"})})]})},Ae=a.p+"static/media/login-page.dc5637a7.jpg";var Le=function(){var e=Object(r.useState)(""),t=Object(G.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),c=Object(G.a)(s,2),o=c[0],l=c[1],d=Object(r.useState)(""),u=Object(G.a)(d,2),m=u[0],b=u[1],f=Object(r.useState)(!1),j=Object(G.a)(f,2),p=j[0],x=j[1],g=Object(D.g)(),h=Object(i.b)(),v=Ne();return Object(r.useEffect)((function(){x(!(!a||!m))}),[a,m]),Object(B.jsxs)("div",{className:"h-screen grid md:grid-cols-7 place-items-center px-6",children:[Object(B.jsx)("img",{src:Ae,alt:"login",className:"md:block hidden col-span-3 w-full ml-44"}),Object(B.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={username:a,password:m};l(""),v.login(t).then((function(e){h(A()),window.localStorage.setItem("token",e),g.push("/chats")})).catch((function(e){l("string"===typeof e?e:"Username or password is incorrect")}))}(e)},className:"container rounded-2xl flex flex-col py-10 md:w-auto md:col-span-4",children:[Object(B.jsx)("img",{src:Ee,alt:"login",className:"h-20 w-20 mx-auto mb-3"}),Object(B.jsx)("h1",{className:"text-3xl font-bold text-primary text-green-600 text-center mb-8",children:"Login to TeeChat!"}),o&&Object(B.jsx)("span",{className:"bg-red-500 rounded-md text-white text-lg mb-2 py-2 text-center",children:null!==o&&void 0!==o?o:"Username or password is incorrect"}),Object(B.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(B.jsx)("label",{htmlFor:"username",className:"text-lg font-semibold px-1",children:"Username or email address"}),Object(B.jsx)("input",{value:a,onChange:function(e){return n(e.target.value)},id:"username",type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})]}),Object(B.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(B.jsx)("label",{htmlFor:"password",className:"text-lg font-semibold px-1",children:"Password"}),Object(B.jsx)("input",{value:m,onChange:function(e){return b(e.target.value)},type:"password",id:"password",className:"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})]}),Object(B.jsx)(V,{disabled:!p,content:"Login",className:"mb-4 mt-2 font-bold"}),Object(B.jsxs)("div",{className:"text-center",children:["Not a member?"," ",Object(B.jsx)(Y.b,{to:"/register",className:"text-green-500 font-bold",children:"Sign up now"})]})]})]})},Pe=a.p+"static/media/not-found.500f302c.jpg";var Te=function(e){var t=e.message;return Object(B.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(B.jsx)("img",{className:"md:w-1/3 object-cover",src:Pe,alt:"Error"}),Object(B.jsx)("span",{className:" font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"Not found resources"}),Object(B.jsx)(Y.b,{to:"/chats",children:Object(B.jsx)(V,{content:"Return home page"})})]})},Re=a(106),ze=a(24),Ye=a(31);var De=function(){var e,t,a,n,s,c,i=Object(r.useState)(!1),o=Object(G.a)(i,2),l=o[0],d=o[1],u=Object(r.useState)(!0),m=Object(G.a)(u,2),b=m[0],f=m[1],j=Object(r.useState)({isOpen:!1,content:"",title:"Notification"}),p=Object(G.a)(j,2),x=p[0],g=p[1],h=Object(D.g)(),v=Ne(),O=Ye.a().shape({firstName:Ye.b().required("First Name is required"),lastName:Ye.b().required("Last Name is required"),userName:Ye.b().required("User Name is required").min(6,"Username must be 6-20 characters").max(20,"Username must be 6-20 characters").test("checkUsername","Username does not contain special characters",(function(e){return Ge(e,"^(?=[a-zA-Z0-9._])(?!.*[_.]{2})[^_.].*[^_.]$")})).test("existsUsername","Username is already taken",(function(e){return!b})),email:Ye.b().required("Email is required").test("checkEmail","Email is invalid",(function(e){return Ge(e,/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/)})),password:Ye.b().required("Password is required").test("checkPassword","Passwords must be at least 8 characters, one digit, one uppercase, one non alphanumeric character",(function(e){return Ge(e,"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,}$")})),confirmPassword:Ye.b().required("Confirm Password is required").test("ConfirmPasswordMatch","Password and Confirmation Password must match",(function(e){return e===F.password}))}),N=Object(ze.d)({resolver:Object(Re.a)(O),defaultValues:{}}),y=N.register,w=N.handleSubmit,k=N.control,C=N.setError,U=N.clearErrors,S=N.reset,E=N.formState.errors,F=Object(ze.e)({control:k});return Object(r.useEffect)((function(){v.checkUserNameExists(F.userName).then((function(e){e.isExists?(C("userName",{type:"required",message:"Username '".concat(F.userName,"' is already taken")},{shouldFocus:!0}),f(!0)):(U("userName"),f(!1))}))}),[F.userName]),Object(r.useEffect)((function(){!function(){var e,t,a;(null===(e=F.firstName)||void 0===e?void 0:e.trim())&&(null===(t=F.lastName)||void 0===t?void 0:t.trim())&&(null===(a=F.userName)||void 0===a?void 0:a.trim())&&F.email&&F.password&&F.confirmPassword?d(!0):d(!1)}()}),[F]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(_,{title:x.title,isOpen:x.isOpen,content:x.content,onClick:function(){g({isOpen:!1}),h.push("/login")}}),Object(B.jsxs)("div",{className:"z-10 h-screen grid md:grid-cols-7 place-items-center px-6",children:[Object(B.jsx)("img",{src:Ae,alt:"login",className:"md:block hidden col-span-3 w-full ml-44"}),Object(B.jsxs)("form",{onSubmit:w((function(e){v.register(e).then((function(e){!function(e,t){g({isOpen:!0,title:e,content:t})}("Success",Object(B.jsxs)("span",{children:['"Create account successfully! Please'," ",Object(B.jsx)(Y.b,{className:"font-bold text-green-600",to:"/login",children:"log in"}),'!"']})),S({})}))})),className:"container rounded-2xl flex flex-col py-10 md:w-full md:col-span-4 md:px-20 lg:px-48",children:[Object(B.jsx)("img",{src:Ee,alt:"login",className:"h-20 w-20 mx-auto mb-3"}),Object(B.jsx)("h1",{className:"text-3xl font-bold text-primary text-green-600 text-center mb-8",children:"Sign up to TeeChat!"}),Object(B.jsxs)("div",{className:"mb-3 grid grid-cols-2 place-items-start ",children:[Object(B.jsxs)("div",{className:"col-span-1 space-y-2 mr-2 w-full",children:[Object(B.jsxs)("label",{htmlFor:"fistName",className:"text-lg font-semibold ",children:["First Name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({},y("firstName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(e=E.firstName)||void 0===e?void 0:e.message})]}),Object(B.jsxs)("div",{className:"col-span-1 space-y-2 ml-2 w-full",children:[Object(B.jsxs)("label",{htmlFor:"lastName",className:"text-lg font-semibold ",children:["Last Name ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({},y("lastName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(t=E.lastName)||void 0===t?void 0:t.message})]})]}),Object(B.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(B.jsxs)("label",{htmlFor:"userName",className:"text-lg font-semibold ",children:["Username ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({},y("userName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(a=E.userName)||void 0===a?void 0:a.message})]}),Object(B.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(B.jsxs)("label",{htmlFor:"email",className:"text-lg font-semibold ",children:["Email ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({},y("email")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(n=E.email)||void 0===n?void 0:n.message})]}),Object(B.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(B.jsxs)("label",{htmlFor:"password",className:"text-lg font-semibold ",children:["Password ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({type:"password"},y("password")),{},{className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(s=E.password)||void 0===s?void 0:s.message})]}),Object(B.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(B.jsxs)("label",{htmlFor:"confirmPassword",className:"text-lg font-semibold ",children:["Confirm Password ",Object(B.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(B.jsx)("input",Object(R.a)(Object(R.a)({type:"password"},y("confirmPassword")),{},{className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(B.jsx)("div",{className:"text-red-500 text-sm",children:null===(c=E.confirmPassword)||void 0===c?void 0:c.message})]}),Object(B.jsx)(V,{disabled:!l,content:"Sign Up",className:"mb-4 mt-2 font-bold"}),Object(B.jsxs)("div",{className:"text-center",children:["Already a member?"," ",Object(B.jsx)(Y.b,{to:"/login",className:"text-green-500 font-bold",children:"Sign in"})]})]})]})]})};function Ge(e,t){if(e&&t)return new RegExp(t).test(e)}var Be=a.p+"static/media/error.c72c9a3e.jpg";var qe=function(e){var t=e.message;return Object(B.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(B.jsx)("img",{className:"md:w-1/3 object-cover",src:Be,alt:"Error"}),Object(B.jsx)("span",{className:"font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"Oops! Something went wrong!"}),Object(B.jsx)(Y.b,{to:"/chats",children:Object(B.jsx)(V,{content:"Return home page"})})]})},Ve=["component"];var _e=function(){var e=Object(i.c)((function(e){return e.app.isLoading})),t=Object(i.c)((function(e){return e.app.popup})),a=Object(i.b)();return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(Y.a,{basename:"/TeeChat",children:[Object(B.jsx)(q,{isOpen:e,className:"z-50"}),Object(B.jsx)(_,{title:t.title,isOpen:t.isOpen,content:t.content,onClick:function(){a(U({isOpen:!1}))}}),Object(B.jsxs)(D.d,{children:[Object(B.jsx)(D.b,{path:"/login",component:Le}),Object(B.jsx)(D.b,{path:"/register",component:De}),Object(B.jsx)(D.b,{path:"/forbid",component:Ie}),Object(B.jsx)(D.b,{path:"/ServerError",component:qe}),Object(B.jsx)(Ze,{path:"/chats",component:Fe}),Object(B.jsx)(Ze,{exact:!0,path:"/",component:Fe}),Object(B.jsx)(D.b,{path:"*",component:Te})]})]})})};function Ze(e){var t=e.component,a=Object(z.a)(e,Ve),r=!!window.localStorage.getItem("token");return Object(B.jsx)(D.b,Object(R.a)(Object(R.a)({},a),{},{render:function(e){return!0===r?Object(B.jsx)(t,Object(R.a)({},e)):Object(B.jsx)(D.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}a(251);c.a.render(Object(B.jsx)(n.a.StrictMode,{children:Object(B.jsx)(i.a,{store:T,children:Object(B.jsx)(_e,{})})}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.3967efd2.chunk.js.map