{"version":3,"sources":["components/Button/index.jsx","assets/img/login-page.jpg","api/Api.js","api/userApi.js","app/userSlice.js","app/appSlice.js","pages/Login/index.jsx","app/chatSlice.js","app/store.js","components/Loader/index.jsx","components/Popup/index.jsx","api/chatApi.js","assets/img/default-avatar.jpg","components/ImageCircle/index.jsx","utils/constants.js","components/ChatList/index.jsx","assets/icons/info-icon.svg","assets/icons/left-arrow-icon.svg","assets/icons/emoji.svg","assets/icons/image-icon.svg","assets/icons/send-icon.svg","components/ClickableIcon/index.jsx","components/ChatInput/index.jsx","components/ConfirmModal/index.jsx","components/EditChat/index.jsx","components/ChatWindow/index.jsx","hooks/useMessagePagination.js","assets/icons/dark-mode-icon.svg","assets/icons/menu-icon.svg","assets/icons/new-chat-icon.svg","assets/icons/sign-out-icon.svg","components/CreateChat/index.jsx","components/UserInfo/index.jsx","hooks/useDarkMode.js","components/Header/index.jsx","pages/Chat/index.jsx","assets/img/forbid.jpg","pages/Forbid/index.jsx","assets/img/not-found.jpg","pages/NotFound/index.jsx","pages/Register/index.jsx","assets/img/error.jpg","pages/ServerError/index.jsx","App.js","index.js"],"names":["Button","outline","content","className","onClick","onBlur","disabled","Api","axios","create","baseURL","process","timeout","headers","paramsSerializer","params","queryString","stringify","interceptors","request","use","config","a","token","window","localStorage","getItem","newConfig","Authorization","response","data","error","status","location","href","Promise","reject","baseApiUrl","userApi","isLogin","jwt","exp","Date","now","clear","login","url","post","register","checkUserNameExists","userName","get","getFriendList","getCurrentUser","updateUser","put","currentUser","createSlice","name","initialState","reducers","state","action","user","decodeCurrentUser","payload","reducer","combineReducers","actions","isLoading","setIsLoading","popup","isOpen","title","setPopup","Login","useState","username","setUsername","setError","password","setPassword","isDirty","setIsDirty","history","useHistory","dispatch","useDispatch","useEffect","src","LoginPageImage","alt","onSubmit","e","preventDefault","then","setItem","push","catch","htmlFor","value","onChange","target","id","type","to","chats","addChat","editChat","updatedChat","index","findIndex","chat","participants","editGroupAvatar","updatedChatId","chatId","groupAvatarUrl","appendMessageToChat","chatToAppend","messagesToAppend","messages","totalRecords","limit","page","pageCount","keyword","concat","refreshChats","addMessage","newMessage","message","selectedId","setSelectedId","rootReducer","app","appReducer","users","userReducer","store","configureStore","Loader","circleCommonClasses","isEnding","setIsEnding","Popup","chatApi","getAll","getById","sendMessage","sendImage","updateGroupAvatar","patch","createGroupChat","updateGroupChat","createPrivateChat","ImageCircle","realSize","DefaultAvatar","size","constants","chatType","PRIVATE","GROUP","NO_NAME_GROUP","ChatList","useSelector","setKeyword","placeholder","getCurrentChats","map","currentUserName","some","x","friend","length","filter","shift","lastMessage","reduce","b","dateCreated","handleClick","avatarUrl","fullName","moment","fromNow","result","sort","chatA","chatB","lastMessageA","lastMessageB","sortChat","toLowerCase","includes","searchChat","ClickableIcon","icon","ChatInput","setContent","chosenEmoji","setChosenEmoji","isOpenEmoji","setIsOpenEmoji","ref","useRef","file","files","formData","FormData","append","checkIfClickedOutside","current","contains","document","addEventListener","removeEventListener","onSendMessage","hidden","accept","ImageIcon","position","EmojiIcon","onEmojiClick","event","emojiObject","emoji","disableAutoFocus","SendIconNormal","ConfirmModal","closeAction","confirmButtonTitle","confirmButtonAction","EditChat","setIsOpen","isOpenModal","setIsOpenModal","modalContent","setModalContent","groupName","setGroupName","friendList","setFriendList","isOpenFriendList","setIsOpenFriendList","selectedFriendList","setSelectedFriendList","friendListRef","currentParticipantUserNames","selectedParticipantUserNames","participantFullNamesToAdd","participantFullNamesToRemove","participantUserNamesToRemove","forEach","openModal","submitEditChat","participantUserNamesToAdd","newGroupName","openPopup","closeModal","onFocus","autoComplete","selected","Math","random","i","splice","creatorUserName","format","handleEditChat","ChatWindow","showTimeIndexes","setShowTimeIndexes","isOpenInfoPopup","setIsOpenInfoPopup","handleMessageClick","setPage","currentChat","loading","setLoading","appendChat","setAppendChat","hasMore","setHasMore","useMessagePagination","endMessageRef","scrollIntoView","LeftArrowIcon","InfoIcon","prevPage","messageA","messageB","senderUserName","calendar","imageUrl","senderFullName","CreateChat","selectedMode","setSelectedMode","isValidButton","setIsValidButton","participantUserNames","participantUserName","handleCreateGroup","UserInfo","firstName","setFirstName","lastName","setLastName","avatar","setAvatar","submit","useDarkMode","darkMode","setDarkMode","documentElement","classList","add","remove","Header","logout","isOpenCreateChat","setIsOpenCreateChat","isOpenUserInfo","setIsOpenUserInfo","confirmModal","setConfirmModal","userAvatar","isOpenMenu","setIsOpenMenu","NewChatIcon","MenuIcon","DarkModeIcon","openConfirmModal","SignOutIcon","Chat","connection","setConnection","refreshChatAction","fetchData","newConnection","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","build","connectionStarted","start","on","console","stop","removeItem","find","Forbid","ForbidImg","NotFound","NotFoundImg","Register","isChanged","setIsChanged","isExistsUserName","setIsExistsUserName","schema","yup","shape","required","min","max","test","checkRegex","email","confirmPassword","watch","useForm","resolver","yupResolver","defaultValues","handleSubmit","control","clearErrors","reset","errors","formState","useWatch","isExists","shouldFocus","regex","RegExp","ServerError","ErrorImg","App","basename","exact","from","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a50602f4.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nButton.propTypes = {\r\n  content: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nfunction Button({\r\n  outline = false,\r\n  content,\r\n  className,\r\n  onClick,\r\n  onBlur,\r\n  disabled,\r\n}) {\r\n  return (\r\n    <>\r\n      <button\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        onBlur={onBlur}\r\n        className={\r\n          \"px-4 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 outline-none z-0 select-none \" +\r\n          \" \" +\r\n          (outline\r\n            ? \"border border-green-500 bg-white dark:bg-transparent dark:hover:bg-green-500 text-green-500 hover:text-white hover:bg-green-400 active:bg-green-500\"\r\n            : \"bg-gradient-to-br from-green-400 to-green-600 text-white active:from-green-500 active:to-green-600  \") +\r\n          \" \" +\r\n          (className ?? \"\") +\r\n          \" \" +\r\n          (!disabled ? \"active:scale-95 active:transform\" : \"cursor-default\")\r\n        }\r\n      >\r\n        {content}\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","export default __webpack_public_path__ + \"static/media/login-page.dc5637a7.jpg\";","import axios from \"axios\";\r\nimport queryString from \"query-string\";\r\n\r\nconst Api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  timeout: 300000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n  paramsSerializer: (params) => queryString.stringify(params),\r\n});\r\n\r\nApi.interceptors.request.use(async (config) => {\r\n  var token = window.localStorage.getItem(\"token\");\r\n\r\n  var newConfig = config;\r\n  if (token) {\r\n    newConfig = {\r\n      ...config,\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    };\r\n  }\r\n  return newConfig;\r\n});\r\nApi.interceptors.response.use(\r\n  (response) => {\r\n    if (response && response.data) {\r\n      return response.data;\r\n    }\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (error.response) {\r\n      switch (error.response.status) {\r\n        case 401:\r\n          window.location.href = \"/login\";\r\n          break;\r\n        case 403:\r\n          window.location.href = \"/ForBid\";\r\n          break;\r\n        case 500:\r\n          window.location.href = \"/ServerError\";\r\n          break;\r\n        default:\r\n          return Promise.reject(error.response?.data);\r\n      }\r\n    }\r\n    return Promise.reject(error?.response?.data);\r\n  },\r\n);\r\n\r\nexport default Api;\r\n","import jwt from \"jwt-decode\";\r\nimport Api from \"./Api.js\";\r\n\r\nconst baseApiUrl = \"/users\";\r\n\r\nconst userApi = {\r\n  isLogin: () => {\r\n    var token = window.localStorage.getItem(\"token\");\r\n    if (token && typeof token !== \"undefined\") {\r\n      if (jwt(token).exp < Date.now() / 1000) {\r\n        localStorage.clear();\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  },\r\n  login: (content) => {\r\n    const url = `${baseApiUrl}/login`;\r\n    return Api.post(url, content);\r\n  },\r\n  register: (content) => {\r\n    const url = `${baseApiUrl}/register`;\r\n    return Api.post(url, content);\r\n  },\r\n  checkUserNameExists: (userName) => {\r\n    if (userName) {\r\n      const url = `${baseApiUrl}/${userName}/isExists`;\r\n      return Api.get(url);\r\n    }\r\n    return Promise.reject();\r\n  },\r\n  getFriendList: () => {\r\n    const url = `${baseApiUrl}`;\r\n    return Api.get(url);\r\n  },\r\n  getCurrentUser: () => {\r\n    const url = `${baseApiUrl}/current`;\r\n    return Api.get(url);\r\n  },\r\n  updateUser: (content) => {\r\n    const url = `${baseApiUrl}`;\r\n    Api.interceptors.request.use(async (config) => {\r\n      var token = window.localStorage.getItem(\"token\");\r\n      var newConfig = {};\r\n      if (token) {\r\n        newConfig = {\r\n          ...config,\r\n          headers: {\r\n            \"content-type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        };\r\n      }\r\n      return newConfig;\r\n    });\r\n    return Api.put(url, content);\r\n  },\r\n};\r\n\r\nexport default userApi;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\nimport jwt from \"jwt-decode\";\r\n\r\nconst currentUser = createSlice({\r\n  name: \"currentUser\",\r\n  initialState: {},\r\n  reducers: {\r\n    getCurrentUser: (state, action) => {\r\n      var user = decodeCurrentUser();\r\n      if (user) {\r\n        state = user;\r\n        return state;\r\n      }\r\n    },\r\n    updateUser: (state, action) => {\r\n      if (action.payload.userName) {\r\n        state = action.payload;\r\n        return state;\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  currentUser: currentUser.reducer,\r\n});\r\n\r\nexport const { getCurrentUser, updateUser } = currentUser.actions;\r\nexport default reducer;\r\n\r\nfunction decodeCurrentUser() {\r\n  var token = window.localStorage.getItem(\"token\");\r\n  if (token) {\r\n    const user = jwt(token);\r\n    return user;\r\n  }\r\n  return false;\r\n}\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst isLoading = createSlice({\r\n  name: \"isLoading\",\r\n  initialState: false,\r\n  reducers: {\r\n    setIsLoading: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst popup = createSlice({\r\n  name: \"popup\",\r\n  initialState: {\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  },\r\n  reducers: {\r\n    setPopup: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  isLoading: isLoading.reducer,\r\n  popup: popup.reducer,\r\n});\r\n\r\nexport const { setIsLoading } = isLoading.actions;\r\nexport const { setPopup } = popup.actions;\r\nexport default reducer;\r\n","import Button from \"components/Button\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport LoginPageImage from \"assets/img/login-page.jpg\";\r\nimport userApi from \"api/userApi\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getCurrentUser } from \"app/userSlice\";\r\nimport { setIsLoading } from \"app/appSlice\";\r\n\r\nfunction Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isDirty, setIsDirty] = useState(false);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (username && password) {\r\n      setIsDirty(true);\r\n    } else {\r\n      setIsDirty(false);\r\n    }\r\n  }, [username, password]);\r\n  function login(e) {\r\n    e.preventDefault();\r\n\r\n    dispatch(setIsLoading(true));\r\n\r\n    const request = { username, password };\r\n    setError(\"\");\r\n\r\n    userApi\r\n      .login(request)\r\n      .then((response) => {\r\n        dispatch(getCurrentUser());\r\n        window.localStorage.setItem(\"token\", response);\r\n        history.push(\"/\");\r\n        dispatch(setIsLoading(false));\r\n      })\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\"\r\n            ? error\r\n            : \"Username or password is incorrect\";\r\n        setError(message);\r\n        dispatch(setIsLoading(false));\r\n      });\r\n  }\r\n  return (\r\n    <div className=\"h-screen grid md:grid-cols-7 place-items-center px-6\">\r\n      <img\r\n        src={LoginPageImage}\r\n        alt=\"login\"\r\n        className=\"md:block hidden col-span-3 w-full ml-44\"\r\n      />\r\n      <form\r\n        onSubmit={(e) => login(e)}\r\n        className=\"container rounded-2xl flex flex-col py-10 md:w-auto md:col-span-4\"\r\n      >\r\n        <h1 className=\"text-3xl font-bold text-primary text-green-600 text-center mb-8\">\r\n          Login to TeeChat\r\n        </h1>\r\n        {error && (\r\n          <span className=\"bg-red-500 rounded-md text-white text-lg mb-2 py-2 text-center\">\r\n            {error ?? \"Username or password is incorrect\"}\r\n          </span>\r\n        )}\r\n        <div className=\"space-y-2 mb-3\">\r\n          <label htmlFor=\"username\" className=\"text-lg font-semibold px-1\">\r\n            Username or email address\r\n          </label>\r\n          <input\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            id=\"username\"\r\n            type=\"text\"\r\n            className=\"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2 mb-2\">\r\n          <label htmlFor=\"password\" className=\"text-lg font-semibold px-1\">\r\n            Password\r\n          </label>\r\n          <input\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            type=\"password\"\r\n            id=\"password\"\r\n            className=\"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200\"\r\n          />\r\n        </div>\r\n\r\n        <Button\r\n          disabled={!isDirty}\r\n          content=\"Login\"\r\n          className=\"mb-4 mt-2 font-bold\"\r\n        />\r\n        <div className=\"text-center\">\r\n          Not a member?{\" \"}\r\n          <Link to=\"/register\" className=\"text-green-500 font-bold\">\r\n            Sign up now\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst chats = createSlice({\r\n  name: \"chats\",\r\n  initialState: [],\r\n  reducers: {\r\n    addChat: (state, action) => {\r\n      state.push(action.payload);\r\n    },\r\n    editChat: (state, action) => {\r\n      const updatedChat = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChat.id;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].name = updatedChat.name;\r\n        state[index].participants = updatedChat.participants;\r\n      }\r\n    },\r\n    editGroupAvatar: (state, action) => {\r\n      const updatedChatId = action.payload.chatId;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].groupAvatarUrl = action.payload.groupAvatarUrl;\r\n      }\r\n    },\r\n    appendMessageToChat: (state, action) => {\r\n      const chatToAppend = action.payload;\r\n      const messagesToAppend = chatToAppend?.messages;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatToAppend.id;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].totalRecords = chatToAppend.totalRecords;\r\n        state[index].limit = chatToAppend.limit;\r\n        state[index].page = chatToAppend.page;\r\n        state[index].pageCount = chatToAppend.pageCount;\r\n        if (chatToAppend.keyword) {\r\n          state[index].messages = messagesToAppend;\r\n        } else {\r\n          state[index].messages =\r\n            state[index].messages.concat(messagesToAppend);\r\n        }\r\n      }\r\n    },\r\n    refreshChats: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n    addMessage: (state, action) => {\r\n      const newMessage = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === newMessage.chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].messages.push(newMessage?.message);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst selectedId = createSlice({\r\n  name: \"selectedId\",\r\n  initialState: 0,\r\n  reducers: {\r\n    setSelectedId: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  chats: chats.reducer,\r\n  selectedId: selectedId.reducer,\r\n});\r\n\r\nexport const {\r\n  addChat,\r\n  editChat,\r\n  refreshChats,\r\n  addMessage,\r\n  appendMessageToChat,\r\n  editGroupAvatar,\r\n} = chats.actions;\r\nexport const { setSelectedId } = selectedId.actions;\r\nexport default reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport chatReducer from \"app/chatSlice\";\r\nimport appReducer from \"app/appSlice\";\r\nimport userReducer from \"app/userSlice\";\r\n\r\nconst rootReducer = {\r\n  chats: chatReducer,\r\n  app: appReducer,\r\n  users: userReducer,\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport default store;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nconst Loader = ({ className, isOpen = true }) => {\r\n  let circleCommonClasses =\r\n    \"h-3 w-3 bg-gradient-to-br from-green-300 to-green-600 shadow-md rounded-full\";\r\n  const [isEnding, setIsEnding] = useState(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsEnding(true);\r\n    };\r\n  }, []);\r\n  return (\r\n    isOpen && (\r\n      <div\r\n        className={\r\n          \"z-50  animate-fade flex h-screen w-screen justify-center items-center fixed transition-all duration-200 bg-white dark:bg-gray-800\" +\r\n          (isEnding ? \" hidden\" : \"\") +\r\n          (\" \" + className ?? \"\")\r\n        }\r\n      >\r\n        <div className={`${circleCommonClasses} mr-3 animate-bounce`}></div>\r\n        <div className={`${circleCommonClasses} mr-3 animate-bounce200`}></div>\r\n        <div className={`${circleCommonClasses} animate-bounce400`}></div>\r\n      </div>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nPopup.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nfunction Popup({\r\n  title = \"Notification\",\r\n  isOpen,\r\n  content = \"Oops! Something went wrong!\",\r\n  onClick,\r\n}) {\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-50 z-50\">\r\n        <div className=\"bg-white dark:bg-gray-800 py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-gray-200\">\r\n            {title}\r\n          </h3>\r\n          <span className=\"break-words dark:text-gray-200\">{content}</span>\r\n          <div className=\"w-full flex justify-end\">\r\n            <Button content=\"Close\" onClick={onClick} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default Popup;\r\n","import Api from \"./Api.js\";\r\n\r\nconst baseApiUrl = \"/chats\";\r\n\r\nconst chatApi = {\r\n  getAll: () => {\r\n    const url = `${baseApiUrl}`;\r\n    return Api.get(url);\r\n  },\r\n  getById: (chatId, params) => {\r\n    const url = `${baseApiUrl}/${chatId}`;\r\n    return Api.get(url, { params });\r\n  },\r\n  sendMessage: (chatId, content) => {\r\n    const url = `${baseApiUrl}/${chatId}/send`;\r\n    return Api.post(url, content);\r\n  },\r\n  sendImage: (chatId, content) => {\r\n    const url = `${baseApiUrl}/${chatId}/sendImage`;\r\n\r\n    Api.interceptors.request.use(async (config) => {\r\n      var token = window.localStorage.getItem(\"token\");\r\n      var newConfig = {};\r\n      if (token) {\r\n        newConfig = {\r\n          ...config,\r\n          headers: {\r\n            \"content-type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        };\r\n      }\r\n      return newConfig;\r\n    });\r\n    return Api.post(url, content);\r\n  },\r\n  updateGroupAvatar: (chatId, content) => {\r\n    const url = `${baseApiUrl}/${chatId}/avatar`;\r\n\r\n    Api.interceptors.request.use(async (config) => {\r\n      var token = window.localStorage.getItem(\"token\");\r\n      var newConfig = {};\r\n      if (token) {\r\n        newConfig = {\r\n          ...config,\r\n          headers: {\r\n            \"content-type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        };\r\n      }\r\n      return newConfig;\r\n    });\r\n    return Api.patch(url, content);\r\n  },\r\n  createGroupChat: (content) => {\r\n    const url = `${baseApiUrl}/group`;\r\n    return Api.post(url, content);\r\n  },\r\n  updateGroupChat: (chatId, content) => {\r\n    const url = `${baseApiUrl}/${chatId}`;\r\n    return Api.patch(url, content);\r\n  },\r\n  createPrivateChat: (content) => {\r\n    const url = `${baseApiUrl}/private`;\r\n    return Api.post(url, content);\r\n  },\r\n};\r\n\r\nexport default chatApi;\r\n","export default __webpack_public_path__ + \"static/media/default-avatar.ae67bd1e.jpg\";","import DefaultAvatar from \"assets/img/default-avatar.jpg\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nImageCircle.propTypes = {\r\n  src: PropTypes.string,\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  size: PropTypes.string,\r\n};\r\n\r\nfunction ImageCircle({\r\n  src = DefaultAvatar,\r\n  className = \"\",\r\n  alt = \"Avatar\",\r\n  size = \"md\",\r\n}) {\r\n  const xsSize = \"h-6 w-6\";\r\n  const smSize = \"h-8 w-8\";\r\n  const mdSize = \"h-12 w-12\";\r\n  const lgSize = \"h-16 w-16\";\r\n  const xlSize = \"h-24 w-24\";\r\n  const fullSize = \"h-full w-full\";\r\n  var realSize;\r\n  switch (size) {\r\n    case \"xs\":\r\n      realSize = xsSize;\r\n      break;\r\n    case \"sm\":\r\n      realSize = smSize;\r\n      break;\r\n    case \"lg\":\r\n      realSize = lgSize;\r\n      break;\r\n    case \"xl\":\r\n      realSize = xlSize;\r\n      break;\r\n    case \"full\":\r\n      realSize = fullSize;\r\n      break;\r\n    default:\r\n      realSize = mdSize;\r\n  }\r\n  return (\r\n    <>\r\n      <img\r\n        className={\r\n          realSize +\r\n            \" \" +\r\n            \"select-none  rounded-full object-cover \" +\r\n            \" \" +\r\n            className ?? \"\"\r\n        }\r\n        src={!src || src === \"\" ? DefaultAvatar : src}\r\n        alt={alt}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImageCircle;\r\n","const constants = {\r\n  chatType: {\r\n    PRIVATE: 1,\r\n    GROUP: 2,\r\n  },\r\n  NO_NAME_GROUP: \"No name\",\r\n};\r\n\r\nexport default constants;\r\n","import { setSelectedId } from \"app/chatSlice\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport moment from \"moment\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport constants from \"utils/constants\";\r\n\r\nfunction ChatList() {\r\n  const chats = useSelector((state) => state.chats.chats);\r\n  const selectedId = useSelector((state) => state.chats.selectedId);\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const dispatch = useDispatch();\r\n\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  function handleClick(id) {\r\n    if (id !== selectedId) {\r\n      const action = setSelectedId(id);\r\n      dispatch(action);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"search\"\r\n        className=\"my-3 rounded-3xl bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 outline-none transition-all duration-200 w-full dark:bg-gray-700 dark:text-white\"\r\n        placeholder=\"Search chat\"\r\n        onChange={(e) => setKeyword(e.target.value)}\r\n      />\r\n      <div className=\"h-full space-y-2 overflow-y-auto\">\r\n        {chats &&\r\n          getCurrentChats(chats, keyword).map((chat, index) => {\r\n            const currentUserName = currentUser.userName;\r\n\r\n            // check current user still exist in chat (remove participant case)\r\n            var isValid = chat.participants.some(\r\n              (x) => x.userName === currentUserName,\r\n            );\r\n            if (!isValid) {\r\n              return;\r\n            }\r\n\r\n            const friend =\r\n              chat.participants.length > 1\r\n                ? chat.participants\r\n                    ?.filter((x) => x.userName !== currentUserName)\r\n                    .shift()\r\n                : currentUser;\r\n            let lastMessage = {};\r\n            if (chat.messages?.length !== 0) {\r\n              lastMessage = chat.messages?.reduce((a, b) =>\r\n                a.dateCreated > b.dateCreated ? a : b,\r\n              );\r\n            }\r\n            return (\r\n              <div\r\n                key={Date.now() + index}\r\n                className={\r\n                  \"select-none w-full h-20 flex flex-start cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-all duration-200 ease-in dark:hover:bg-gray-800 dark:text-gray-200 \" +\r\n                  (selectedId === chat.id ? \"bg-gray-100 dark:bg-gray-800\" : \"\")\r\n                }\r\n                onClick={() => handleClick(chat.id)}\r\n              >\r\n                <ImageCircle\r\n                  src={\r\n                    chat.type === constants.chatType.PRIVATE\r\n                      ? friend?.avatarUrl\r\n                      : chat.groupAvatarUrl\r\n                  }\r\n                  size=\"lg\"\r\n                />\r\n\r\n                <div className=\"font-primary flex flex-col px-3 py-2 justify-between truncate\">\r\n                  <span className=\"text-gray-800 truncate dark:text-gray-200\">\r\n                    {chat.type === constants.chatType.PRIVATE\r\n                      ? friend?.fullName\r\n                      : chat.name ?? constants.NO_NAME_GROUP}\r\n                  </span>\r\n                  <div className=\"flex\">\r\n                    <span className=\"mr-2 text-sm max-w-150 text-gray-500 truncate\">\r\n                      {lastMessage.content ?? \"\"}\r\n                    </span>\r\n                    <span className=\"text-sm flex-grow text-gray-500 truncate\">\r\n                      {moment(\r\n                        new Date(lastMessage.dateCreated ?? chat.dateCreated),\r\n                        \"YYYYMMDD\",\r\n                      ).fromNow()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatList;\r\n\r\nfunction getCurrentChats(chats, keyword) {\r\n  var result = sortChat(chats);\r\n  result = searchChat(result, keyword);\r\n  return result;\r\n}\r\n\r\nfunction sortChat(chats) {\r\n  if (chats) {\r\n    return [...chats].sort((chatA, chatB) => {\r\n      let lastMessageA = {};\r\n      let lastMessageB = {};\r\n      // check if chat no message => return date created of chat\r\n      if (chatA.messages?.length !== 0) {\r\n        lastMessageA = chatA.messages?.reduce((a, b) => {\r\n          return a.dateCreated > b.dateCreated ? a : b;\r\n        });\r\n      } else {\r\n        lastMessageA.dateCreated = chatA.dateCreated;\r\n      }\r\n      if (chatB.messages?.length !== 0) {\r\n        lastMessageB = chatB.messages?.reduce((a, b) =>\r\n          a.dateCreated > b.dateCreated ? a : b,\r\n        );\r\n      } else {\r\n        lastMessageB.dateCreated = chatB.dateCreated;\r\n      }\r\n\r\n      return lastMessageA?.dateCreated < lastMessageB?.dateCreated ? 1 : -1;\r\n    });\r\n  }\r\n}\r\n\r\nfunction searchChat(chats, keyword) {\r\n  if (chats) {\r\n    return chats.filter((chat) => {\r\n      let isValid = chat.participants.some((x) => {\r\n        if (x.fullName.toLowerCase().includes(keyword.toLowerCase())) {\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      return (\r\n        isValid || chat.name?.toLowerCase().includes(keyword.toLowerCase())\r\n      );\r\n    });\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/info-icon.b4879a5e.svg\";","export default __webpack_public_path__ + \"static/media/left-arrow-icon.07714e5b.svg\";","export default __webpack_public_path__ + \"static/media/emoji.21d0cbf4.svg\";","export default __webpack_public_path__ + \"static/media/image-icon.c8ad9f46.svg\";","export default __webpack_public_path__ + \"static/media/send-icon.666dadc9.svg\";","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nClickableIcon.propTypes = {\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n};\r\n\r\nfunction ClickableIcon({ className, icon, alt, onClick, onBlur }) {\r\n  return (\r\n    <>\r\n      <div\r\n        onBlur={onBlur}\r\n        onClick={onClick}\r\n        className={\r\n          \"p-1 rounded-full hover:bg-gray-200 active:bg-gray-300 dark:hover:bg-gray-600 dark:active:bg-gray-700 transition-all duration-200 cursor-pointer ease-in active:scale-90 active:transform \" +\r\n          (className ?? \"\")\r\n        }\r\n      >\r\n        <img\r\n          alt={alt ?? \"Clickable Icon\"}\r\n          src={icon}\r\n          onClick={onClick}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ClickableIcon;\r\n","import chatApi from \"api/chatApi\";\r\nimport { setIsLoading } from \"app/appSlice\";\r\nimport EmojiIcon from \"assets/icons/emoji.svg\";\r\nimport ImageIcon from \"assets/icons/image-icon.svg\";\r\nimport SendIconNormal from \"assets/icons/send-icon.svg\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport PropTypes from \"prop-types\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nChatInput.propTypes = {\r\n  chatId: PropTypes.number,\r\n};\r\n\r\nfunction ChatInput({ chatId }) {\r\n  const [content, setContent] = useState(\"\");\r\n  const [chosenEmoji, setChosenEmoji] = useState(null);\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n  const ref = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  async function onSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!content) {\r\n      return;\r\n    }\r\n\r\n    var request = { content };\r\n    await chatApi.sendMessage(chatId, request);\r\n\r\n    setContent(\"\");\r\n  }\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    setChosenEmoji(emojiObject);\r\n    if (chosenEmoji?.emoji) {\r\n      setContent(content + chosenEmoji?.emoji);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpenEmoji && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenEmoji(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenEmoji]);\r\n\r\n  async function sendImage(e) {\r\n    var file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"Image\", file);\r\n\r\n    dispatch(setIsLoading(true));\r\n    await chatApi.sendImage(chatId, formData);\r\n    dispatch(setIsLoading(false));\r\n  }\r\n  return (\r\n    <div>\r\n      <form\r\n        onSubmit={(e) => onSendMessage(e)}\r\n        className=\"flex justify-between items-center space-x-1 pl-4 pr-2 md:pr-6 z-0\"\r\n      >\r\n        <div className=\"relative w-full flex\">\r\n          <input\r\n            id=\"imageFile\"\r\n            type=\"file\"\r\n            hidden\r\n            accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n            onChange={sendImage}\r\n          />\r\n          <label htmlFor=\"imageFile\">\r\n            <ClickableIcon className=\"h-10 w-10 p-2 mr-2\" icon={ImageIcon} />\r\n          </label>\r\n          <input\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Aa\"\r\n            className=\"bg-gray-200 dark:bg-gray-800 rounded-3xl w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative\"\r\n          />\r\n          <div ref={ref} position=\"relative\">\r\n            <ClickableIcon\r\n              className=\"absolute h-10 w-10 p-2 right-1 top-0\"\r\n              icon={EmojiIcon}\r\n              onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n            />\r\n            <div\r\n              className={\r\n                \"animate-fade absolute right-0 bottom-full \" +\r\n                \" \" +\r\n                (isOpenEmoji ? \"visible\" : \"invisible\")\r\n              }\r\n            >\r\n              <Picker onEmojiClick={onEmojiClick} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button>\r\n          <ClickableIcon\r\n            disableAutoFocus\r\n            icon={SendIconNormal}\r\n            className=\"w-12 h-12 p-3\"\r\n          />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatInput;\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nConfirmModal.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  confirmButtonTitle: PropTypes.string,\r\n  confirmButtonAction: PropTypes.func,\r\n};\r\n\r\nfunction ConfirmModal({\r\n  title,\r\n  isOpen,\r\n  content = \"Are you sure?\",\r\n  closeAction,\r\n  confirmButtonTitle,\r\n  confirmButtonAction,\r\n}) {\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 dark:bg-gray-900 dark:bg-opacity-50 bg-opacity-30 z-50\">\r\n        <div className=\"bg-white dark:bg-gray-800 dark:border-gray-500 py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-gray-200\">\r\n            {title !== \"\" ? title : \"Notification\"}\r\n          </h3>\r\n          <span className=\"break-words dark:text-gray-200\">{content}</span>\r\n          <div className=\"w-full flex justify-end space-x-2\">\r\n            <Button outline content=\"No\" onClick={closeAction} />\r\n            <Button\r\n              content={confirmButtonTitle ?? \"Ok\"}\r\n              onClick={confirmButtonAction}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default ConfirmModal;\r\n","import chatApi from \"api/chatApi\";\r\nimport userApi from \"api/userApi\";\r\nimport { setIsLoading } from \"app/appSlice\";\r\nimport Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Popup from \"components/Popup\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport constants from \"utils/constants\";\r\n\r\nfunction EditChat({ isOpen, setIsOpen, chat }) {\r\n  const [isOpenModal, setIsOpenModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState(\"\");\r\n\r\n  const [groupName, setGroupName] = useState(chat.name);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  const [friendList, setFriendList] = useState([]);\r\n  const [isOpenFriendList, setIsOpenFriendList] = useState(false);\r\n  const [selectedFriendList, setSelectedFriendList] = useState(\r\n    chat.participants,\r\n  );\r\n\r\n  const [popup, setPopup] = useState({\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  });\r\n\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const ref = useRef();\r\n  const friendListRef = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (\r\n        isOpenFriendList &&\r\n        friendListRef.current &&\r\n        !friendListRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpenFriendList(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenFriendList]);\r\n\r\n  useEffect(() => {\r\n    userApi.getFriendList().then((response) => {\r\n      if (response) {\r\n        setFriendList(response);\r\n      }\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    setSelectedFriendList(chat.participants);\r\n    setGroupName(chat.name);\r\n  }, [chat]);\r\n\r\n  async function handleEditChat() {\r\n    var currentParticipantUserNames = chat.participants.map((x) => x.userName);\r\n    var selectedParticipantUserNames = selectedFriendList.map(\r\n      (x) => x.userName,\r\n    );\r\n    var participantFullNamesToAdd = [];\r\n    var participantFullNamesToRemove = [];\r\n    var participantUserNamesToRemove = [];\r\n\r\n    // create request with added username and removed username\r\n    selectedFriendList.forEach((user) => {\r\n      if (!currentParticipantUserNames.some((x) => x === user.userName)) {\r\n        participantFullNamesToAdd.push(user.fullName);\r\n      }\r\n    });\r\n    chat.participants.forEach((user) => {\r\n      if (!selectedParticipantUserNames.some((x) => x === user.userName)) {\r\n        participantFullNamesToRemove.push(user.fullName);\r\n        participantUserNamesToRemove.push(user.userName);\r\n      }\r\n    });\r\n\r\n    if (participantFullNamesToRemove.length > 0) {\r\n      var content = \"\";\r\n\r\n      if (\r\n        participantUserNamesToRemove.some((x) => x === currentUser.userName)\r\n      ) {\r\n        if (participantFullNamesToRemove.length === 1) {\r\n          content = \"Do you want to leave this group?\";\r\n          openModal(content);\r\n          return;\r\n        } else {\r\n          content = \"Do you want to leave this group and remove \";\r\n        }\r\n      } else {\r\n        content = \"Do you want to remove \";\r\n      }\r\n\r\n      participantFullNamesToRemove.forEach((fullName, index) => {\r\n        if (participantUserNamesToRemove[index] !== currentUser.userName) {\r\n          content += `'${fullName}'`;\r\n          if (index !== participantFullNamesToRemove.length - 1) {\r\n            content += \", \";\r\n          }\r\n        }\r\n      });\r\n\r\n      content += \" from this chat?\";\r\n      openModal(content);\r\n    } else {\r\n      await submitEditChat();\r\n    }\r\n  }\r\n  async function submitEditChat() {\r\n    await dispatch(setIsLoading(true));\r\n\r\n    var currentParticipantUserNames = chat.participants.map((x) => x.userName);\r\n    var selectedParticipantUserNames = selectedFriendList.map(\r\n      (x) => x.userName,\r\n    );\r\n    var participantUserNamesToAdd = [];\r\n    var participantUserNamesToRemove = [];\r\n\r\n    // create request with added username and removed username\r\n    selectedParticipantUserNames.forEach((userName) => {\r\n      if (!currentParticipantUserNames.includes(userName)) {\r\n        participantUserNamesToAdd.push(userName);\r\n      }\r\n    });\r\n    currentParticipantUserNames.forEach((userName) => {\r\n      if (!selectedParticipantUserNames.includes(userName)) {\r\n        participantUserNamesToRemove.push(userName);\r\n      }\r\n    });\r\n\r\n    const request = {\r\n      newGroupName: groupName,\r\n      participantUserNamesToAdd,\r\n      participantUserNamesToRemove,\r\n    };\r\n\r\n    chatApi\r\n      .updateGroupChat(chat.id, request)\r\n      .then((response) => {})\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\" ? error : \"Oops! Something went wrong!\";\r\n\r\n        openPopup(\"Failed\", message);\r\n      });\r\n    closeModal();\r\n    setIsOpen(false);\r\n    await dispatch(setIsLoading(false));\r\n  }\r\n\r\n  async function updateGroupAvatar(e) {\r\n    var file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"Avatar\", file);\r\n\r\n    dispatch(setIsLoading(true));\r\n    await chatApi\r\n      .updateGroupAvatar(chat.id, formData)\r\n      .then((response) => {\r\n        openPopup(\"Success\", \"Update group avatar successfully!\");\r\n        dispatch(setIsLoading(false));\r\n      })\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\" ? error : \"Oops! Something went wrong!\";\r\n\r\n        openPopup(\"Failed\", message);\r\n        dispatch(setIsLoading(false));\r\n      });\r\n    dispatch(setIsLoading(false));\r\n  }\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    setPopup(popup);\r\n  }\r\n  function openModal(content) {\r\n    setIsOpenModal(true);\r\n    setModalContent(content);\r\n  }\r\n  function closeModal() {\r\n    setIsOpenModal(false);\r\n    setModalContent(\"\");\r\n  }\r\n\r\n  return isOpen ? (\r\n    <div className=\"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 z-30\">\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"md:px-5 md:py-3 flex flex-col bg-white dark:bg-gray-800 dark:border-gray-700 rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300\" +\r\n          \" \" +\r\n          (isOpenFriendList ? \"mb-16\" : \"\")\r\n        }\r\n      >\r\n        <Popup\r\n          title={popup.title}\r\n          isOpen={popup.isOpen}\r\n          content={popup.content}\r\n          onClick={() => setPopup({ isOpen: false })}\r\n        />\r\n        <ConfirmModal\r\n          isOpen={isOpenModal}\r\n          closeAction={() => setIsOpenModal(false)}\r\n          title=\"Are you sure?\"\r\n          content={modalContent}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={submitEditChat}\r\n        />\r\n        <div className=\"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center\">\r\n          <h3 className=\"font-semibold text-2xl text-green-600\">Chat info!</h3>\r\n        </div>\r\n        <div className=\"px-10 space-y-4\">\r\n          {chat.type === constants.chatType.GROUP ? (\r\n            <>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"groupName\"\r\n                  className=\"font-semibold dark:text-gray-200 text-lg\"\r\n                >\r\n                  Group name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"groupName\"\r\n                  value={groupName}\r\n                  onChange={(e) => setGroupName(e.target.value)}\r\n                  type=\"text\"\r\n                  className=\"dark:bg-gray-700 bg-gray-100  rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                />\r\n              </div>\r\n              <div ref={friendListRef} className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold dark:text-gray-200 text-lg\"\r\n                >\r\n                  Add Members\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"search\"\r\n                    type=\"search\"\r\n                    onFocus={() => setIsOpenFriendList(true)}\r\n                    value={keyword}\r\n                    autoComplete=\"off\"\r\n                    onChange={(e) => setKeyword(e.target.value)}\r\n                    className=\"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                  />\r\n                  {isOpenFriendList && (\r\n                    <>\r\n                      <div className=\"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl\">\r\n                        <h4 className=\"font-semibold mb-2\">Friend list</h4>\r\n                        {friendList\r\n                          .filter(\r\n                            (x) =>\r\n                              (x.fullName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase()) ||\r\n                                x.userName\r\n                                  ?.toLowerCase()\r\n                                  .includes(keyword?.toLowerCase())) &&\r\n                              !selectedFriendList.some(\r\n                                (selected) => selected.userName === x.userName,\r\n                              ),\r\n                          )\r\n                          .map((friend, index) => (\r\n                            <div\r\n                              onClick={() => {\r\n                                var result = [...selectedFriendList];\r\n                                if (\r\n                                  !result.some(\r\n                                    (x) => x.userName === friend.userName,\r\n                                  )\r\n                                ) {\r\n                                  result.push(friend);\r\n                                  setSelectedFriendList(result);\r\n                                }\r\n                              }}\r\n                              key={Math.random() + index}\r\n                              className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                            >\r\n                              <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                              <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                                {friend.fullName ?? \"Unknown\"}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold dark:text-gray-200 text-lg\"\r\n                >\r\n                  Members <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white border dark:bg-gray-700 dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none\">\r\n                  {selectedFriendList.map((friend, index) => (\r\n                    <div\r\n                      onClick={() => {\r\n                        var result = [...selectedFriendList];\r\n                        var i = result.findIndex(\r\n                          (x) => x.userName === friend.userName,\r\n                        );\r\n                        if (i >= 0) {\r\n                          result.splice(i, 1);\r\n                          setSelectedFriendList(result);\r\n                        }\r\n                      }}\r\n                      key={Math.random() + index}\r\n                      className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2 dark:hover:bg-red-500 dark:bg-gray-600 bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                    >\r\n                      <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                      <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                        {friend.fullName ?? \"Unknown\"}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2 mr-2 flex flex-col\">\r\n                <label\r\n                  htmlFor=\"avatar\"\r\n                  className=\"dark:text-gray-200 text-lg font-semibold \"\r\n                >\r\n                  Group Avatar\r\n                </label>\r\n                <input\r\n                  id=\"avatar\"\r\n                  onChange={updateGroupAvatar}\r\n                  type=\"file\"\r\n                  accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div ref={friendListRef} className=\"space-y-2\">\r\n              <div className=\"font-bold dark:text-gray-200\">\r\n                Created user:{\" \"}\r\n                <span className=\"font-normal\">{chat.creatorUserName}</span>\r\n              </div>\r\n              <div className=\"font-bold dark:text-gray-200\">\r\n                Created date:{\" \"}\r\n                <span className=\"font-normal\">\r\n                  {moment(new Date(chat.dateCreated), \"YYYYMMDD\").format(\r\n                    \"MMMM Do YYYY, h:mm:ss a\",\r\n                  )}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex justify-end px-10 py-6 space-x-4\">\r\n          <div className=\"space-x-2 flex items-center\">\r\n            <Button outline content=\"Close\" onClick={() => setIsOpen(false)} />\r\n            {chat.type === constants.chatType.GROUP ? (\r\n              <Button content=\"Save\" onClick={() => handleEditChat()} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nexport default EditChat;\r\n","import { appendMessageToChat, setSelectedId } from \"app/chatSlice\";\r\nimport InfoIcon from \"assets/icons/info-icon.svg\";\r\nimport LeftArrowIcon from \"assets/icons/left-arrow-icon.svg\";\r\nimport ChatInput from \"components/ChatInput\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport EditChat from \"components/EditChat\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport useMessagePagination from \"hooks/useMessagePagination\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport constants from \"utils/constants\";\r\n\r\nfunction ChatWindow({ chat }) {\r\n  const dispatch = useDispatch();\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const [showTimeIndexes, setShowTimeIndexes] = useState([]);\r\n  const [isOpenInfoPopup, setIsOpenInfoPopup] = useState(false);\r\n\r\n  let currentUserName = currentUser.userName;\r\n\r\n  const friend =\r\n    chat.participants.length > 1\r\n      ? chat.participants?.filter((x) => x.userName !== currentUserName).shift()\r\n      : currentUser;\r\n\r\n  function backToChats() {\r\n    const action = setSelectedId(0);\r\n    dispatch(action);\r\n  }\r\n\r\n  function handleMessageClick(index) {\r\n    var result = [...showTimeIndexes];\r\n    const i = result.findIndex((x) => x === index);\r\n    if (i >= 0) {\r\n      result = result.filter((x) => x !== index);\r\n    } else {\r\n      result.push(index);\r\n    }\r\n    setShowTimeIndexes(result);\r\n  }\r\n\r\n  // infinity scrolling\r\n  const [page, setPage] = useState(1);\r\n  const { appendChat, hasMore, loading, error } = useMessagePagination(\r\n    chat,\r\n    page,\r\n  );\r\n  const endMessageRef = useRef();\r\n\r\n  useEffect(() => {\r\n    dispatch(appendMessageToChat(appendChat));\r\n  }, [appendChat]);\r\n\r\n  const scrollToBottom = () => {\r\n    if (endMessageRef) {\r\n      endMessageRef.current.scrollIntoView();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (chat.page < 2) {\r\n      scrollToBottom();\r\n    }\r\n  }, [chat]);\r\n\r\n  function loadMore() {\r\n    if (page < chat.pageCount) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <EditChat\r\n        isOpen={isOpenInfoPopup}\r\n        setIsOpen={setIsOpenInfoPopup}\r\n        chat={chat}\r\n      />\r\n      <div className=\"flex flex-col w-full h-full pb-4\">\r\n        {/* Header chat window */}\r\n        <div className=\"w-full border-b-2 border-gray-200 dark:border-gray-700 flex justify-between items-center md:p-4 p-3\">\r\n          <div className=\"flex justify-between items-center space-x-3\">\r\n            <img\r\n              src={LeftArrowIcon}\r\n              alt=\"Arrow icon\"\r\n              className=\"h-5 w-5 md:hidden cursor-pointer\"\r\n              onClick={backToChats}\r\n            />\r\n            <ImageCircle src={chat.groupAvatarUrl ?? friend?.avatarUrl} />\r\n            <span className=\"text-lg font-semibold dark:text-gray-200 truncate w-60 md:w-96\">\r\n              {chat.type === constants.chatType.PRIVATE\r\n                ? friend?.fullName\r\n                : chat.name ?? constants.NO_NAME_GROUP}\r\n            </span>\r\n          </div>\r\n          <ClickableIcon\r\n            className=\"h-10 w-10 p-2 mr-2\"\r\n            icon={InfoIcon}\r\n            onClick={() => setIsOpenInfoPopup(!isOpenInfoPopup)}\r\n          />\r\n        </div>\r\n        {/* End header chat window */}\r\n\r\n        {/* Chat content */}\r\n        <div className=\"flex-grow overflow-y-auto overflow-x-hidden px-4 pb-4 pt-2 space-y-1 flex flex-col\">\r\n          {loading && (\r\n            <div className=\"text-gray-500 text-center my-2\">Loading...</div>\r\n          )}\r\n          {hasMore && !loading && (\r\n            <div className=\"flex\">\r\n              <button\r\n                className=\"mx-auto px-4 bg-gray-200 py-2 rounded-lg transform active:scale-95 hover:bg-gray-300 dark:hover:bg-gray-800 dark:bg-gray-700 dark:text-gray-300 text-sm transition-all duration-200\"\r\n                onClick={loadMore}\r\n              >\r\n                Load more messages...\r\n              </button>\r\n            </div>\r\n          )}\r\n          {!hasMore && (\r\n            <div className=\"text-gray-500 text-sm text-center mb-2\">\r\n              Date created:{\" \"}\r\n              {moment(new Date(chat.dateCreated), \"YYYYMMDD\").format(\r\n                \"MMMM Do YYYY, h:mm:ss a\",\r\n              )}\r\n            </div>\r\n          )}\r\n          <div>{error && \"Error\"}</div>\r\n          {[...chat.messages]\r\n            ?.sort((messageA, messageB) => {\r\n              return messageA.dateCreated > messageB.dateCreated ? 1 : -1;\r\n            })\r\n            .map((message, index) =>\r\n              message.senderUserName === currentUser.userName ? (\r\n                <>\r\n                  <div\r\n                    key={index + Math.random()}\r\n                    className=\"flex flex-col items-end w-full\"\r\n                  >\r\n                    {showTimeIndexes.includes(index) && (\r\n                      <span className=\"transition-all animate-fade text-sm text-gray-400 left-0 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-right\">\r\n                        {moment(\r\n                          new Date(message.dateCreated),\r\n                          \"YYYYMMDD\",\r\n                        ).calendar() ?? \"\"}\r\n                      </span>\r\n                    )}\r\n                    {message.imageUrl ? (\r\n                      <img\r\n                        onClick={() => handleMessageClick(index)}\r\n                        className=\"max-w-300 rounded-lg shadow transition-all duration-200 cursor-pointer\"\r\n                        src={message.imageUrl}\r\n                        alt=\"Message image\"\r\n                      />\r\n                    ) : (\r\n                      <span\r\n                        onClick={() => handleMessageClick(index)}\r\n                        className={\r\n                          \"text-white rounded-3xl px-5 py-3 break-word rounded-br-none cursor-pointer overflow-x-auto max-w-3/4\" +\r\n                          \" \" +\r\n                          (showTimeIndexes.includes(index)\r\n                            ? \"bg-green-600 dark:bg-green-800\"\r\n                            : \"bg-gradient-to-br from-green-400 to-green-600 dark:from-green-500 dark:to-green-800 shadow-md\")\r\n                        }\r\n                      >\r\n                        {message.content}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div\r\n                  key={index + Math.random()}\r\n                  className=\"flex items-end space-x-2\"\r\n                >\r\n                  <ImageCircle\r\n                    src={\r\n                      chat.participants\r\n                        .filter((x) => x.userName === message.senderUserName)\r\n                        .shift()?.avatarUrl\r\n                    }\r\n                    size=\"sm\"\r\n                  />\r\n                  <div className=\"flex flex-col w-full items-start\">\r\n                    {(showTimeIndexes.includes(index) ||\r\n                      chat.type === constants.chatType.GROUP) && (\r\n                      <span className=\"transition-all animate-fade text-sm text-gray-400 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-left\">\r\n                        {message.senderFullName +\r\n                          \" - \" +\r\n                          moment(\r\n                            new Date(message.dateCreated),\r\n                            \"YYYYMMDD\",\r\n                          ).calendar() ?? \"\"}\r\n                      </span>\r\n                    )}\r\n                    {message.imageUrl ? (\r\n                      <img\r\n                        onClick={() => handleMessageClick(index)}\r\n                        onClick={() => handleMessageClick(index)}\r\n                        className=\"max-w-300 rounded-lg shadow cursor-pointer\"\r\n                        src={message.imageUrl}\r\n                        alt=\"Message image\"\r\n                      />\r\n                    ) : (\r\n                      <span\r\n                        className={\r\n                          \" rounded-3xl px-5 py-3 break-word rounded-bl-none shadow-sm cursor-pointer overflow-x-auto max-w-3/4\" +\r\n                          \" \" +\r\n                          (showTimeIndexes.includes(index)\r\n                            ? \"bg-gray-300 dark:bg-gray-700\"\r\n                            : \"bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-500 dark:to-gray-600 \")\r\n                        }\r\n                        onClick={() => handleMessageClick(index)}\r\n                      >\r\n                        {message.content}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ),\r\n            )}\r\n          <div ref={endMessageRef}></div>\r\n        </div>\r\n        {/* End chat content */}\r\n\r\n        <ChatInput chatId={chat.id} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatWindow;\r\n","import { useEffect, useState } from \"react\";\r\nimport chatApi from \"api/chatApi\";\r\n\r\nexport default function useMessagePagination(currentChat, page) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [appendChat, setAppendChat] = useState({});\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (page > 1 && hasMore) {\r\n      setLoading(true);\r\n      setError(false);\r\n\r\n      const request = { page };\r\n      chatApi\r\n        .getById(currentChat.id, request)\r\n        .then((response) => {\r\n          setAppendChat(response);\r\n          setHasMore(page < response.pageCount);\r\n          setLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    setHasMore(page < currentChat.pageCount);\r\n  }, [currentChat]);\r\n\r\n  return { loading, error, appendChat, hasMore };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/dark-mode-icon.8e1e7759.svg\";","export default __webpack_public_path__ + \"static/media/menu-icon.02afc26a.svg\";","export default __webpack_public_path__ + \"static/media/new-chat-icon.8f8e0f2b.svg\";","export default __webpack_public_path__ + \"static/media/sign-out-icon.0e12494d.svg\";","import chatApi from \"api/chatApi\";\r\nimport userApi from \"api/userApi\";\r\nimport { setIsLoading, setPopup } from \"app/appSlice\";\r\nimport { setSelectedId } from \"app/chatSlice\";\r\nimport Button from \"components/Button\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport constants from \"utils/constants\";\r\n\r\nfunction CreateChat({ isOpen, setIsOpen }) {\r\n  const [selectedMode, setSelectedMode] = useState(constants.chatType.PRIVATE);\r\n  const [isOpenFriendList, setIsOpenFriendList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [groupName, setGroupName] = useState(\"\");\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [friendList, setFriendList] = useState([]);\r\n  const [selectedFriendList, setSelectedFriendList] = useState([]);\r\n\r\n  const ref = useRef();\r\n  const friendListRef = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (\r\n        isOpenFriendList &&\r\n        friendListRef.current &&\r\n        !friendListRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpenFriendList(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenFriendList]);\r\n\r\n  useEffect(() => {\r\n    userApi.getFriendList().then((response) => {\r\n      if (response) {\r\n        setFriendList(response);\r\n      }\r\n    });\r\n    return () => {\r\n      setSelectedFriendList([]);\r\n      setGroupName(\"\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedMode === constants.chatType.GROUP) {\r\n      var result = selectedFriendList?.length >= 2 && groupName;\r\n      setIsValidButton(result);\r\n    } else if (selectedMode === constants.chatType.PRIVATE) {\r\n      setIsValidButton(selectedFriendList?.length !== 0 ? true : false);\r\n    }\r\n  }, [selectedFriendList, groupName, selectedMode]);\r\n\r\n  async function handleCreateGroup() {\r\n    dispatch(setIsLoading(true));\r\n\r\n    if (isValidButton) {\r\n      if (selectedMode === constants.chatType.GROUP) {\r\n        const request = {\r\n          participantUserNames: selectedFriendList.map((x) => x.userName),\r\n          name: groupName,\r\n        };\r\n        chatApi\r\n          .createGroupChat(request)\r\n          .then((response) => {\r\n            if (response.id) {\r\n              dispatch(setSelectedId(response.id));\r\n            }\r\n            setSelectedFriendList([]);\r\n            setGroupName(\"\");\r\n          })\r\n          .catch((error) => {\r\n            const message =\r\n              typeof error === \"string\" ? error : \"Oops! Something went wrong!\";\r\n\r\n            openPopup(\"Failed\", message);\r\n          });\r\n      } else if (selectedMode === constants.chatType.PRIVATE) {\r\n        const request = {\r\n          participantUserName: selectedFriendList\r\n            .map((x) => x.userName)\r\n            .shift(),\r\n        };\r\n        chatApi\r\n          .createPrivateChat(request)\r\n          .then((response) => {\r\n            if (response.id) {\r\n              dispatch(setSelectedId(response.id));\r\n            }\r\n            setSelectedFriendList([]);\r\n            setGroupName(\"\");\r\n            setIsOpen(false);\r\n          })\r\n          .catch((error) => {\r\n            var message =\r\n              typeof error === \"string\" ? error : \"Oops! Something went wrong!\";\r\n\r\n            setSelectedFriendList([]);\r\n            setGroupName(\"\");\r\n            openPopup(\"Failed\", message);\r\n          });\r\n      }\r\n    }\r\n    dispatch(setIsLoading(false));\r\n  }\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n  return isOpen ? (\r\n    <div className=\"animate-fade fixed grid place-items-center h-screen w-screen px-4 z-30\">\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"md:px-5 md:py-3 flex flex-col bg-white dark:bg-gray-800 dark:border-gray-700 rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300\" +\r\n          \" \" +\r\n          (isOpenFriendList ? \"mb-16\" : \"\")\r\n        }\r\n      >\r\n        <div className=\"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center\">\r\n          <h3 className=\"font-semibold text-2xl text-green-600\">New chat!</h3>\r\n\r\n          <div className=\"relative flex rounded-md items-center border border-green-500 cursor-pointer\">\r\n            <div\r\n              className={\r\n                \"absolute bg-gradient-to-br from-green-400 to-green-600 w-1/2 h-full rounded-md transition-all duration-200 z-0\" +\r\n                \" \" +\r\n                (selectedMode === constants.chatType.GROUP\r\n                  ? \"transform translate-x-full left-0\"\r\n                  : \"left-0 \")\r\n              }\r\n            ></div>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === constants.chatType.PRIVATE\r\n                  ? \"text-white\"\r\n                  : \" text-green-600\")\r\n              }\r\n              onClick={() => setSelectedMode(constants.chatType.PRIVATE)}\r\n            >\r\n              Private\r\n            </span>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === constants.chatType.GROUP\r\n                  ? \"text-white\"\r\n                  : \" text-green-600\")\r\n              }\r\n              onClick={() => setSelectedMode(constants.chatType.GROUP)}\r\n            >\r\n              Group\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"px-10 space-y-4\">\r\n          {selectedMode === constants.chatType.GROUP ? (\r\n            <>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"groupName\"\r\n                  className=\"font-semibold text-lg dark:text-gray-200\"\r\n                >\r\n                  Group name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"groupName\"\r\n                  value={groupName}\r\n                  onChange={(e) => setGroupName(e.target.value)}\r\n                  type=\"text\"\r\n                  className=\"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                />\r\n              </div>\r\n              <div ref={friendListRef} className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-lg dark:text-gray-200\"\r\n                >\r\n                  Find Friends\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"search\"\r\n                    type=\"search\"\r\n                    onFocus={() => setIsOpenFriendList(true)}\r\n                    value={keyword}\r\n                    autoComplete=\"off\"\r\n                    onChange={(e) => setKeyword(e.target.value)}\r\n                    className=\"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                  />\r\n                  {isOpenFriendList && (\r\n                    <>\r\n                      <div className=\"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl\">\r\n                        <h4 className=\"font-semibold mb-2 dark:text-gray-200\">\r\n                          Friend list\r\n                        </h4>\r\n                        {friendList\r\n                          .filter(\r\n                            (x) =>\r\n                              (x.fullName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase()) ||\r\n                                x.userName\r\n                                  ?.toLowerCase()\r\n                                  .includes(keyword?.toLowerCase())) &&\r\n                              !selectedFriendList.some(\r\n                                (selected) => selected.userName === x.userName,\r\n                              ),\r\n                          )\r\n                          .map((friend, index) => (\r\n                            <div\r\n                              onClick={() => {\r\n                                var result = [...selectedFriendList];\r\n                                if (\r\n                                  !result.some(\r\n                                    (x) => x.userName === friend.userName,\r\n                                  )\r\n                                ) {\r\n                                  result.push(friend);\r\n                                  setSelectedFriendList(result);\r\n                                }\r\n                              }}\r\n                              key={Math.random() + index}\r\n                              className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                            >\r\n                              <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                              <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                                {friend.fullName ?? \"Unknown\"}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(At least 2 people. Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-gray-700 border dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none\">\r\n                  {selectedFriendList.map((friend, index) => (\r\n                    <div\r\n                      onClick={() => {\r\n                        var result = [...selectedFriendList];\r\n                        var i = result.findIndex(\r\n                          (x) => x.userName === friend.userName,\r\n                        );\r\n                        if (i >= 0) {\r\n                          result.splice(i, 1);\r\n                          setSelectedFriendList(result);\r\n                        }\r\n                      }}\r\n                      key={Math.random() + index}\r\n                      className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-red-200 dark:hover:bg-red-500 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                    >\r\n                      <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                      <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                        {friend.fullName ?? \"Unknown\"}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div ref={friendListRef} className=\"space-y-2\">\r\n              <label\r\n                htmlFor=\"selectFriend\"\r\n                className=\"font-semibold text-lg dark:text-gray-200\"\r\n              >\r\n                Select Friends\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"selectFriend\"\r\n                  type=\"search\"\r\n                  onFocus={() => setIsOpenFriendList(true)}\r\n                  value={keyword}\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => setKeyword(e.target.value)}\r\n                  className=\"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                />\r\n                {isOpenFriendList && (\r\n                  <>\r\n                    <div className=\"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl py-4 md:px-8 px-6 \">\r\n                      <h4 className=\"font-semibold mb-2 text-start dark:text-gray-200\">\r\n                        Friend list\r\n                      </h4>\r\n                      {friendList\r\n                        .filter(\r\n                          (x) =>\r\n                            (x.fullName\r\n                              ?.toLowerCase()\r\n                              .includes(keyword?.toLowerCase()) ||\r\n                              x.userName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase())) &&\r\n                            !selectedFriendList.some(\r\n                              (selected) => selected.userName === x.userName,\r\n                            ),\r\n                        )\r\n                        .map((friend, index) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              var result = [];\r\n                              result.push(friend);\r\n                              setIsOpenFriendList(false);\r\n                              setSelectedFriendList(result);\r\n                            }}\r\n                            key={Math.random() + index}\r\n                            className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                          >\r\n                            <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                            <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                              {friend.fullName ?? \"Unknown\"}\r\n                            </span>\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-gray-700 border dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none \">\r\n                  {selectedFriendList.map((friend, index) => {\r\n                    if (index === 0) {\r\n                      return (\r\n                        <div\r\n                          onClick={() => {\r\n                            var result = [...selectedFriendList];\r\n                            var i = result.findIndex(\r\n                              (x) => x.userName === friend.userName,\r\n                            );\r\n                            if (i >= 0) {\r\n                              result.splice(i, 1);\r\n                              setSelectedFriendList(result);\r\n                            }\r\n                          }}\r\n                          key={Math.random() + index}\r\n                          className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 dark:hover:bg-red-500\"\r\n                        >\r\n                          <ImageCircle size=\"xs\" src={friend.avatarUrl} />\r\n                          <span className=\"break-full w-full overflow-ellipsis truncate\">\r\n                            {friend.fullName ?? \"Unknown\"}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    } else {\r\n                      return <></>;\r\n                    }\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex justify-end px-10 py-6 space-x-4\">\r\n          <div className=\"space-x-2 flex items-center\">\r\n            <Button outline content=\"Close\" onClick={() => setIsOpen(false)} />\r\n            <Button\r\n              disabled={!isValidButton}\r\n              content=\"Create\"\r\n              onClick={() => handleCreateGroup()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nexport default CreateChat;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useDispatch } from \"react-redux\";\r\nimport userApi from \"api/userApi\";\r\nimport { setIsLoading, setPopup } from \"app/appSlice\";\r\nimport { updateUser } from \"app/userSlice\";\r\nimport Button from \"components/Button\";\r\n\r\nfunction UserInfo({ isOpen, setIsOpen, currentUser }) {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [avatar, setAvatar] = useState({});\r\n\r\n  const ref = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (currentUser.firstName && currentUser.lastName) {\r\n      setFirstName(currentUser.firstName);\r\n      setLastName(currentUser.lastName);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  async function submit() {\r\n    await dispatch(setIsLoading(true));\r\n\r\n    const request = new FormData();\r\n    request.append(\"Avatar\", avatar);\r\n    request.append(\"FirstName\", firstName);\r\n    request.append(\"LastName\", lastName);\r\n\r\n    userApi\r\n      .updateUser(request)\r\n      .then((response) => {\r\n        dispatch(updateUser(response));\r\n        dispatch(setIsLoading(false));\r\n        openPopup(\"Success\", \"Update info successfully!\");\r\n      })\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\" ? error : \"Oops! Something went wrong!\";\r\n        dispatch(setIsLoading(false));\r\n        openPopup(\"Notification\", message);\r\n      });\r\n    setIsOpen(false);\r\n  }\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n\r\n  return isOpen ? (\r\n    <div className=\"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 z-30\">\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"md:px-5 md:py-3 flex flex-col dark:bg-gray-800 dark:border-gray-700 bg-white rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300\"\r\n        }\r\n      >\r\n        <div className=\"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center\">\r\n          <h3 className=\"font-semibold text-2xl text-green-600\">User info!</h3>\r\n        </div>\r\n        <div className=\"px-10 space-y-4\">\r\n          <div className=\"mb-3 grid grid-cols-2 place-items-start \">\r\n            <div className=\"col-span-1 space-y-2 mr-2\">\r\n              <label\r\n                htmlFor=\"fistName\"\r\n                className=\"text-lg font-semibold dark:text-gray-200\"\r\n              >\r\n                First Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                id=\"firstName\"\r\n                value={firstName}\r\n                onChange={(e) => setFirstName(e.target.value)}\r\n                type=\"text\"\r\n                className=\"bg-gray-100 dark:bg-gray-700 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200\"\r\n              />\r\n            </div>\r\n            <div className=\"col-span-1 space-y-2 ml-2\">\r\n              <label\r\n                htmlFor=\"lastName\"\r\n                className=\"text-lg font-semibold dark:text-gray-200\"\r\n              >\r\n                Last Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                id=\"lastName\"\r\n                value={lastName}\r\n                onChange={(e) => setLastName(e.target.value)}\r\n                type=\"text\"\r\n                className=\"bg-gray-100 dark:bg-gray-700 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mr-2 flex flex-col\">\r\n            <label\r\n              htmlFor=\"avatar\"\r\n              className=\"text-lg font-semibold dark:text-gray-200\"\r\n            >\r\n              Avatar\r\n            </label>\r\n            <input\r\n              id=\"avatar\"\r\n              onChange={(e) => setAvatar(e.target.files[0])}\r\n              type=\"file\"\r\n              accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n            />\r\n          </div>\r\n          <div className=\"flex justify-end  py-6 space-x-4\">\r\n            <div className=\"space-x-2 flex items-center flex-end\">\r\n              <Button\r\n                outline\r\n                content=\"Close\"\r\n                onClick={() => setIsOpen(false)}\r\n              />\r\n              <Button content=\"Save\" onClick={() => submit()} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\nexport default UserInfo;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nfunction useDarkMode() {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    var mode = window.localStorage.getItem(\"theme\");\r\n\r\n    if (mode === \"dark\") {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      setDarkMode(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"dark\");\r\n    } else {\r\n      window.document.documentElement.classList.remove(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"light\");\r\n    }\r\n  }, [darkMode]);\r\n\r\n  return { darkMode, setDarkMode };\r\n}\r\n\r\nexport default useDarkMode;\r\n","import DarkModeIcon from \"assets/icons/dark-mode-icon.svg\";\r\nimport MenuIcon from \"assets/icons/menu-icon.svg\";\r\nimport NewChatIcon from \"assets/icons/new-chat-icon.svg\";\r\nimport SignOutIcon from \"assets/icons/sign-out-icon.svg\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport CreateChat from \"components/CreateChat\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport UserInfo from \"components/UserInfo\";\r\nimport useDarkMode from \"hooks/useDarkMode\";\r\nimport PropTypes from \"prop-types\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ClickableIcon from \"../ClickableIcon\";\r\n\r\nHeader.propTypes = {\r\n  logout: PropTypes.func,\r\n};\r\n\r\nfunction Header({ logout }) {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const [isOpenCreateChat, setIsOpenCreateChat] = useState(false);\r\n  const [isOpenUserInfo, setIsOpenUserInfo] = useState(false);\r\n  const [confirmModal, setConfirmModal] = useState({\r\n    isOpen: false,\r\n    title: \"\",\r\n    content: \"\",\r\n    confirmButtonTitle: \"\",\r\n  });\r\n\r\n  const { darkMode, setDarkMode } = useDarkMode();\r\n\r\n  const userAvatar = currentUser.avatarUrl;\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpenMenu && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenMenu]);\r\n\r\n  function openConfirmModal(\r\n    content,\r\n    confirmButtonAction,\r\n    confirmButtonTitle = \"Yes\",\r\n    title,\r\n  ) {\r\n    const confirmModal = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n      confirmButtonTitle: confirmButtonTitle,\r\n      confirmButtonAction: confirmButtonAction,\r\n    };\r\n    setConfirmModal(confirmModal);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {confirmModal.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle={confirmModal.confirmButtonTitle}\r\n          confirmButtonAction={confirmModal.confirmButtonAction}\r\n        />\r\n      )}\r\n      <UserInfo\r\n        currentUser={currentUser}\r\n        isOpen={isOpenUserInfo}\r\n        setIsOpen={setIsOpenUserInfo}\r\n      />\r\n      <CreateChat isOpen={isOpenCreateChat} setIsOpen={setIsOpenCreateChat} />\r\n      <div className=\"h-24 flex justify-between items-center\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div\r\n            className=\"transition-all duration-200 ring ring-green-500 p-1 transform active:scale-95 rounded-full cursor-pointer\"\r\n            onClick={() => setIsOpenUserInfo((x) => !x)}\r\n          >\r\n            <ImageCircle src={userAvatar} size=\"md\" />\r\n          </div>\r\n          <h1 className=\"font-bold text-3xl\">Chats</h1>\r\n        </div>\r\n        <div className=\"flex space-x-2 items-center\">\r\n          <ClickableIcon\r\n            icon={NewChatIcon}\r\n            onClick={() => setIsOpenCreateChat(true)}\r\n            className=\"dark:bg-gray-600\"\r\n          />\r\n          <div className=\"relative\" ref={ref}>\r\n            <ClickableIcon\r\n              icon={MenuIcon}\r\n              onClick={() => setIsOpenMenu(!isOpenMenu)}\r\n              className=\"dark:bg-gray-600\"\r\n            />\r\n            {isOpenMenu && (\r\n              <div className=\"animate-fade transition-all duration-200 absolute right-0 md:left-0 border border-gray-200 bg-white w-52 rounded-lg shadow-md overflow-hidden p-2 dark:bg-gray-800 dark:border-gray-700 mt-2 select-none\">\r\n                <button\r\n                  className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-gray-700\"\r\n                  onClick={() => setDarkMode(!darkMode)}\r\n                >\r\n                  <img\r\n                    src={DarkModeIcon}\r\n                    alt=\"Dark mode icon\"\r\n                    className=\"w-8 h-8 dark:bg-gray-600 rounded-full p-1\"\r\n                  />\r\n                  <span>Dark Mode</span>\r\n                </button>\r\n                <button\r\n                  className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-gray-700\"\r\n                  onClick={() => {\r\n                    openConfirmModal(\"Do you want to log out?\", logout);\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={SignOutIcon}\r\n                    alt=\"Dark mode icon\"\r\n                    className=\"w-8 h-8 dark:bg-gray-600 rounded-full p-1\"\r\n                  />\r\n                  <span>Log Out</span>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { HubConnectionBuilder } from \"@microsoft/signalr\";\r\nimport chatApi from \"api/chatApi\";\r\nimport userApi from \"api/userApi\";\r\nimport { setIsLoading, setPopup } from \"app/appSlice\";\r\nimport {\r\n  addChat,\r\n  addMessage,\r\n  editChat,\r\n  editGroupAvatar,\r\n  refreshChats,\r\n  setSelectedId,\r\n} from \"app/chatSlice\";\r\nimport { updateUser } from \"app/userSlice\";\r\nimport ChatList from \"components/ChatList\";\r\nimport ChatWindow from \"components/ChatWindow\";\r\nimport Header from \"components/Header\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nfunction Chat() {\r\n  const [connection, setConnection] = useState(null);\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n  const chats = useSelector((state) => state.chats.chats);\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const selectedId = useSelector((state) => state.chats.selectedId);\r\n\r\n  function logout() {\r\n    window.localStorage.removeItem(\"token\");\r\n    connection.stop();\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      dispatch(setIsLoading(true));\r\n      chatApi\r\n        .getAll()\r\n        .then((response) => {\r\n          const refreshChatAction = refreshChats(response.data);\r\n          dispatch(refreshChatAction);\r\n          dispatch(setIsLoading(false));\r\n        })\r\n        .catch((error) => {\r\n          var message =\r\n            typeof error === \"string\"\r\n              ? error\r\n              : \"Cannot get any chats. Please login and try again!\";\r\n          dispatch(setIsLoading(false));\r\n          openPopup(\"Error\", message);\r\n        });\r\n\r\n      userApi\r\n        .getCurrentUser()\r\n        .then((response) => {\r\n          dispatch(updateUser(response));\r\n          dispatch(setIsLoading(false));\r\n        })\r\n        .catch((error) => {\r\n          var message =\r\n            typeof error === \"string\"\r\n              ? error\r\n              : \"Cannot get any chats. Please login and try again!\";\r\n          dispatch(setIsLoading(false));\r\n          openPopup(\"Error\", message);\r\n        });\r\n    }\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // for realtime\r\n  useEffect(() => {\r\n    const newConnection = new HubConnectionBuilder()\r\n      .withUrl(process.env.REACT_APP_SERVER_URL + \"/hubs/chats\", {\r\n        accessTokenFactory: () => localStorage.getItem(\"token\"),\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    setConnection(newConnection);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (connection && !connection.connectionStarted) {\r\n      connection\r\n        .start()\r\n        .then((result) => {\r\n          connection.on(\"ReceiveMessage\", (response) => {\r\n            const action = addMessage(response);\r\n            dispatch(action);\r\n          });\r\n          connection.on(\"ReceiveChat\", (chat) => {\r\n            const action = addChat(chat);\r\n            dispatch(action);\r\n            if (chat.creatorUserName === currentUser.userName) {\r\n              dispatch(setSelectedId(chat.id));\r\n            }\r\n          });\r\n          connection.on(\"ReceiveUpdatedChat\", (chat) => {\r\n            const action = editChat(chat);\r\n            dispatch(action);\r\n          });\r\n          connection.on(\"ReceiveUpdatedGroupAvatar\", (response) => {\r\n            const action = editGroupAvatar(response);\r\n            dispatch(action);\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          var message =\r\n            typeof error === \"string\"\r\n              ? error\r\n              : \"Cannot connect to server! Please contact administrator.\";\r\n\r\n          console.error(\"Connection failed: \", error);\r\n          openPopup(\"Connection failed\", message);\r\n        });\r\n    }\r\n    return () => {\r\n      if (connection && connection.connectionStarted) {\r\n        connection.stop();\r\n      }\r\n    };\r\n  }, [connection]);\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"dark:bg-gray-900 dark:text-white  animate-fade grid grid-cols-12 h-screen w-screen\">\r\n        <div\r\n          className={\r\n            \"animate-fade lg:col-span-3 md:col-span-4 col-span-12 md:flex flex-col h-screen border-r-2 px-4 dark:border-gray-700 border-gray-200 \" +\r\n            (selectedId !== 0 ? \" hidden\" : \"\")\r\n          }\r\n        >\r\n          <Header logout={logout} />\r\n          <ChatList />\r\n        </div>\r\n        {!selectedId ? (\r\n          chats?.length === 0 ? (\r\n            <div className=\"animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex h-full w-full \">\r\n              You do not have any chats, please create a chat\r\n            </div>\r\n          ) : (\r\n            <div className=\"animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex h-full w-full \">\r\n              Select a chat to start\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div className=\"animate-fade lg:col-span-9 md:col-span-8 col-span-12 flex h-screen w-full overflow-y-auto\">\r\n            <ChatWindow chat={chats.find((chat) => chat.id === selectedId)} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","export default __webpack_public_path__ + \"static/media/forbid.7d678d5c.jpg\";","import React from \"react\";\r\nimport ForbidImg from \"assets/img/forbid.jpg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Forbid({ message }) {\r\n  return (\r\n    <div className=\"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img className=\"md:w-1/3 object-cover\" src={ForbidImg} alt=\"Error\" />\r\n      <span className=\"font-bold text-2xl md:text-3xl text-center\">\r\n        {message ?? \"You don't have permission to access this resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Forbid;\r\n","export default __webpack_public_path__ + \"static/media/not-found.500f302c.jpg\";","import React from \"react\";\r\nimport NotFoundImg from \"assets/img/not-found.jpg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction NotFound({ message }) {\r\n  return (\r\n    <div className=\"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img className=\"md:w-1/3 object-cover\" src={NotFoundImg} alt=\"Error\" />\r\n      <span className=\" font-bold text-2xl md:text-3xl text-center\">\r\n        {message ?? \"Not found resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport * as yup from \"yup\";\r\n\r\nimport userApi from \"api/userApi\";\r\nimport { setIsLoading } from \"app/appSlice\";\r\nimport LoginPageImage from \"assets/img/login-page.jpg\";\r\nimport Button from \"components/Button\";\r\nimport Popup from \"components/Popup\";\r\n\r\nfunction Register() {\r\n  const [isChanged, setIsChanged] = useState(false);\r\n  const [isExistsUserName, setIsExistsUserName] = useState(true);\r\n  const [popup, setPopup] = useState({\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  // yup validation\r\n  const schema = yup.object().shape({\r\n    firstName: yup.string().required(\"First Name is required\"),\r\n    lastName: yup.string().required(\"Last Name is required\"),\r\n    userName: yup\r\n      .string()\r\n      .required(\"User Name is required\")\r\n      .min(6, \"Username must be 6-20 characters\")\r\n      .max(20, \"Username must be 6-20 characters\")\r\n      .test(\r\n        \"checkUsername\",\r\n        \"Username does not contain special characters\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=[a-zA-Z0-9._])(?!.*[_.]{2})[^_.].*[^_.]$\",\r\n          );\r\n        },\r\n      )\r\n      .test(\r\n        \"existsUsername\",\r\n        \"Username is already taken\",\r\n        (value) => !isExistsUserName,\r\n      ),\r\n    email: yup\r\n      .string()\r\n      .required(\"Email is required\")\r\n      .test(\"checkEmail\", \"Email is invalid\", (value) => {\r\n        return checkRegex(\r\n          value,\r\n          /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\r\n        );\r\n      }),\r\n    password: yup\r\n      .string()\r\n      .required(\"Password is required\")\r\n      .test(\r\n        \"checkPassword\",\r\n        \"Passwords must be at least 6 characters, one digit, one uppercase, one non alphanumeric character\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$^+=!*()@%&]).{8,}$\",\r\n          );\r\n        },\r\n      ),\r\n    confirmPassword: yup\r\n      .string()\r\n      .required(\"Confirm Password is required\")\r\n      .test(\r\n        \"ConfirmPasswordMatch\",\r\n        \"Password and Confirmation Password must match\",\r\n        (confirmPassword) => {\r\n          return confirmPassword === watch.password;\r\n        },\r\n      ),\r\n  });\r\n\r\n  // react hook form\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    setError,\r\n    clearErrors,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {},\r\n  });\r\n  const watch = useWatch({\r\n    control,\r\n  });\r\n\r\n  useEffect(() => {\r\n    userApi.checkUserNameExists(watch.userName).then((response) => {\r\n      if (response.isExists) {\r\n        setError(\r\n          \"userName\",\r\n          {\r\n            type: \"required\",\r\n            message: `Username '${watch.userName}' is already taken`,\r\n          },\r\n          { shouldFocus: true },\r\n        );\r\n        setIsExistsUserName(true);\r\n      } else {\r\n        clearErrors(\"userName\");\r\n        setIsExistsUserName(false);\r\n      }\r\n    });\r\n  }, [watch.userName]);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      var isValid =\r\n        watch.firstName &&\r\n        watch.lastName &&\r\n        watch.userName &&\r\n        watch.email &&\r\n        watch.password &&\r\n        watch.confirmPassword;\r\n\r\n      if (isValid) {\r\n        setIsChanged(true);\r\n        return;\r\n      }\r\n      setIsChanged(false);\r\n    };\r\n\r\n    onChange();\r\n  }, [watch]);\r\n\r\n  // handle submit\r\n  const onSubmit = (content) => {\r\n    dispatch(setIsLoading(true));\r\n\r\n    userApi\r\n      .register(content)\r\n      .then((response) => {\r\n        openPopup(\r\n          \"Success\",\r\n          <span>\r\n            \"Create account successfully! Please{\" \"}\r\n            <Link className=\"font-bold text-green-600\" to=\"/login\">\r\n              log in\r\n            </Link>\r\n            !\"\r\n          </span>,\r\n        );\r\n        reset({});\r\n      })\r\n      .catch((error) => {\r\n        const message =\r\n          typeof error === \"string\"\r\n            ? error\r\n            : \"Cannot create account. Oops! Something went wrong!\";\r\n        openPopup(\"Create account failed\", message);\r\n      });\r\n    dispatch(setIsLoading(false));\r\n  };\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    setPopup(popup);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Popup\r\n        title={popup.title}\r\n        isOpen={popup.isOpen}\r\n        content={popup.content}\r\n        onClick={() => {\r\n          setPopup({ isOpen: false });\r\n          history.push(\"/login\");\r\n        }}\r\n      />\r\n      <div className=\"z-10 h-screen grid md:grid-cols-7 place-items-center px-6\">\r\n        <img\r\n          src={LoginPageImage}\r\n          alt=\"login\"\r\n          className=\"md:block hidden col-span-3 w-full ml-44\"\r\n        />\r\n        <form\r\n          onSubmit={handleSubmit(onSubmit)}\r\n          className=\"container rounded-2xl flex flex-col py-10 md:w-full md:col-span-4 md:px-20 lg:px-30\"\r\n        >\r\n          <h1 className=\"text-3xl font-bold text-primary text-green-600 text-center mb-8\">\r\n            Sign up to TeeChat\r\n          </h1>\r\n          <div className=\"mb-3 grid grid-cols-2 place-items-start \">\r\n            <div className=\"col-span-1 space-y-2 mr-2\">\r\n              <label htmlFor=\"fistName\" className=\"text-lg font-semibold \">\r\n                First Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"firstName\")}\r\n                type=\"text\"\r\n                className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200\"\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.firstName?.message}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-1 space-y-2 ml-2\">\r\n              <label htmlFor=\"lastName\" className=\"text-lg font-semibold \">\r\n                Last Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"lastName\")}\r\n                type=\"text\"\r\n                className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2\"\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.lastName?.message}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"userName\" className=\"text-lg font-semibold \">\r\n              Username <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              {...register(\"userName\")}\r\n              type=\"text\"\r\n              className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2\"\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.userName?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"email\" className=\"text-lg font-semibold \">\r\n              Email <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              {...register(\"email\")}\r\n              type=\"text\"\r\n              className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2\"\r\n            />\r\n            <div className=\"text-red-500 text-sm\">{errors.email?.message}</div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"password\" className=\"text-lg font-semibold \">\r\n              Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"password\")}\r\n              className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200\"\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.password?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"confirmPassword\" className=\"text-lg font-semibold \">\r\n              Confirm Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"confirmPassword\")}\r\n              className=\"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200\"\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.confirmPassword?.message}\r\n            </div>\r\n          </div>\r\n          <Button\r\n            disabled={!isChanged}\r\n            content=\"Sign Up\"\r\n            className=\"mb-4 mt-2 font-bold\"\r\n          />\r\n          <div className=\"text-center\">\r\n            Already a member?{\" \"}\r\n            <Link to=\"/login\" className=\"text-green-500 font-bold\">\r\n              Sign in\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n\r\nfunction checkRegex(value, regex) {\r\n  if (value && regex) {\r\n    var pattern = new RegExp(regex);\r\n    var res = pattern.test(value);\r\n    return res;\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/error.c72c9a3e.jpg\";","import React from \"react\";\r\nimport ErrorImg from \"assets/img/error.jpg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction ServerError({ message }) {\r\n  return (\r\n    <div className=\"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img className=\"md:w-1/3 object-cover\" src={ErrorImg} alt=\"Error\" />\r\n      <span className=\"font-bold text-2xl md:text-3xl text-center\">\r\n        {message ?? \"Oops! Something went wrong!\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ServerError;\r\n","import userApi from \"api/userApi\";\r\nimport { setPopup } from \"app/appSlice\";\r\nimport Loader from \"components/Loader\";\r\nimport Popup from \"components/Popup\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  BrowserRouter,\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport Chat from \"./pages/Chat\";\r\nimport Forbid from \"./pages/Forbid\";\r\nimport NotFound from \"./pages/NotFound\";\r\nimport Register from \"./pages/Register\";\r\nimport ServerError from \"./pages/ServerError\";\r\n\r\nfunction App() {\r\n  const isLoading = useSelector((state) => state.app.isLoading);\r\n  const popup = useSelector((state) => state.app.popup);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const token = window.localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  function closePopup() {\r\n    dispatch(setPopup({ isOpen: false }));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Loader isOpen={isLoading} className=\"z-50\" />\r\n        <Popup\r\n          title={popup.title}\r\n          isOpen={popup.isOpen}\r\n          content={popup.content}\r\n          onClick={closePopup}\r\n        />\r\n\r\n        <Switch>\r\n          <Redirect exact from=\"/\" to=\"/chats\" />\r\n\r\n          <Route path=\"/chats\" component={Chat} />\r\n          <Route path=\"/register\" component={Register} />\r\n          <Route path=\"/notfound\" component={NotFound} />\r\n          <Route path=\"/forbid\" component={Forbid} />\r\n          <Route path=\"/ServerError\" component={ServerError} />\r\n          <Route component={Chat} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\n\r\nimport Login from \"./pages/Login\";\r\nimport store from \"app/store\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route component={App} />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n"],"sourceRoot":""}