(this["webpackJsonptee-chat"]=this["webpackJsonptee-chat"]||[]).push([[0],{147:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(48),s=n.n(c),i=n(7),o=n(15),l=n(13),d=n(3),u=n(0);var m=function(e){var t=e.outline,n=void 0!==t&&t,a=e.content,r=e.className,c=e.onClick,s=e.onBlur,i=e.disabled;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("button",{disabled:i,onClick:c,onBlur:s,className:"px-4 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 outline-none z-0 select-none  "+(n?"border border-green-500 bg-white dark:bg-transparent dark:hover:bg-green-500 text-green-500 hover:text-white hover:bg-green-400 active:bg-green-500":"bg-gradient-to-br from-green-400 to-green-600 text-white active:from-green-500 active:to-green-600  ")+" "+(null!==r&&void 0!==r?r:"")+" "+(i?"cursor-default":"active:scale-95 active:transform"),children:a})})},f=n.p+"static/media/login-page.dc5637a7.jpg",b=n(5),j=n.n(b),p=n(12),g=n(8),x=n(50),h=n(96),v=n.n(h),O=n(97),y=n.n(O),w=v.a.create({baseURL:"https://teechatapi.azurewebsites.net/api",timeout:3e5,headers:{"Content-Type":"application/json"},paramsSerializer:function(e){return y.a.stringify(e)}});w.interceptors.request.use(function(){var e=Object(g.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("token"),a=t,n&&(a=Object(p.a)(Object(p.a)({},t),{},{headers:{Authorization:"Bearer ".concat(n)}})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w.interceptors.response.use((function(e){return e&&e.data?e.data:e}),(function(e){var t,n;if(e.response)switch(e.response.status){case 401:window.location.href="/login";break;case 403:window.location.href="/ForBid";break;case 500:window.location.href="/ServerError";break;default:return Promise.reject(null===(t=e.response)||void 0===t?void 0:t.data)}return Promise.reject(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)}));var N=w,k="/users",C={isLogin:function(){var e=window.localStorage.getItem("token");return!(!e||"undefined"===typeof e)&&(Object(x.a)(e).exp<Date.now()/1e3&&(localStorage.clear(),!0))},login:function(e){var t="".concat(k,"/login");return N.post(t,e)},register:function(e){var t="".concat(k,"/register");return N.post(t,e)},checkUserNameExists:function(e){if(e){var t="".concat(k,"/").concat(e,"/isExists");return N.get(t)}return Promise.reject()},getFriendList:function(){var e="".concat(k);return N.get(e)},getCurrentUser:function(){var e="".concat(k,"/current");return N.get(e)},updateUser:function(e){var t="".concat(k);return N.interceptors.request.use(function(){var e=Object(g.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("token"),a={},n&&(a=Object(p.a)(Object(p.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(n)}})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N.put(t,e)}},S=n(22),U=n(23),E=Object(S.b)({name:"currentUser",initialState:{},reducers:{getCurrentUser:function(e,t){var n=function(){var e=window.localStorage.getItem("token");if(e){return Object(x.a)(e)}return!1}();if(n)return n},updateUser:function(e,t){if(t.payload.userName)return t.payload}}}),F=Object(U.b)({currentUser:E.reducer}),I=E.actions,A=I.getCurrentUser,L=I.updateUser,M=F;var P=Object(S.b)({name:"isLoading",initialState:!1,reducers:{setIsLoading:function(e,t){return t.payload}}}),R=Object(S.b)({name:"popup",initialState:{isOpen:!1,content:"",title:"Notification"},reducers:{setPopup:function(e,t){return t.payload}}}),T=Object(U.b)({isLoading:P.reducer,popup:R.reducer}),z=P.actions.setIsLoading,D=R.actions.setPopup,Y=T;var G=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),b=s[0],j=s[1],p=Object(a.useState)(""),g=Object(d.a)(p,2),x=g[0],h=g[1],v=Object(a.useState)(!1),O=Object(d.a)(v,2),y=O[0],w=O[1],N=Object(l.g)(),k=Object(i.b)();return Object(a.useEffect)((function(){w(!(!n||!x))}),[n,x]),Object(u.jsxs)("div",{className:"h-screen grid md:grid-cols-7 place-items-center px-6",children:[Object(u.jsx)("img",{src:f,alt:"login",className:"md:block hidden col-span-3 w-full ml-44"}),Object(u.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),k(z(!0));var t={username:n,password:x};j(""),C.login(t).then((function(e){k(A()),window.localStorage.setItem("token",e),N.push("/"),k(z(!1))})).catch((function(e){j("string"===typeof e?e:"Username or password is incorrect"),k(z(!1))}))}(e)},className:"container rounded-2xl flex flex-col py-10 md:w-auto md:col-span-4",children:[Object(u.jsx)("h1",{className:"text-3xl font-bold text-primary text-green-600 text-center mb-8",children:"Login to TeeChat"}),b&&Object(u.jsx)("span",{className:"bg-red-500 rounded-md text-white text-lg mb-2 py-2 text-center",children:null!==b&&void 0!==b?b:"Username or password is incorrect"}),Object(u.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(u.jsx)("label",{htmlFor:"username",className:"text-lg font-semibold px-1",children:"Username or email address"}),Object(u.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)},id:"username",type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})]}),Object(u.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(u.jsx)("label",{htmlFor:"password",className:"text-lg font-semibold px-1",children:"Password"}),Object(u.jsx)("input",{value:x,onChange:function(e){return h(e.target.value)},type:"password",id:"password",className:"bg-gray-100 rounded-lg w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})]}),Object(u.jsx)(m,{disabled:!y,content:"Login",className:"mb-4 mt-2 font-bold"}),Object(u.jsxs)("div",{className:"text-center",children:["Not a member?"," ",Object(u.jsx)(o.b,{to:"/register",className:"text-green-500 font-bold",children:"Sign up now"})]})]})]})},B=Object(S.b)({name:"chats",initialState:[],reducers:{addChat:function(e,t){e.push(t.payload)},editChat:function(e,t){var n=t.payload,a=e.findIndex((function(e){return e.id===n.id}));a>=0&&(e[a].name=n.name,e[a].participants=n.participants)},editGroupAvatar:function(e,t){var n=t.payload.chatId,a=e.findIndex((function(e){return e.id===n}));a>=0&&(e[a].groupAvatarUrl=t.payload.groupAvatarUrl)},appendMessageToChat:function(e,t){var n=t.payload,a=null===n||void 0===n?void 0:n.messages,r=e.findIndex((function(e){return e.id===n.id}));r>=0&&(e[r].totalRecords=n.totalRecords,e[r].limit=n.limit,e[r].page=n.page,e[r].pageCount=n.pageCount,n.keyword?e[r].messages=a:e[r].messages=e[r].messages.concat(a))},refreshChats:function(e,t){return t.payload},addMessage:function(e,t){var n=t.payload,a=e.findIndex((function(e){return e.id===n.chatId}));a>=0&&e[a].messages.push(null===n||void 0===n?void 0:n.message)}}}),q=Object(S.b)({name:"selectedId",initialState:0,reducers:{setSelectedId:function(e,t){return t.payload}}}),V=Object(U.b)({chats:B.reducer,selectedId:q.reducer}),_=B.actions,Z=_.addChat,$=_.editChat,J=_.refreshChats,H=_.addMessage,K=_.appendMessageToChat,Q=_.editGroupAvatar,W=q.actions.setSelectedId,X={chats:V,app:Y,users:M},ee=Object(S.a)({reducer:X}),te=(n(147),function(e){var t,n=e.className,r=e.isOpen,c=void 0===r||r,s="h-3 w-3 bg-gradient-to-br from-green-300 to-green-600 shadow-md rounded-full",i=Object(a.useState)(!1),o=Object(d.a)(i,2),l=o[0],m=o[1];return Object(a.useEffect)((function(){return function(){m(!0)}}),[]),c&&Object(u.jsxs)("div",{className:"z-50  animate-fade flex h-screen w-screen justify-center items-center fixed transition-all duration-200 bg-white dark:bg-gray-800"+(l?" hidden":"")+(null!==(t=" "+n)&&void 0!==t?t:""),children:[Object(u.jsx)("div",{className:"".concat(s," mr-3 animate-bounce")}),Object(u.jsx)("div",{className:"".concat(s," mr-3 animate-bounce200")}),Object(u.jsx)("div",{className:"".concat(s," animate-bounce400")})]})});var ne=function(e){var t=e.title,n=void 0===t?"Notification":t,a=e.isOpen,r=e.content,c=void 0===r?"Oops! Something went wrong!":r,s=e.onClick;return a&&Object(u.jsx)("div",{className:"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-50 z-50",children:Object(u.jsxs)("div",{className:"bg-white dark:bg-gray-800 py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6",children:[Object(u.jsx)("h3",{className:"font-semibold text-2xl break-words dark:text-gray-200",children:n}),Object(u.jsx)("span",{className:"break-words dark:text-gray-200",children:c}),Object(u.jsx)("div",{className:"w-full flex justify-end",children:Object(u.jsx)(m,{content:"Close",onClick:s})})]})})},ae=n(104),re="/chats",ce={getAll:function(){var e="".concat(re);return N.get(e)},getById:function(e,t){var n="".concat(re,"/").concat(e);return N.get(n,{params:t})},sendMessage:function(e,t){var n="".concat(re,"/").concat(e,"/send");return N.post(n,t)},sendImage:function(e,t){var n="".concat(re,"/").concat(e,"/sendImage");return N.interceptors.request.use(function(){var e=Object(g.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("token"),a={},n&&(a=Object(p.a)(Object(p.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(n)}})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N.post(n,t)},updateGroupAvatar:function(e,t){var n="".concat(re,"/").concat(e,"/avatar");return N.interceptors.request.use(function(){var e=Object(g.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("token"),a={},n&&(a=Object(p.a)(Object(p.a)({},t),{},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(n)}})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N.patch(n,t)},createGroupChat:function(e){var t="".concat(re,"/group");return N.post(t,e)},updateGroupChat:function(e,t){var n="".concat(re,"/").concat(e);return N.patch(n,t)},createPrivateChat:function(e){var t="".concat(re,"/private");return N.post(t,e)}},se=n(6),ie=n.p+"static/media/default-avatar.ae67bd1e.jpg";var oe=function(e){var t,n,a=e.src,r=void 0===a?ie:a,c=e.className,s=void 0===c?"":c,i=e.alt,o=void 0===i?"Avatar":i,l=e.size;switch(void 0===l?"md":l){case"xs":n="h-6 w-6";break;case"sm":n="h-8 w-8";break;case"lg":n="h-16 w-16";break;case"xl":n="h-24 w-24";break;case"full":n="h-full w-full";break;default:n="h-12 w-12"}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("img",{className:null!==(t=n+" select-none  rounded-full object-cover  "+s)&&void 0!==t?t:"",src:r&&""!==r?r:ie,alt:o})})},le=n(29),de=n.n(le),ue={chatType:{PRIVATE:1,GROUP:2},NO_NAME_GROUP:"No name"};var me=function(){var e=Object(i.c)((function(e){return e.chats.chats})),t=Object(i.c)((function(e){return e.chats.selectedId})),n=Object(i.c)((function(e){return e.users.currentUser})),r=Object(i.b)(),c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],l=s[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{type:"search",className:"my-3 rounded-3xl bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 outline-none transition-all duration-200 w-full dark:bg-gray-700 dark:text-white",placeholder:"Search chat",onChange:function(e){return l(e.target.value)}}),Object(u.jsx)("div",{className:"h-full space-y-2 overflow-y-auto",children:e&&fe(e,o).map((function(e,a){var c,s,i,o,l,d=n.userName;if(e.participants.some((function(e){return e.userName===d}))){var m,f=e.participants.length>1?null===(c=e.participants)||void 0===c?void 0:c.filter((function(e){return e.userName!==d})).shift():n,b={};if(0!==(null===(s=e.messages)||void 0===s?void 0:s.length))b=null===(m=e.messages)||void 0===m?void 0:m.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t}));return Object(u.jsxs)("div",{className:"select-none w-full h-20 flex flex-start cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-all duration-200 ease-in dark:hover:bg-gray-800 dark:text-gray-200 "+(t===e.id?"bg-gray-100 dark:bg-gray-800":""),onClick:function(){return function(e){if(e!==t){var n=W(e);r(n)}}(e.id)},children:[Object(u.jsx)(oe,{src:e.type===ue.chatType.PRIVATE?null===f||void 0===f?void 0:f.avatarUrl:e.groupAvatarUrl,size:"lg"}),Object(u.jsxs)("div",{className:"font-primary flex flex-col px-3 py-2 justify-between truncate",children:[Object(u.jsx)("span",{className:"text-gray-800 truncate dark:text-gray-200",children:e.type===ue.chatType.PRIVATE?null===f||void 0===f?void 0:f.fullName:null!==(i=e.name)&&void 0!==i?i:ue.NO_NAME_GROUP}),Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("span",{className:"mr-2 text-sm max-w-150 text-gray-500 truncate",children:null!==(o=b.content)&&void 0!==o?o:""}),Object(u.jsx)("span",{className:"text-sm flex-grow text-gray-500 truncate",children:de()(new Date(null!==(l=b.dateCreated)&&void 0!==l?l:e.dateCreated),"YYYYMMDD").fromNow()})]})]})]},Date.now()+a)}}))})]})};function fe(e,t){var n=function(e){if(e)return Object(se.a)(e).sort((function(e,t){var n,a,r,c,s,i,o={},l={};0!==(null===(n=e.messages)||void 0===n?void 0:n.length)?o=null===(s=e.messages)||void 0===s?void 0:s.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t})):o.dateCreated=e.dateCreated;0!==(null===(a=t.messages)||void 0===a?void 0:a.length)?l=null===(i=t.messages)||void 0===i?void 0:i.reduce((function(e,t){return e.dateCreated>t.dateCreated?e:t})):l.dateCreated=t.dateCreated;return(null===(r=o)||void 0===r?void 0:r.dateCreated)<(null===(c=l)||void 0===c?void 0:c.dateCreated)?1:-1}))}(e);return n=function(e,t){if(e)return e.filter((function(e){var n;return e.participants.some((function(e){return!!e.fullName.toLowerCase().includes(t.toLowerCase())}))||(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))}))}(n,t)}var be=n(17),je=n.p+"static/media/info-icon.b4879a5e.svg",pe=n.p+"static/media/left-arrow-icon.07714e5b.svg",ge=n.p+"static/media/emoji.21d0cbf4.svg",xe=n.p+"static/media/image-icon.c8ad9f46.svg",he=n.p+"static/media/send-icon.666dadc9.svg";var ve=function(e){var t=e.className,n=e.icon,a=e.alt,r=e.onClick,c=e.onBlur;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{onBlur:c,onClick:r,className:"p-1 rounded-full hover:bg-gray-200 active:bg-gray-300 dark:hover:bg-gray-600 dark:active:bg-gray-700 transition-all duration-200 cursor-pointer ease-in active:scale-90 active:transform "+(null!==t&&void 0!==t?t:""),children:Object(u.jsx)("img",{alt:null!==a&&void 0!==a?a:"Clickable Icon",src:n,onClick:r,className:"w-full"})})})},Oe=n(100),ye=n.n(Oe);var we=function(e){var t=e.chatId,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(null),l=Object(d.a)(o,2),m=l[0],f=l[1],b=Object(a.useState)(!1),p=Object(d.a)(b,2),x=p[0],h=p[1],v=Object(a.useRef)(),O=Object(i.b)();function y(){return(y=Object(g.a)(j.a.mark((function e(n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:return a={content:c},e.next=6,ce.sendMessage(t,a);case 6:s("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(g.a)(j.a.mark((function e(n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0],(r=new FormData).append("Image",a),O(z(!0)),e.next=6,ce.sendImage(t,r);case 6:O(z(!1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(e){x&&v.current&&!v.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[x]),Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return function(e){return y.apply(this,arguments)}(e)},className:"flex justify-between items-center space-x-1 pl-4 pr-2 md:pr-6 z-0",children:[Object(u.jsxs)("div",{className:"relative w-full flex",children:[Object(u.jsx)("input",{id:"imageFile",type:"file",hidden:!0,accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg",onChange:function(e){return w.apply(this,arguments)}}),Object(u.jsx)("label",{htmlFor:"imageFile",children:Object(u.jsx)(ve,{className:"h-10 w-10 p-2 mr-2",icon:xe})}),Object(u.jsx)("input",{value:c,onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Aa",className:"bg-gray-200 dark:bg-gray-800 rounded-3xl w-full py-2 px-4 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative"}),Object(u.jsxs)("div",{ref:v,position:"relative",children:[Object(u.jsx)(ve,{className:"absolute h-10 w-10 p-2 right-1 top-0",icon:ge,onClick:function(){return h(!x)}}),Object(u.jsx)("div",{className:"animate-fade absolute right-0 bottom-full  "+(x?"visible":"invisible"),children:Object(u.jsx)(ye.a,{onEmojiClick:function(e,t){f(t),(null===m||void 0===m?void 0:m.emoji)&&s(c+(null===m||void 0===m?void 0:m.emoji))}})})]})]}),Object(u.jsx)("button",{children:Object(u.jsx)(ve,{disableAutoFocus:!0,icon:he,className:"w-12 h-12 p-3"})})]})})};var Ne=function(e){var t=e.title,n=e.isOpen,a=e.content,r=void 0===a?"Are you sure?":a,c=e.closeAction,s=e.confirmButtonTitle,i=e.confirmButtonAction;return n&&Object(u.jsx)("div",{className:"px-4 animate-fade h-screen fixed inset-0 w-screen flex justify-center items-center bg-gray-500 dark:bg-gray-900 dark:bg-opacity-50 bg-opacity-30 z-50",children:Object(u.jsxs)("div",{className:"bg-white dark:bg-gray-800 dark:border-gray-500 py-8 px-8 w-full md:w-2/3 lg:w-2/5 flex flex-col justify-between items-start rounded-xl space-y-6",children:[Object(u.jsx)("h3",{className:"font-semibold text-2xl break-words dark:text-gray-200",children:""!==t?t:"Notification"}),Object(u.jsx)("span",{className:"break-words dark:text-gray-200",children:r}),Object(u.jsxs)("div",{className:"w-full flex justify-end space-x-2",children:[Object(u.jsx)(m,{outline:!0,content:"No",onClick:c}),Object(u.jsx)(m,{content:null!==s&&void 0!==s?s:"Ok",onClick:i})]})]})})};var ke=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.chat,c=Object(a.useState)(!1),s=Object(d.a)(c,2),o=s[0],l=s[1],f=Object(a.useState)(""),b=Object(d.a)(f,2),p=b[0],x=b[1],h=Object(a.useState)(r.name),v=Object(d.a)(h,2),O=v[0],y=v[1],w=Object(a.useState)(""),N=Object(d.a)(w,2),k=N[0],S=N[1],U=Object(a.useState)([]),E=Object(d.a)(U,2),F=E[0],I=E[1],A=Object(a.useState)(!1),L=Object(d.a)(A,2),M=L[0],P=L[1],R=Object(a.useState)(r.participants),T=Object(d.a)(R,2),D=T[0],Y=T[1],G=Object(a.useState)({isOpen:!1,content:"",title:"Notification"}),B=Object(d.a)(G,2),q=B[0],V=B[1],_=Object(i.c)((function(e){return e.users.currentUser})),Z=Object(a.useRef)(),$=Object(a.useRef)(),J=Object(i.b)();function H(){return(H=Object(g.a)(j.a.mark((function e(){var t,n,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.participants.map((function(e){return e.userName})),n=D.map((function(e){return e.userName})),a=[],c=[],s=[],D.forEach((function(e){t.some((function(t){return t===e.userName}))||a.push(e.fullName)})),r.participants.forEach((function(e){n.some((function(t){return t===e.userName}))||(c.push(e.fullName),s.push(e.userName))})),!(c.length>0)){e.next=25;break}if(i="",!s.some((function(e){return e===_.userName}))){e.next=19;break}if(1!==c.length){e.next=16;break}return ee(i="Do you want to leave this group?"),e.abrupt("return");case 16:i="Do you want to leave this group and remove ";case 17:e.next=20;break;case 19:i="Do you want to remove ";case 20:c.forEach((function(e,t){s[t]!==_.userName&&(i+="'".concat(e,"'"),t!==c.length-1&&(i+=", "))})),ee(i+=" from this chat?"),e.next=27;break;case 25:return e.next=27,K();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return Q.apply(this,arguments)}function Q(){return(Q=Object(g.a)(j.a.mark((function e(){var t,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(z(!0));case 2:return t=r.participants.map((function(e){return e.userName})),a=D.map((function(e){return e.userName})),c=[],s=[],a.forEach((function(e){t.includes(e)||c.push(e)})),t.forEach((function(e){a.includes(e)||s.push(e)})),i={newGroupName:O,participantUserNamesToAdd:c,participantUserNamesToRemove:s},ce.updateGroupChat(r.id,i).then((function(e){})).catch((function(e){X("Failed","string"===typeof e?e:"Oops! Something went wrong!")})),te(),n(!1),e.next=14,J(z(!1));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(g.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],(a=new FormData).append("Avatar",n),J(z(!0)),e.next=6,ce.updateGroupAvatar(r.id,a).then((function(e){X("Success","Update group avatar successfully!"),J(z(!1))})).catch((function(e){X("Failed","string"===typeof e?e:"Oops! Something went wrong!"),J(z(!1))}));case 6:J(z(!1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){V({isOpen:!0,title:e,content:t})}function ee(e){l(!0),x(e)}function te(){l(!1),x("")}return Object(a.useEffect)((function(){var e=function(e){t&&Z.current&&!Z.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(a.useEffect)((function(){var e=function(e){M&&$.current&&!$.current.contains(e.target)&&P(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[M]),Object(a.useEffect)((function(){C.getFriendList().then((function(e){e&&I(e)}))}),[]),Object(a.useEffect)((function(){Y(r.participants),y(r.name)}),[r]),t?Object(u.jsx)("div",{className:"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 z-30",children:Object(u.jsxs)("div",{ref:Z,className:"md:px-5 md:py-3 flex flex-col bg-white dark:bg-gray-800 dark:border-gray-700 rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 "+(M?"mb-16":""),children:[Object(u.jsx)(ne,{title:q.title,isOpen:q.isOpen,content:q.content,onClick:function(){return V({isOpen:!1})}}),Object(u.jsx)(Ne,{isOpen:o,closeAction:function(){return l(!1)},title:"Are you sure?",content:p,confirmButtonTitle:"Yes",confirmButtonAction:K}),Object(u.jsx)("div",{className:"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center",children:Object(u.jsx)("h3",{className:"font-semibold text-2xl text-green-600",children:"Chat info!"})}),Object(u.jsx)("div",{className:"px-10 space-y-4",children:r.type===ue.chatType.GROUP?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"space-y-2",children:[Object(u.jsxs)("label",{htmlFor:"groupName",className:"font-semibold dark:text-gray-200 text-lg",children:["Group name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",{id:"groupName",value:O,onChange:function(e){return y(e.target.value)},type:"text",className:"dark:bg-gray-700 bg-gray-100  rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "})]}),Object(u.jsxs)("div",{ref:$,className:"space-y-2",children:[Object(u.jsx)("label",{htmlFor:"search",className:"font-semibold dark:text-gray-200 text-lg",children:"Add Members"}),Object(u.jsxs)("div",{className:"relative",children:[Object(u.jsx)("input",{id:"search",type:"search",onFocus:function(){return P(!0)},value:k,autoComplete:"off",onChange:function(e){return S(e.target.value)},className:"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),M&&Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl",children:[Object(u.jsx)("h4",{className:"font-semibold mb-2",children:"Friend list"}),F.filter((function(e){var t,n;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===k||void 0===k?void 0:k.toLowerCase()))||(null===(n=e.userName)||void 0===n?void 0:n.toLowerCase().includes(null===k||void 0===k?void 0:k.toLowerCase())))&&!D.some((function(t){return t.userName===e.userName}))})).map((function(e,t){var n;return Object(u.jsxs)("div",{onClick:function(){var t=Object(se.a)(D);t.some((function(t){return t.userName===e.userName}))||(t.push(e),Y(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t)}))]})})]})]}),Object(u.jsxs)("div",{className:"space-y-2",children:[Object(u.jsxs)("label",{htmlFor:"search",className:"font-semibold dark:text-gray-200 text-lg",children:["Members ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(u.jsx)("span",{className:"text-sm text-gray-400",children:"(Click to remove)"})]}),Object(u.jsx)("div",{className:"bg-white border dark:bg-gray-700 dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none",children:D.map((function(e,t){var n;return Object(u.jsxs)("div",{onClick:function(){var t=Object(se.a)(D),n=t.findIndex((function(t){return t.userName===e.userName}));n>=0&&(t.splice(n,1),Y(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2 dark:hover:bg-red-500 dark:bg-gray-600 bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t)}))})]}),Object(u.jsxs)("div",{className:"space-y-2 mr-2 flex flex-col",children:[Object(u.jsx)("label",{htmlFor:"avatar",className:"dark:text-gray-200 text-lg font-semibold ",children:"Group Avatar"}),Object(u.jsx)("input",{id:"avatar",onChange:function(e){return W.apply(this,arguments)},type:"file",accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg"})]})]}):Object(u.jsxs)("div",{ref:$,className:"space-y-2",children:[Object(u.jsxs)("div",{className:"font-bold dark:text-gray-200",children:["Created user:"," ",Object(u.jsx)("span",{className:"font-normal",children:r.creatorUserName})]}),Object(u.jsxs)("div",{className:"font-bold dark:text-gray-200",children:["Created date:"," ",Object(u.jsx)("span",{className:"font-normal",children:de()(new Date(r.dateCreated),"YYYYMMDD").format("MMMM Do YYYY, h:mm:ss a")})]})]})}),Object(u.jsx)("div",{className:"flex justify-end px-10 py-6 space-x-4",children:Object(u.jsxs)("div",{className:"space-x-2 flex items-center",children:[Object(u.jsx)(m,{outline:!0,content:"Close",onClick:function(){return n(!1)}}),r.type===ue.chatType.GROUP?Object(u.jsx)(m,{content:"Save",onClick:function(){return function(){return H.apply(this,arguments)}()}}):""]})})]})}):""};var Ce=function(e){var t,n,r,c,s=e.chat,o=Object(i.b)(),l=Object(i.c)((function(e){return e.users.currentUser})),m=Object(a.useState)([]),f=Object(d.a)(m,2),b=f[0],j=f[1],p=Object(a.useState)(!1),g=Object(d.a)(p,2),x=g[0],h=g[1],v=l.userName,O=s.participants.length>1?null===(t=s.participants)||void 0===t?void 0:t.filter((function(e){return e.userName!==v})).shift():l;function y(e){var t=Object(se.a)(b);t.findIndex((function(t){return t===e}))>=0?t=t.filter((function(t){return t!==e})):t.push(e),j(t)}var w=Object(a.useState)(1),N=Object(d.a)(w,2),k=N[0],C=N[1],S=function(e,t){var n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(d.a)(i,2),l=o[0],u=o[1],m=Object(a.useState)({}),f=Object(d.a)(m,2),b=f[0],j=f[1],p=Object(a.useState)(!1),g=Object(d.a)(p,2),x=g[0],h=g[1];return Object(a.useEffect)((function(){if(t>1&&x){s(!0),u(!1);var n={page:t};ce.getById(e.id,n).then((function(e){j(e),h(t<e.pageCount),s(!1)})).catch((function(e){u(e)}))}}),[t]),Object(a.useEffect)((function(){h(t<e.pageCount)}),[e]),{loading:c,error:l,appendChat:b,hasMore:x}}(s,k),U=S.appendChat,E=S.hasMore,F=S.loading,I=S.error,A=Object(a.useRef)();return Object(a.useEffect)((function(){o(K(U))}),[U]),Object(a.useEffect)((function(){s.page<2&&A&&A.current.scrollIntoView()}),[s]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ke,{isOpen:x,setIsOpen:h,chat:s}),Object(u.jsxs)("div",{className:"flex flex-col w-full h-full pb-4",children:[Object(u.jsxs)("div",{className:"w-full border-b-2 border-gray-200 dark:border-gray-700 flex justify-between items-center md:p-4 p-3",children:[Object(u.jsxs)("div",{className:"flex justify-between items-center space-x-3",children:[Object(u.jsx)("img",{src:pe,alt:"Arrow icon",className:"h-5 w-5 md:hidden cursor-pointer",onClick:function(){var e=W(0);o(e)}}),Object(u.jsx)(oe,{src:null!==(n=s.groupAvatarUrl)&&void 0!==n?n:null===O||void 0===O?void 0:O.avatarUrl}),Object(u.jsx)("span",{className:"text-lg font-semibold dark:text-gray-200 truncate w-60 md:w-96",children:s.type===ue.chatType.PRIVATE?null===O||void 0===O?void 0:O.fullName:null!==(r=s.name)&&void 0!==r?r:ue.NO_NAME_GROUP})]}),Object(u.jsx)(ve,{className:"h-10 w-10 p-2 mr-2",icon:je,onClick:function(){return h(!x)}})]}),Object(u.jsxs)("div",{className:"flex-grow overflow-y-auto overflow-x-hidden px-4 pb-4 pt-2 space-y-1 flex flex-col",children:[F&&Object(u.jsx)("div",{className:"text-gray-500 text-center my-2",children:"Loading..."}),E&&!F&&Object(u.jsx)("div",{className:"flex",children:Object(u.jsx)("button",{className:"mx-auto px-4 bg-gray-200 py-2 rounded-lg transform active:scale-95 hover:bg-gray-300 dark:hover:bg-gray-800 dark:bg-gray-700 dark:text-gray-300 text-sm transition-all duration-200",onClick:function(){k<s.pageCount&&C((function(e){return e+1}))},children:"Load more messages..."})}),!E&&Object(u.jsxs)("div",{className:"text-gray-500 text-sm text-center mb-2",children:["Date created:"," ",de()(new Date(s.dateCreated),"YYYYMMDD").format("MMMM Do YYYY, h:mm:ss a")]}),Object(u.jsx)("div",{children:I&&"Error"}),null===(c=Object(se.a)(s.messages))||void 0===c?void 0:c.sort((function(e,t){return e.dateCreated>t.dateCreated?1:-1})).map((function(e,t){var n,a,r,c;return e.senderUserName===l.userName?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"flex flex-col items-end w-full",children:[b.includes(t)&&Object(u.jsx)("span",{className:"transition-all animate-fade text-sm text-gray-400 left-0 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-right",children:null!==(n=de()(new Date(e.dateCreated),"YYYYMMDD").calendar())&&void 0!==n?n:""}),e.imageUrl?Object(u.jsx)("img",{onClick:function(){return y(t)},className:"max-w-300 rounded-lg shadow transition-all duration-200 cursor-pointer",src:e.imageUrl,alt:"Message image"}):Object(u.jsx)("span",{onClick:function(){return y(t)},className:"text-white rounded-3xl px-5 py-3 break-word rounded-br-none cursor-pointer overflow-x-auto max-w-3/4 "+(b.includes(t)?"bg-green-600 dark:bg-green-800":"bg-gradient-to-br from-green-400 to-green-600 dark:from-green-500 dark:to-green-800 shadow-md"),children:e.content})]},t+Math.random())}):Object(u.jsxs)("div",{className:"flex items-end space-x-2",children:[Object(u.jsx)(oe,{src:null===(a=s.participants.filter((function(t){return t.userName===e.senderUserName})).shift())||void 0===a?void 0:a.avatarUrl,size:"sm"}),Object(u.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(b.includes(t)||s.type===ue.chatType.GROUP)&&Object(u.jsx)("span",{className:"transition-all animate-fade text-sm text-gray-400 bottom-full mb-1 ml-1 space-x-2 md:w-80 w-60 truncate overflow-ellipsis text-left",children:null!==(r=e.senderFullName+" - "+de()(new Date(e.dateCreated),"YYYYMMDD").calendar())&&void 0!==r?r:""}),e.imageUrl?Object(u.jsx)("img",(c={onClick:function(){return y(t)}},Object(be.a)(c,"onClick",(function(){return y(t)})),Object(be.a)(c,"className","max-w-300 rounded-lg shadow cursor-pointer"),Object(be.a)(c,"src",e.imageUrl),Object(be.a)(c,"alt","Message image"),c)):Object(u.jsx)("span",{className:" rounded-3xl px-5 py-3 break-word rounded-bl-none shadow-sm cursor-pointer overflow-x-auto max-w-3/4 "+(b.includes(t)?"bg-gray-300 dark:bg-gray-700":"bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-500 dark:to-gray-600 "),onClick:function(){return y(t)},children:e.content})]})]},t+Math.random())})),Object(u.jsx)("div",{ref:A})]}),Object(u.jsx)(we,{chatId:s.id})]})]})},Se=n.p+"static/media/dark-mode-icon.8e1e7759.svg",Ue=n.p+"static/media/menu-icon.02afc26a.svg",Ee=n.p+"static/media/new-chat-icon.8f8e0f2b.svg",Fe=n.p+"static/media/sign-out-icon.0e12494d.svg";var Ie=function(e){var t=e.isOpen,n=e.setIsOpen,r=Object(a.useState)(ue.chatType.PRIVATE),c=Object(d.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!1),f=Object(d.a)(l,2),b=f[0],p=f[1],x=Object(a.useState)(!1),h=Object(d.a)(x,2),v=h[0],O=h[1],y=Object(a.useState)(""),w=Object(d.a)(y,2),N=w[0],k=w[1],S=Object(a.useState)(""),U=Object(d.a)(S,2),E=U[0],F=U[1],I=Object(a.useState)([]),A=Object(d.a)(I,2),L=A[0],M=A[1],P=Object(a.useState)([]),R=Object(d.a)(P,2),T=R[0],Y=R[1],G=Object(a.useRef)(),B=Object(a.useRef)(),q=Object(i.b)();function V(){return(V=Object(g.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(z(!0)),v&&(s===ue.chatType.GROUP?(t={participantUserNames:T.map((function(e){return e.userName})),name:N},ce.createGroupChat(t).then((function(e){e.id&&q(W(e.id)),Y([]),k("")})).catch((function(e){_("Failed","string"===typeof e?e:"Oops! Something went wrong!")}))):s===ue.chatType.PRIVATE&&(a={participantUserName:T.map((function(e){return e.userName})).shift()},ce.createPrivateChat(a).then((function(e){e.id&&q(W(e.id)),Y([]),k(""),n(!1)})).catch((function(e){var t="string"===typeof e?e:"Oops! Something went wrong!";Y([]),k(""),_("Failed",t)})))),q(z(!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){q(D({isOpen:!0,title:e,content:t}))}return Object(a.useEffect)((function(){var e=function(e){t&&G.current&&!G.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(a.useEffect)((function(){var e=function(e){b&&B.current&&!B.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]),Object(a.useEffect)((function(){return C.getFriendList().then((function(e){e&&M(e)})),function(){Y([]),k("")}}),[]),Object(a.useEffect)((function(){if(s===ue.chatType.GROUP){var e=(null===T||void 0===T?void 0:T.length)>=2&&N;O(e)}else s===ue.chatType.PRIVATE&&O(0!==(null===T||void 0===T?void 0:T.length))}),[T,N,s]),t?Object(u.jsx)("div",{className:"animate-fade fixed grid place-items-center h-screen w-screen px-4 z-30",children:Object(u.jsxs)("div",{ref:G,className:"md:px-5 md:py-3 flex flex-col bg-white dark:bg-gray-800 dark:border-gray-700 rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 "+(b?"mb-16":""),children:[Object(u.jsxs)("div",{className:"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center",children:[Object(u.jsx)("h3",{className:"font-semibold text-2xl text-green-600",children:"New chat!"}),Object(u.jsxs)("div",{className:"relative flex rounded-md items-center border border-green-500 cursor-pointer",children:[Object(u.jsx)("div",{className:"absolute bg-gradient-to-br from-green-400 to-green-600 w-1/2 h-full rounded-md transition-all duration-200 z-0 "+(s===ue.chatType.GROUP?"transform translate-x-full left-0":"left-0 ")}),Object(u.jsx)("span",{className:" px-3 py-2 z-10 text-sm select-none  "+(s===ue.chatType.PRIVATE?"text-white":" text-green-600"),onClick:function(){return o(ue.chatType.PRIVATE)},children:"Private"}),Object(u.jsx)("span",{className:" px-3 py-2 z-10 text-sm select-none  "+(s===ue.chatType.GROUP?"text-white":" text-green-600"),onClick:function(){return o(ue.chatType.GROUP)},children:"Group"})]})]}),Object(u.jsx)("div",{className:"px-10 space-y-4",children:s===ue.chatType.GROUP?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"space-y-2",children:[Object(u.jsxs)("label",{htmlFor:"groupName",className:"font-semibold text-lg dark:text-gray-200",children:["Group name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",{id:"groupName",value:N,onChange:function(e){return k(e.target.value)},type:"text",className:"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "})]}),Object(u.jsxs)("div",{ref:B,className:"space-y-2",children:[Object(u.jsx)("label",{htmlFor:"search",className:"font-semibold text-lg dark:text-gray-200",children:"Find Friends"}),Object(u.jsxs)("div",{className:"relative",children:[Object(u.jsx)("input",{id:"search",type:"search",onFocus:function(){return p(!0)},value:E,autoComplete:"off",onChange:function(e){return F(e.target.value)},className:"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),b&&Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl",children:[Object(u.jsx)("h4",{className:"font-semibold mb-2 dark:text-gray-200",children:"Friend list"}),L.filter((function(e){var t,n;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===E||void 0===E?void 0:E.toLowerCase()))||(null===(n=e.userName)||void 0===n?void 0:n.toLowerCase().includes(null===E||void 0===E?void 0:E.toLowerCase())))&&!T.some((function(t){return t.userName===e.userName}))})).map((function(e,t){var n;return Object(u.jsxs)("div",{onClick:function(){var t=Object(se.a)(T);t.some((function(t){return t.userName===e.userName}))||(t.push(e),Y(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t)}))]})})]})]}),Object(u.jsxs)("div",{className:"space-y-2",children:[Object(u.jsxs)("label",{htmlFor:"search",className:"font-semibold text-lg dark:text-gray-200",children:["Selected ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(u.jsx)("span",{className:"text-sm text-gray-400",children:"(At least 2 people. Click to remove)"})]}),Object(u.jsx)("div",{className:"bg-white dark:bg-gray-700 border dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none",children:T.map((function(e,t){var n;return Object(u.jsxs)("div",{onClick:function(){var t=Object(se.a)(T),n=t.findIndex((function(t){return t.userName===e.userName}));n>=0&&(t.splice(n,1),Y(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-red-200 dark:hover:bg-red-500 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t)}))})]})]}):Object(u.jsxs)("div",{ref:B,className:"space-y-2",children:[Object(u.jsx)("label",{htmlFor:"selectFriend",className:"font-semibold text-lg dark:text-gray-200",children:"Select Friends"}),Object(u.jsxs)("div",{className:"relative",children:[Object(u.jsx)("input",{id:"selectFriend",type:"search",onFocus:function(){return p(!0)},value:E,autoComplete:"off",onChange:function(e){return F(e.target.value)},className:"dark:bg-gray-700 bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 "}),b&&Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"animate-fade absolute top-full bg-white dark:bg-gray-700 border border-gray-400 border-opacity-50 rounded-lg w-full space-y-1 max-h-72 overflow-y-auto select-none z-10 shadow-xl py-4 md:px-8 px-6 ",children:[Object(u.jsx)("h4",{className:"font-semibold mb-2 text-start dark:text-gray-200",children:"Friend list"}),L.filter((function(e){var t,n;return((null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(null===E||void 0===E?void 0:E.toLowerCase()))||(null===(n=e.userName)||void 0===n?void 0:n.toLowerCase().includes(null===E||void 0===E?void 0:E.toLowerCase())))&&!T.some((function(t){return t.userName===e.userName}))})).map((function(e,t){var n;return Object(u.jsxs)("div",{onClick:function(){var t=[];t.push(e),p(!1),Y(t)},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t)}))]})})]}),Object(u.jsxs)("div",{className:"space-y-2",children:[Object(u.jsxs)("label",{htmlFor:"search",className:"font-semibold text-lg dark:text-gray-200",children:["Selected ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})," ",Object(u.jsx)("span",{className:"text-sm text-gray-400",children:"(Click to remove)"})]}),Object(u.jsx)("div",{className:"bg-white dark:bg-gray-700 border dark:border-gray-600 border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-72 overflow-y-auto select-none ",children:T.map((function(e,t){var n;return 0===t?Object(u.jsxs)("div",{onClick:function(){var t=Object(se.a)(T),n=t.findIndex((function(t){return t.userName===e.userName}));n>=0&&(t.splice(n,1),Y(t))},className:"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-gray-600 bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 dark:hover:bg-red-500",children:[Object(u.jsx)(oe,{size:"xs",src:e.avatarUrl}),Object(u.jsx)("span",{className:"break-full w-full overflow-ellipsis truncate",children:null!==(n=e.fullName)&&void 0!==n?n:"Unknown"})]},Math.random()+t):Object(u.jsx)(u.Fragment,{})}))})]})]})}),Object(u.jsx)("div",{className:"flex justify-end px-10 py-6 space-x-4",children:Object(u.jsxs)("div",{className:"space-x-2 flex items-center",children:[Object(u.jsx)(m,{outline:!0,content:"Close",onClick:function(){return n(!1)}}),Object(u.jsx)(m,{disabled:!v,content:"Create",onClick:function(){return function(){return V.apply(this,arguments)}()}})]})})]})}):""};var Ae=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.currentUser,c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],l=s[1],f=Object(a.useState)(""),b=Object(d.a)(f,2),p=b[0],x=b[1],h=Object(a.useState)({}),v=Object(d.a)(h,2),O=v[0],y=v[1],w=Object(a.useRef)(),N=Object(i.b)();function k(){return(k=Object(g.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(z(!0));case 2:(t=new FormData).append("Avatar",O),t.append("FirstName",o),t.append("LastName",p),C.updateUser(t).then((function(e){N(L(e)),N(z(!1)),S("Success","Update info successfully!")})).catch((function(e){var t="string"===typeof e?e:"Oops! Something went wrong!";N(z(!1)),S("Notification",t)})),n(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){N(D({isOpen:!0,title:e,content:t}))}return Object(a.useEffect)((function(){var e=function(e){t&&w.current&&!w.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(a.useEffect)((function(){r.firstName&&r.lastName&&(l(r.firstName),x(r.lastName))}),[r]),t?Object(u.jsx)("div",{className:"animate-fade fixed inset-0 grid place-items-center h-screen w-screen px-4 z-30",children:Object(u.jsxs)("div",{ref:w,className:"md:px-5 md:py-3 flex flex-col dark:bg-gray-800 dark:border-gray-700 bg-white rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300",children:[Object(u.jsx)("div",{className:"flex px-10 pt-6 pb-5 space-x-7 justify-between h-full items-center",children:Object(u.jsx)("h3",{className:"font-semibold text-2xl text-green-600",children:"User info!"})}),Object(u.jsxs)("div",{className:"px-10 space-y-4",children:[Object(u.jsxs)("div",{className:"mb-3 grid grid-cols-2 place-items-start ",children:[Object(u.jsxs)("div",{className:"col-span-1 space-y-2 mr-2",children:[Object(u.jsxs)("label",{htmlFor:"fistName",className:"text-lg font-semibold dark:text-gray-200",children:["First Name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",{id:"firstName",value:o,onChange:function(e){return l(e.target.value)},type:"text",className:"bg-gray-100 dark:bg-gray-700 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})]}),Object(u.jsxs)("div",{className:"col-span-1 space-y-2 ml-2",children:[Object(u.jsxs)("label",{htmlFor:"lastName",className:"text-lg font-semibold dark:text-gray-200",children:["Last Name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",{id:"lastName",value:p,onChange:function(e){return x(e.target.value)},type:"text",className:"bg-gray-100 dark:bg-gray-700 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})]})]}),Object(u.jsxs)("div",{className:"space-y-2 mr-2 flex flex-col",children:[Object(u.jsx)("label",{htmlFor:"avatar",className:"text-lg font-semibold dark:text-gray-200",children:"Avatar"}),Object(u.jsx)("input",{id:"avatar",onChange:function(e){return y(e.target.files[0])},type:"file",accept:"image/png, image/jpg, image/tiff, image/tif, image/jpeg"})]}),Object(u.jsx)("div",{className:"flex justify-end  py-6 space-x-4",children:Object(u.jsxs)("div",{className:"space-x-2 flex items-center flex-end",children:[Object(u.jsx)(m,{outline:!0,content:"Close",onClick:function(){return n(!1)}}),Object(u.jsx)(m,{content:"Save",onClick:function(){return function(){return k.apply(this,arguments)}()}})]})})]})]})}):""};var Le=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){"dark"===window.localStorage.getItem("theme")&&(window.document.documentElement.classList.add("dark"),r(!0))}),[]),Object(a.useEffect)((function(){n?(window.document.documentElement.classList.add("dark"),window.localStorage.setItem("theme","dark")):(window.document.documentElement.classList.remove("dark"),window.localStorage.setItem("theme","light"))}),[n]),{darkMode:n,setDarkMode:r}};var Me=function(e){var t=e.logout,n=Object(i.c)((function(e){return e.users.currentUser})),r=Object(a.useState)(!1),c=Object(d.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!1),m=Object(d.a)(l,2),f=m[0],b=m[1],j=Object(a.useState)({isOpen:!1,title:"",content:"",confirmButtonTitle:""}),p=Object(d.a)(j,2),g=p[0],x=p[1],h=Le(),v=h.darkMode,O=h.setDarkMode,y=n.avatarUrl,w=Object(a.useState)(!1),N=Object(d.a)(w,2),k=N[0],C=N[1],S=Object(a.useRef)();return Object(a.useEffect)((function(){var e=function(e){k&&S.current&&!S.current.contains(e.target)&&C(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[k]),Object(u.jsxs)(u.Fragment,{children:[g.isOpen&&Object(u.jsx)(Ne,{isOpen:g.isOpen,closeAction:function(){return x({isOpen:!1})},title:"Are you sure?",content:g.content,confirmButtonTitle:g.confirmButtonTitle,confirmButtonAction:g.confirmButtonAction}),Object(u.jsx)(Ae,{currentUser:n,isOpen:f,setIsOpen:b}),Object(u.jsx)(Ie,{isOpen:s,setIsOpen:o}),Object(u.jsxs)("div",{className:"h-24 flex justify-between items-center",children:[Object(u.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(u.jsx)("div",{className:"transition-all duration-200 ring ring-green-500 p-1 transform active:scale-95 rounded-full cursor-pointer",onClick:function(){return b((function(e){return!e}))},children:Object(u.jsx)(oe,{src:y,size:"md"})}),Object(u.jsx)("h1",{className:"font-bold text-3xl",children:"Chats"})]}),Object(u.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(u.jsx)(ve,{icon:Ee,onClick:function(){return o(!0)},className:"dark:bg-gray-600"}),Object(u.jsxs)("div",{className:"relative",ref:S,children:[Object(u.jsx)(ve,{icon:Ue,onClick:function(){return C(!k)},className:"dark:bg-gray-600"}),k&&Object(u.jsxs)("div",{className:"animate-fade transition-all duration-200 absolute right-0 md:left-0 border border-gray-200 bg-white w-52 rounded-lg shadow-md overflow-hidden p-2 dark:bg-gray-800 dark:border-gray-700 mt-2 select-none",children:[Object(u.jsxs)("button",{className:"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-gray-700",onClick:function(){return O(!v)},children:[Object(u.jsx)("img",{src:Se,alt:"Dark mode icon",className:"w-8 h-8 dark:bg-gray-600 rounded-full p-1"}),Object(u.jsx)("span",{children:"Dark Mode"})]}),Object(u.jsxs)("button",{className:"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform active:scale-95 dark:hover:bg-gray-700",onClick:function(){!function(e,t){x({isOpen:!0,title:arguments.length>3?arguments[3]:void 0,content:e,confirmButtonTitle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Yes",confirmButtonAction:t})}("Do you want to log out?",t)},children:[Object(u.jsx)("img",{src:Fe,alt:"Dark mode icon",className:"w-8 h-8 dark:bg-gray-600 rounded-full p-1"}),Object(u.jsx)("span",{children:"Log Out"})]})]})]})]})]})]})};var Pe=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(l.g)(),s=Object(i.b)(),o=Object(i.c)((function(e){return e.chats.chats})),m=Object(i.c)((function(e){return e.users.currentUser})),f=Object(i.c)((function(e){return e.chats.selectedId}));function b(e,t){s(D({isOpen:!0,title:e,content:t}))}return Object(a.useEffect)((function(){function e(){return(e=Object(g.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(z(!0)),ce.getAll().then((function(e){var t=J(e.data);s(t),s(z(!1))})).catch((function(e){var t="string"===typeof e?e:"Cannot get any chats. Please login and try again!";s(z(!1)),b("Error",t)})),C.getCurrentUser().then((function(e){s(L(e)),s(z(!1))})).catch((function(e){var t="string"===typeof e?e:"Cannot get any chats. Please login and try again!";s(z(!1)),b("Error",t)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=(new ae.a).withUrl("https://teechatapi.azurewebsites.net/hubs/chats",{accessTokenFactory:function(){return localStorage.getItem("token")}}).withAutomaticReconnect().build();r(e)}),[]),Object(a.useEffect)((function(){return n&&!n.connectionStarted&&n.start().then((function(e){n.on("ReceiveMessage",(function(e){var t=H(e);s(t)})),n.on("ReceiveChat",(function(e){var t=Z(e);s(t),e.creatorUserName===m.userName&&s(W(e.id))})),n.on("ReceiveUpdatedChat",(function(e){var t=$(e);s(t)})),n.on("ReceiveUpdatedGroupAvatar",(function(e){var t=Q(e);s(t)}))})).catch((function(e){var t="string"===typeof e?e:"Cannot connect to server! Please contact administrator.";console.error("Connection failed: ",e),b("Connection failed",t)})),function(){n&&n.connectionStarted&&n.stop()}}),[n]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"dark:bg-gray-900 dark:text-white  animate-fade grid grid-cols-12 h-screen w-screen",children:[Object(u.jsxs)("div",{className:"animate-fade lg:col-span-3 md:col-span-4 col-span-12 md:flex flex-col h-screen border-r-2 px-4 dark:border-gray-700 border-gray-200 "+(0!==f?" hidden":""),children:[Object(u.jsx)(Me,{logout:function(){window.localStorage.removeItem("token"),n.stop(),c.push("/login")}}),Object(u.jsx)(me,{})]}),f?Object(u.jsx)("div",{className:"animate-fade lg:col-span-9 md:col-span-8 col-span-12 flex h-screen w-full overflow-y-auto",children:Object(u.jsx)(Ce,{chat:o.find((function(e){return e.id===f}))})}):0===(null===o||void 0===o?void 0:o.length)?Object(u.jsx)("div",{className:"animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex h-full w-full ",children:"You do not have any chats, please create a chat"}):Object(u.jsx)("div",{className:"animate-fade hidden text-lg items-center justify-center lg:col-span-9 md:col-span-8 col-span-12 md:flex h-full w-full ",children:"Select a chat to start"})]})})},Re=n.p+"static/media/forbid.7d678d5c.jpg";var Te=function(e){var t=e.message;return Object(u.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(u.jsx)("img",{className:"md:w-1/3 object-cover",src:Re,alt:"Error"}),Object(u.jsx)("span",{className:"font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"You don't have permission to access this resources"}),Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)(m,{content:"Return home page"})})]})},ze=n.p+"static/media/not-found.500f302c.jpg";var De=function(e){var t=e.message;return Object(u.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(u.jsx)("img",{className:"md:w-1/3 object-cover",src:ze,alt:"Error"}),Object(u.jsx)("span",{className:" font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"Not found resources"}),Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)(m,{content:"Return home page"})})]})},Ye=n(105),Ge=n(25),Be=n(31);var qe=function(){var e,t,n,r,c,s,b=Object(a.useState)(!1),j=Object(d.a)(b,2),g=j[0],x=j[1],h=Object(a.useState)(!0),v=Object(d.a)(h,2),O=v[0],y=v[1],w=Object(a.useState)({isOpen:!1,content:"",title:"Notification"}),N=Object(d.a)(w,2),k=N[0],S=N[1],U=Object(i.b)(),E=Object(l.g)(),F=Be.a().shape({firstName:Be.b().required("First Name is required"),lastName:Be.b().required("Last Name is required"),userName:Be.b().required("User Name is required").min(6,"Username must be 6-20 characters").max(20,"Username must be 6-20 characters").test("checkUsername","Username does not contain special characters",(function(e){return Ve(e,"^(?=[a-zA-Z0-9._])(?!.*[_.]{2})[^_.].*[^_.]$")})).test("existsUsername","Username is already taken",(function(e){return!O})),email:Be.b().required("Email is required").test("checkEmail","Email is invalid",(function(e){return Ve(e,/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/)})),password:Be.b().required("Password is required").test("checkPassword","Passwords must be at least 6 characters, one digit, one uppercase, one non alphanumeric character",(function(e){return Ve(e,"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,}$")})),confirmPassword:Be.b().required("Confirm Password is required").test("ConfirmPasswordMatch","Password and Confirmation Password must match",(function(e){return e===Y.password}))}),I=Object(Ge.d)({resolver:Object(Ye.a)(F),defaultValues:{}}),A=I.register,L=I.handleSubmit,M=I.control,P=I.setError,R=I.clearErrors,T=I.reset,D=I.formState.errors,Y=Object(Ge.e)({control:M});function G(e,t){S({isOpen:!0,title:e,content:t})}return Object(a.useEffect)((function(){C.checkUserNameExists(Y.userName).then((function(e){e.isExists?(P("userName",{type:"required",message:"Username '".concat(Y.userName,"' is already taken")},{shouldFocus:!0}),y(!0)):(R("userName"),y(!1))}))}),[Y.userName]),Object(a.useEffect)((function(){Y.firstName&&Y.lastName&&Y.userName&&Y.email&&Y.password&&Y.confirmPassword?x(!0):x(!1)}),[Y]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ne,{title:k.title,isOpen:k.isOpen,content:k.content,onClick:function(){S({isOpen:!1}),E.push("/login")}}),Object(u.jsxs)("div",{className:"z-10 h-screen grid md:grid-cols-7 place-items-center px-6",children:[Object(u.jsx)("img",{src:f,alt:"login",className:"md:block hidden col-span-3 w-full ml-44"}),Object(u.jsxs)("form",{onSubmit:L((function(e){U(z(!0)),C.register(e).then((function(e){G("Success",Object(u.jsxs)("span",{children:['"Create account successfully! Please'," ",Object(u.jsx)(o.b,{className:"font-bold text-green-600",to:"/login",children:"log in"}),'!"']})),T({})})).catch((function(e){G("Create account failed","string"===typeof e?e:"Cannot create account. Oops! Something went wrong!")})),U(z(!1))})),className:"container rounded-2xl flex flex-col py-10 md:w-full md:col-span-4 md:px-20 lg:px-30",children:[Object(u.jsx)("h1",{className:"text-3xl font-bold text-primary text-green-600 text-center mb-8",children:"Sign up to TeeChat"}),Object(u.jsxs)("div",{className:"mb-3 grid grid-cols-2 place-items-start ",children:[Object(u.jsxs)("div",{className:"col-span-1 space-y-2 mr-2",children:[Object(u.jsxs)("label",{htmlFor:"fistName",className:"text-lg font-semibold ",children:["First Name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({},A("firstName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(e=D.firstName)||void 0===e?void 0:e.message})]}),Object(u.jsxs)("div",{className:"col-span-1 space-y-2 ml-2",children:[Object(u.jsxs)("label",{htmlFor:"lastName",className:"text-lg font-semibold ",children:["Last Name ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({},A("lastName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(t=D.lastName)||void 0===t?void 0:t.message})]})]}),Object(u.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(u.jsxs)("label",{htmlFor:"userName",className:"text-lg font-semibold ",children:["Username ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({},A("userName")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(n=D.userName)||void 0===n?void 0:n.message})]}),Object(u.jsxs)("div",{className:"space-y-2 mb-3",children:[Object(u.jsxs)("label",{htmlFor:"email",className:"text-lg font-semibold ",children:["Email ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({},A("email")),{},{type:"text",className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(r=D.email)||void 0===r?void 0:r.message})]}),Object(u.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(u.jsxs)("label",{htmlFor:"password",className:"text-lg font-semibold ",children:["Password ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({type:"password"},A("password")),{},{className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(c=D.password)||void 0===c?void 0:c.message})]}),Object(u.jsxs)("div",{className:"space-y-2 mb-2",children:[Object(u.jsxs)("label",{htmlFor:"confirmPassword",className:"text-lg font-semibold ",children:["Confirm Password ",Object(u.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(u.jsx)("input",Object(p.a)(Object(p.a)({type:"password"},A("confirmPassword")),{},{className:"bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200"})),Object(u.jsx)("div",{className:"text-red-500 text-sm",children:null===(s=D.confirmPassword)||void 0===s?void 0:s.message})]}),Object(u.jsx)(m,{disabled:!g,content:"Sign Up",className:"mb-4 mt-2 font-bold"}),Object(u.jsxs)("div",{className:"text-center",children:["Already a member?"," ",Object(u.jsx)(o.b,{to:"/login",className:"text-green-500 font-bold",children:"Sign in"})]})]})]})]})};function Ve(e,t){if(e&&t)return new RegExp(t).test(e)}var _e=n.p+"static/media/error.c72c9a3e.jpg";var Ze=function(e){var t=e.message;return Object(u.jsxs)("div",{className:"fixed h-screen w-screen flex flex-col justify-center items-center space-y-8 px-2",children:[Object(u.jsx)("img",{className:"md:w-1/3 object-cover",src:_e,alt:"Error"}),Object(u.jsx)("span",{className:"font-bold text-2xl md:text-3xl text-center",children:null!==t&&void 0!==t?t:"Oops! Something went wrong!"}),Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)(m,{content:"Return home page"})})]})};var $e=function(){var e=Object(i.c)((function(e){return e.app.isLoading})),t=Object(i.c)((function(e){return e.app.popup})),n=Object(i.b)(),a=Object(l.g)();return window.localStorage.getItem("token")||a.push("/login"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(o.a,{basename:"/TeeChat",children:[Object(u.jsx)(te,{isOpen:e,className:"z-50"}),Object(u.jsx)(ne,{title:t.title,isOpen:t.isOpen,content:t.content,onClick:function(){n(D({isOpen:!1}))}}),Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.a,{exact:!0,from:"/",to:"/chats"}),Object(u.jsx)(l.b,{path:"/chats",component:Pe}),Object(u.jsx)(l.b,{path:"/register",component:qe}),Object(u.jsx)(l.b,{path:"/notfound",component:De}),Object(u.jsx)(l.b,{path:"/forbid",component:Te}),Object(u.jsx)(l.b,{path:"/ServerError",component:Ze}),Object(u.jsx)(l.b,{component:Pe})]})]})})};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(i.a,{store:ee,children:Object(u.jsxs)(o.a,{basename:"/TeeChat",children:[Object(u.jsx)(l.b,{path:"/login",component:G}),Object(u.jsx)(l.b,{component:$e})]})})}),document.getElementById("root"))}},[[250,1,2]]]);
//# sourceMappingURL=main.a50602f4.chunk.js.map